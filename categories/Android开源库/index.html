<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>分类: Android开源库 - onlyloveyd</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="小码过河，人人喊累">
<meta name="keywords" content="onlyloveyd">
<meta property="og:type" content="website">
<meta property="og:title" content="onlyloveyd">
<meta property="og:url" content="http://yoursite.com/categories/Android开源库/index.html">
<meta property="og:site_name" content="onlyloveyd">
<meta property="og:description" content="小码过河，人人喊累">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onlyloveyd">
<meta name="twitter:description" content="小码过河，人人喊累">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="onlyloveyd" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/categories">分类</a></li>
            
            <li class="is-active"><a href="#" aria-current="page">Android开源库</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-27T14:41:49.000Z">2018-01-27</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 分钟 读完 (大约 1204 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/27/《Android开源库》 Retrofit & WebService/">《Android开源库》 Retrofit &amp; WebService</a>
            
        </h1>
        <div class="content">
            <p> 版权声明：本文为博主原创文章，未经博主允许不得转载。 <a href="https://blog.csdn.net/poorkick/article/details/79183920" target="_blank" rel="noopener">https://blog.csdn.net/poorkick/article/details/79183920</a>   </p>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a><a href></a>1. 前言</h2><p> 最近工作中需要使用到WebService接口，个人比较喜欢Restful的接口风格，对WebService不是很了解。</p>
<blockquote>
<p>Web Service也叫XML Web Service WebService是一种可以接收从Internet或者Intranet上的其它系统中传递过来的请求，轻量级的独立的通讯技术。是:通过SOAP在Web上提供的软件服务，使用WSDL文件进行说明，并通过UDDI进行注册。</p>
<p> 而对于我们移动开发人员而言，它就是一种数据交互的通道。我们需要了解他的请求结构体和响应结构体。</p>
</blockquote>
<h2 id="2-WebService调试工具SoapUI"><a href="#2-WebService调试工具SoapUI" class="headerlink" title="2. WebService调试工具SoapUI"></a><a href></a>2. WebService调试工具SoapUI</h2><p> SoapUI是一个开源测试工具，通过soap/http来检查、调用、实现Web Service的功能/负载/符合性测试。该工具既可作为一个单独的测试软件使用，也可利用插件集成到Eclipse，maven2.X，Netbeans 和intellij中使用。SoapUI Pro是SoapUI的商业非开源版本，实现的功能较开源的SoapUI更多。<br> (找不到资源的可以在文章下方留言)<br> <img src="https://img-blog.csdn.net/20180127220625998?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="3-接口分析（以getMobileCodeInfo为例）"><a href="#3-接口分析（以getMobileCodeInfo为例）" class="headerlink" title="3. 接口分析（以getMobileCodeInfo为例）"></a><a href></a>3. 接口分析（以getMobileCodeInfo为例）</h2><p> 以 <a href="http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?wsdl" target="_blank" rel="noopener">http://ws.webxml.com.cn/WebServices/MobileCodeWS.asmx?wsdl</a> 为测试例子</p>
<p> <img src="https://img-blog.csdn.net/20180127220823070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br> <img src="https://img-blog.csdn.net/20180127220831236?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p> 从上面两个图可以看到我们得请求体和响应体的结构和内容，以XML格式作为数据交互的结构类型。</p>
<h2 id="4-程序设计"><a href="#4-程序设计" class="headerlink" title="4. 程序设计"></a><a href></a>4. 程序设计</h2><h3 id="4-1-添加依赖"><a href="#4-1-添加依赖" class="headerlink" title="4.1 添加依赖"></a><a href></a>4.1 添加依赖</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">implementation &apos;com.squareup.okhttp3:okhttp:3.8.0&apos;</span><br><span class="line">implementation &apos;com.parkingwang:okhttp3-loginterceptor:0.5&apos;</span><br><span class="line">implementation &apos;com.squareup.retrofit2:retrofit:2.3.0&apos;</span><br><span class="line">implementation &apos;com.squareup.retrofit2:adapter-rxjava2:2.3.0&apos;</span><br><span class="line">implementation(&apos;com.squareup.retrofit2:converter-simplexml:2.3.0&apos;) &#123;</span><br><span class="line">    exclude module: &apos;stax&apos;</span><br><span class="line">    exclude module: &apos;stax-api&apos;</span><br><span class="line">    exclude module: &apos;xpp3&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-2-请求体设计"><a href="#4-2-请求体设计" class="headerlink" title="4.2 请求体设计"></a><a href></a>4.2 请求体设计</h3><p> 从请求体XML结构而言</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:web=&quot;http://WebXml.com.cn/&quot;&gt;</span><br><span class="line">   &lt;soap:Header/&gt;</span><br><span class="line">   &lt;soap:Body&gt;</span><br><span class="line">      &lt;web:getMobileCodeInfo&gt;</span><br><span class="line">         &lt;!--Optional:--&gt;</span><br><span class="line">         </span><br><span class="line">         &lt;!--Optional:--&gt;</span><br><span class="line">         &lt;web:mobileCode&gt;18507152743&lt;/web:mobileCode&gt;</span><br><span class="line">      &lt;/web:getMobileCodeInfo&gt;</span><br><span class="line">   &lt;/soap:Body&gt;</span><br><span class="line">&lt;/soap:Envelope&gt;</span><br></pre></td></tr></table></figure>

<p> 最外层soap:Envelope<br> 其次soap:Body<br> 最后web:getMobileCodeInfo，而web:getMobileCodeInfo中有一个mobileCode我们可以用变量表示，所以创建如下三个类：<br> MobileCodeRequestEnvelope.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;soap:Envelope&quot;)</span><br><span class="line">@NamespaceList(&#123;</span><br><span class="line">        @Namespace(prefix = &quot;xsi&quot;, reference = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;),</span><br><span class="line">        @Namespace(prefix = &quot;xsd&quot;, reference = &quot;http://www.w3.org/2001/XMLSchema&quot;),</span><br><span class="line">        @Namespace(prefix = &quot;soap&quot;, reference = &quot;http://www.w3.org/2003/05/soap-envelope&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">public class MobileCodeRequestEnvelope &#123;</span><br><span class="line"></span><br><span class="line">    @Element(name = &quot;soap:Body&quot;, required = false)</span><br><span class="line">    private MobileCodeRequestBody body;</span><br><span class="line"></span><br><span class="line">    public MobileCodeRequestBody getBody() &#123;</span><br><span class="line">        return body;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBody(MobileCodeRequestBody body) &#123;</span><br><span class="line">        this.body = body;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> MobileCodeRequestBody.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;soap:Body&quot;, strict = false)</span><br><span class="line">public class MobileCodeRequestBody &#123;</span><br><span class="line">    @Element(name = &quot;getMobileCodeInfo&quot;, required = false)</span><br><span class="line">    private MobileCodeRequestData mMobileCodeRequestData;</span><br><span class="line"></span><br><span class="line">    public MobileCodeRequestData getMobileCodeRequestData() &#123;</span><br><span class="line">        return mMobileCodeRequestData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMobileCodeRequestData(</span><br><span class="line">            MobileCodeRequestData mobileCodeRequestData) &#123;</span><br><span class="line">        mMobileCodeRequestData = mobileCodeRequestData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> MobileCodeRequestData.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;getMobileCodeInfo&quot;, strict = false)</span><br><span class="line">@Namespace(reference = &quot;http://WebXml.com.cn/&quot;)</span><br><span class="line">public class MobileCodeRequestData &#123;</span><br><span class="line">    @Element(name = &quot;mobileCode&quot;, required = false)</span><br><span class="line">    private String mobileCode;</span><br><span class="line"></span><br><span class="line">    public String getMobileCode() &#123;</span><br><span class="line">        return mobileCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMobileCode(String mobileCode) &#123;</span><br><span class="line">        this.mobileCode = mobileCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-3-响应体设计"><a href="#4-3-响应体设计" class="headerlink" title="4.3 响应体设计"></a><a href></a>4.3 响应体设计</h3><p> 从响应体XML而言</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;</span><br><span class="line">   &lt;soap:Body&gt;</span><br><span class="line">      &lt;getMobileCodeInfoResponse xmlns=&quot;http://WebXml.com.cn/&quot;&gt;</span><br><span class="line">         &lt;getMobileCodeInfoResult&gt;18507152743：湖北 武汉 湖北联通GSM卡&lt;/getMobileCodeInfoResult&gt;</span><br><span class="line">      &lt;/getMobileCodeInfoResponse&gt;</span><br><span class="line">   &lt;/soap:Body&gt;</span><br><span class="line">&lt;/soap:Envelope&gt;</span><br></pre></td></tr></table></figure>

<p> 最外层soap:Envelope<br> 其次soap:Body<br> 然后getMobileCodeInfoResponse，最后getMobileCodeInfoResult，我们可以用变量表示，所以创建如下三个类：</p>
<p> MobileCodeResponseEnvelope.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;soap:Envelope&quot;)</span><br><span class="line">@NamespaceList(&#123;</span><br><span class="line">        @Namespace( prefix = &quot;xsi&quot;, reference = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;),</span><br><span class="line">        @Namespace( prefix = &quot;xsd&quot;, reference = &quot;http://www.w3.org/2001/XMLSchema&quot;),</span><br><span class="line">        @Namespace( prefix = &quot;soap&quot;, reference = &quot;http://www.w3.org/2003/05/soap-envelope&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">public class MobileCodeResponseEnvelope &#123;</span><br><span class="line">    @Element(name = &quot;Body&quot;, required = false)</span><br><span class="line">    private MobileCodeResponseBody mMobildCodeResponseBody;</span><br><span class="line"></span><br><span class="line">    public MobileCodeResponseBody getMobildCodeResponseBody() &#123;</span><br><span class="line">        return mMobildCodeResponseBody;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMobildCodeResponseBody(</span><br><span class="line">            MobileCodeResponseBody mobildCodeResponseBody) &#123;</span><br><span class="line">        mMobildCodeResponseBody = mobildCodeResponseBody;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> MobileCodeResponseBody.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;Body&quot;)</span><br><span class="line">public class MobileCodeResponseBody &#123;</span><br><span class="line">    public MobileCodeResponseInfo getMobileCodeResponseInfo() &#123;</span><br><span class="line">        return mMobileCodeResponseInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMobileCodeResponseInfo(</span><br><span class="line">            MobileCodeResponseInfo mobileCodeResponseInfo) &#123;</span><br><span class="line">        mMobileCodeResponseInfo = mobileCodeResponseInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Element(name = &quot;getMobileCodeInfoResponse&quot;, required = false)</span><br><span class="line">    private MobileCodeResponseInfo mMobileCodeResponseInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> MobileCodeResponseInfo.java</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Root(name = &quot;getMobileCodeInfoResponse&quot;,strict = false)</span><br><span class="line">public class MobileCodeResponseInfo &#123;</span><br><span class="line"></span><br><span class="line">    public String getMobileCodeResult() &#123;</span><br><span class="line">        return MobileCodeResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMobileCodeResult(String mobileCodeResult) &#123;</span><br><span class="line">        MobileCodeResult = mobileCodeResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Element(name = &quot;getMobileCodeInfoResult&quot;, required = false)</span><br><span class="line">    private String MobileCodeResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-4-接口设计"><a href="#4-4-接口设计" class="headerlink" title="4.4 接口设计"></a><a href></a>4.4 接口设计</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public interface mobileCodeApi &#123;</span><br><span class="line">    @Headers(&#123;</span><br><span class="line">            &quot;Content-Type: text/xml&quot;,</span><br><span class="line">            &quot;Accept-Charset: utf-8&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">    @POST(&quot;MobileCodeWS.asmx&quot;)</span><br><span class="line">    Call&lt;MobileCodeResponseEnvelope&gt; getMobileCodeInfo(</span><br><span class="line">            @Body MobileCodeRequestEnvelope requestEnvelope);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-5-Retrofit创建"><a href="#4-5-Retrofit创建" class="headerlink" title="4.5 Retrofit创建"></a><a href></a>4.5 Retrofit创建</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class Retrofitance &#123;</span><br><span class="line">    private static Strategy strategy = new AnnotationStrategy();</span><br><span class="line">    private static Serializer serializer = new Persister(strategy);</span><br><span class="line"></span><br><span class="line">    private static OkHttpClient.Builder okHttpClient = new OkHttpClient.Builder();</span><br><span class="line"></span><br><span class="line">    private static Retrofit.Builder retrofitBuilder = new Retrofit.Builder()</span><br><span class="line">            .addConverterFactory(SimpleXmlConverterFactory.create(serializer))</span><br><span class="line">            .baseUrl(Constant.BASE_URL);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static &lt;T&gt; T createMobileCodeService(Class&lt;T&gt; serviceClass) &#123;</span><br><span class="line">        okHttpClient.interceptors().add(new Interceptor() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public okhttp3.Response intercept(Interceptor.Chain chain) throws IOException &#123;</span><br><span class="line">                Request original = chain.request();</span><br><span class="line"></span><br><span class="line">                Request.Builder requestBuilder = original.newBuilder()</span><br><span class="line">                        .header(&quot;Content-Type&quot;, &quot;text/xml;charset=UTF-8&quot;)</span><br><span class="line">                        .method(original.method(), original.body());</span><br><span class="line"></span><br><span class="line">                Request request = requestBuilder.build();</span><br><span class="line">                return chain.proceed(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        OkHttpClient client = okHttpClient.connectTimeout(1, TimeUnit.MINUTES)</span><br><span class="line">                .addInterceptor(new LogInterceptor())</span><br><span class="line">                .writeTimeout(1, TimeUnit.MINUTES)</span><br><span class="line">                .readTimeout(1, TimeUnit.MINUTES)</span><br><span class="line">                .build();</span><br><span class="line">        Retrofit retrofit = retrofitBuilder.client(client).build();</span><br><span class="line">        return retrofit.create(serviceClass);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-6-请求数据"><a href="#4-6-请求数据" class="headerlink" title="4.6 请求数据"></a><a href></a>4.6 请求数据</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mobileCodeApi apiService = Retrofitance.createMobileCodeService(mobileCodeApi.class);</span><br><span class="line">MobileCodeRequestEnvelope requestEnvelope = new MobileCodeRequestEnvelope();</span><br><span class="line">MobileCodeRequestBody requestBody = new MobileCodeRequestBody();</span><br><span class="line">MobileCodeRequestData requestData = new MobileCodeRequestData();</span><br><span class="line"></span><br><span class="line">requestData.setMobileCode(&quot;18507152743&quot;);</span><br><span class="line">requestBody.setMobileCodeRequestData(requestData);</span><br><span class="line">requestEnvelope.setBody(requestBody);</span><br><span class="line"></span><br><span class="line">Call&lt;MobileCodeResponseEnvelope&gt; call = apiService.getMobileCodeInfo(requestEnvelope);</span><br><span class="line">call.enqueue(new Callback&lt;MobileCodeResponseEnvelope&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onResponse(Call&lt;MobileCodeResponseEnvelope&gt; call,</span><br><span class="line">            Response&lt;MobileCodeResponseEnvelope&gt; response) &#123;</span><br><span class="line">        MobileCodeResponseEnvelope mobileCodeResponseEnvelope = response.body();</span><br><span class="line">        if (mobileCodeResponseEnvelope != null) &#123;</span><br><span class="line">            Toast.makeText(MainActivity.this, &quot;请求成功&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">            String result =</span><br><span class="line">                    mobileCodeResponseEnvelope.getMobildCodeResponseBody()</span><br><span class="line">                            .getMobileCodeResponseInfo().getMobileCodeResult();</span><br><span class="line">            mTvMobileResult.setText(result);</span><br><span class="line">            System.err.println(&quot;yidong -- result = &quot; + result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onFailure(Call&lt;MobileCodeResponseEnvelope&gt; call, Throwable t) &#123;</span><br><span class="line">        System.err.println(&quot;yidong -- onFailure&quot;);</span><br><span class="line">        Toast.makeText(MainActivity.this, &quot;请求失败&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="4-7-效果"><a href="#4-7-效果" class="headerlink" title="4.7 效果"></a><a href></a>4.7 效果</h3><p> <img src="https://img-blog.csdn.net/20180127222506868?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="5-源码地址"><a href="#5-源码地址" class="headerlink" title="5. 源码地址"></a><a href></a>5. 源码地址</h2><p> <a href="https://github.com/onlyloveyd/RetrofitWebService" target="_blank" rel="noopener">RetrofitWebService</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-08T13:00:11.000Z">2018-01-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 736 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/08/RxJava2小白手册（3）- map/">RxJava2-map</a>
            
        </h1>
        <div class="content">
            <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p> 操作符map，字面理解一下，就是映射，那么这个操作符如何使用呢？</p>
<h2 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h2><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"Emit 1"</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">1</span>);</span><br><span class="line">        Logger(<span class="hljs-string">"Emit 2"</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">2</span>);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observer&lt;String&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onSubscribe"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(String object)</span> </span>&#123;</span><br><span class="line">           Logger(<span class="hljs-string">" onNext "</span> +  object);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onError e = "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onComplete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">observable.subscribeOn(Schedulers.io())</span><br><span class="line">        .map(<span class="hljs-keyword">new</span> Function&lt;Integer, String&gt;() &#123;</span><br><span class="line">            <span class="hljs-meta">@Override</span></span><br><span class="line">            <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">apply</span><span class="hljs-params">(Integer integer)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-string">"i am "</span> + integer;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(observer);</span><br></pre></td></tr></table></figure>

<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p> <img src="https://img-blog.csdn.net/20180108203405819" alt="这里写图片描述"></p>
<p> 可以看到首先执行的是onSubscribe方法，然后发射两个onNext事件，两个Integer参数经过转换之后成为String类型，然后传递给Observer作出动作，这就是Map的作用。</p>
<h3 id="源码浅析"><a href="#源码浅析" class="headerlink" title="源码浅析"></a>源码浅析</h3><p>下面是map操作符的源码。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//观察map中Function的两个参数，一个是T也就是变化前的类型，R为变化后的类型，最后返回的是R类型的Observerable(姑且这么说)</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;R&gt; <span class="hljs-function">Observable&lt;R&gt; <span class="hljs-title">map</span><span class="hljs-params">(Function&lt;? <span class="hljs-keyword">super</span> T, ? extends R&gt; mapper)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">//常规非空检查</span></span><br><span class="line">    ObjectHelper.requireNonNull(mapper, <span class="hljs-string">"mapper is null"</span>);</span><br><span class="line">    <span class="hljs-comment">//又是onAssembly,不重要，关注ObservableMap</span></span><br><span class="line">    <span class="hljs-keyword">return</span> RxJavaPlugins.onAssembly(<span class="hljs-keyword">new</span> ObservableMap&lt;T, R&gt;(<span class="hljs-keyword">this</span>, mapper));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看下ObservableMap的构造方法，传入的参数，source为转换前的Observable&lt; T &gt;, 第二个参数就是我们得function。<br>ObservableMap继承AbstractObservableWithUpstream，而后者继承Observable，可以看出来，经过map转换后的Observable对象就是ObservableMap类型。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ObservableMap</span><span class="hljs-params">(ObservableSource&lt;T&gt; source, Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; function)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>(source);</span><br><span class="line">    <span class="hljs-keyword">this</span>.function = function;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>既然转换后是ObservableMap类型，那么必然存在subscribeActual方法，果然</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribeActual</span><span class="hljs-params">(Observer&lt;? <span class="hljs-keyword">super</span> U&gt; t)</span> </span>&#123;</span><br><span class="line">    source.subscribe(<span class="hljs-keyword">new</span> MapObserver&lt;T, U&gt;(t, function));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看看MapObserver是个什么东西？</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//MapObserver继承BasicFuseableObserver，而后者实现了Observer接口</span></span><br><span class="line"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapObserver</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">BasicFuseableObserver</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">U</span>&gt; </span>&#123;</span><br><span class="line">     <span class="hljs-comment">//map操作符中的function</span></span><br><span class="line">     <span class="hljs-keyword">final</span> Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; mapper;</span><br><span class="line">     <span class="hljs-comment">//actual是栗子中我们后面subscribe的Observer</span></span><br><span class="line">     MapObserver(Observer&lt;? <span class="hljs-keyword">super</span> U&gt; actual, Function&lt;? <span class="hljs-keyword">super</span> T, ? extends U&gt; mapper) &#123;</span><br><span class="line">         <span class="hljs-keyword">super</span>(actual);</span><br><span class="line">         <span class="hljs-keyword">this</span>.mapper = mapper;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-meta">@Override</span></span><br><span class="line">     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(T t)</span> </span>&#123;</span><br><span class="line">         <span class="hljs-comment">//done在执行了onError或者onComplete之后为true,具体查看父类BasicFuseableObserver。done为true时，不做处理。</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (done) &#123;</span><br><span class="line">             <span class="hljs-keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">if</span> (sourceMode != NONE) &#123;</span><br><span class="line">             actual.onNext(<span class="hljs-keyword">null</span>);</span><br><span class="line">             <span class="hljs-keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">//U类型，转换后的类型，栗子中为String</span></span><br><span class="line">         U v;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             <span class="hljs-comment">//常规非空检查，但是里面有个apply的操作，这个apply的操作就是我们上面栗子中把Integer转成String的操作。v就是转换后的String类型</span></span><br><span class="line">             v = ObjectHelper.requireNonNull(mapper.apply(t), <span class="hljs-string">"The mapper function returned a null value."</span>);</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">             fail(ex);</span><br><span class="line">             <span class="hljs-keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-comment">//Observer执行onNext操作，v为转换后的类型，如栗子中的String</span></span><br><span class="line">         actual.onNext(v);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-meta">@Override</span></span><br><span class="line">     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">requestFusion</span><span class="hljs-params">(<span class="hljs-keyword">int</span> mode)</span> </span>&#123;</span><br><span class="line">         <span class="hljs-keyword">return</span> transitiveBoundaryFusion(mode);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-meta">@Nullable</span></span><br><span class="line">     <span class="hljs-meta">@Override</span></span><br><span class="line">     <span class="hljs-function"><span class="hljs-keyword">public</span> U <span class="hljs-title">poll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">         T t = qs.poll();</span><br><span class="line">         <span class="hljs-keyword">return</span> t != <span class="hljs-keyword">null</span> ? ObjectHelper.&lt;U&gt;requireNonNull(mapper.apply(t), <span class="hljs-string">"The mapper function returned a null value."</span>) : <span class="hljs-keyword">null</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>为什么发射之后Observer的onNext没有立刻执行，因为上文例子中subscribeOn和observeOn所在的线程不一样。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-06T08:18:25.000Z">2018-01-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 分钟 读完 (大约 2553 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/06/RxJava2小白手册（2）- 线程管理和流程浅析/">RxJava2-线程管理和流程浅析</a>
            
        </h1>
        <div class="content">
            <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p> 承接上文，结合使用场景，讨论一下如何告别AsyncTask，就是因为RxJava的强大线程管理功能。</p>
<h2 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h2><p>认识RxJava之前，我们处理异步任务的方式主要有两种：</p>
<ol>
<li>AsyncTask</li>
<li>Thread + Runnable。</li>
</ol>
<p>涉及的代码量相比较RxJava而言大太多，针对Handler处理不好，可能存在内存泄漏的风险。不赘述，看看如何使用RxJava处理异步任务。</p>
<h3 id="异步处理"><a href="#异步处理" class="headerlink" title="异步处理"></a>异步处理</h3><h4 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h4><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"Emit 111"</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">111</span>);</span><br><span class="line">        Logger(<span class="hljs-string">"Emit 222"</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">222</span>);</span><br><span class="line">        Logger(<span class="hljs-string">"Emit onComplete"</span>);</span><br><span class="line">        e.onComplete();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observer&lt;Integer&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onSubscribe"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(Integer integer)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onNext integer = "</span> + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onError e = "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onComplete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">observable.subscribeOn(Schedulers.newThread())</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(observer);</span><br></pre></td></tr></table></figure>

<h4 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h4><p><img src="https://img-blog.csdn.net/20180106112633683" alt="这里写图片描述"><br>可以清楚的看到，Observer下的操作是在主线程下完成的，而Observable下发射器的发射动作却是在一个新的线程中完成的。通过这种操作，我们可以在subscribe方法中执行耗时操作，然后结果通过onNext()方法返回给主线程，实现异步处理的目的。<br>常用的场景：访问数据库，网络请求数据，后台计算操作等等。</p>
<h4 id="Schedulers-和-AndroidSchedulers"><a href="#Schedulers-和-AndroidSchedulers" class="headerlink" title="Schedulers 和 AndroidSchedulers"></a>Schedulers 和 AndroidSchedulers</h4><p>AndroidSchedulers是RxAndroid中的线程调度器，主要用途如上所示，AndroidSchedulers.mainThread，代表Android中的主线程（UI线程）。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>Schedulers.computation()</td>
<td>用于计算任务</td>
</tr>
<tr>
<td>Schedulers.from(Executor executor)</td>
<td>使用指定的Executor作为调度器</td>
</tr>
<tr>
<td>Schedulers.io()</td>
<td>用于IO密集型任务，如异步阻塞IO操作，这个调度器的线程池会根据需要增长</td>
</tr>
<tr>
<td>Scheduler.newThread()</td>
<td>为每个任务创建一个新线程</td>
</tr>
<tr>
<td>Scheduler.shutdown()</td>
<td>停止调度器</td>
</tr>
<tr>
<td>Scheduler.single()</td>
<td>单独线程</td>
</tr>
<tr>
<td>Scheduler.start()</td>
<td>启动调度器</td>
</tr>
<tr>
<td>Scheduler.trampoline()</td>
<td>在当前线程中，但是会等到当前线程任务执行完毕之后再去执行</td>
</tr>
<tr>
<td>AndroidScheduler.mainThread()</td>
<td>主线程</td>
</tr>
</tbody></table>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="Observable-create"><a href="#Observable-create" class="headerlink" title="Observable.create()"></a>Observable.create()</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Observable&lt;T&gt; <span class="hljs-title">create</span><span class="hljs-params">(ObservableOnSubscribe&lt;T&gt; source)</span> </span>&#123;</span><br><span class="line">    ObjectHelper.requireNonNull(source, <span class="hljs-string">"source is null"</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> RxJavaPlugins.onAssembly(<span class="hljs-keyword">new</span> ObservableCreate&lt;T&gt;(source));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先执行非空检查，然后通过ObservableCreate来创建Observable。而ObservableCreate继承Observable。看下代码</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//ObservableCreate继承Observable</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ObservableCreate</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">Observable</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-comment">//ObservableOnSubscribe接口只有一个subscribe方法</span></span><br><span class="line">    <span class="hljs-keyword">final</span> ObservableOnSubscribe&lt;T&gt; source;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ObservableCreate</span><span class="hljs-params">(ObservableOnSubscribe&lt;T&gt; source)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-comment">//赋值，结合上面Observable的create方法，这个source应该是我们new出来的ObservableOnSubscribe</span></span><br><span class="line">        <span class="hljs-keyword">this</span>.source = source;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">//这个方法在Observable执行subscribe(Observer)的时候使用到</span></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribeActual</span><span class="hljs-params">(Observer&lt;? <span class="hljs-keyword">super</span> T&gt; observer)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-comment">//创建CreateEmitter，传入observer,内部使用</span></span><br><span class="line">        CreateEmitter&lt;T&gt; parent = <span class="hljs-keyword">new</span> CreateEmitter&lt;T&gt;(observer);</span><br><span class="line">        <span class="hljs-comment">//执行observer的onSubscribe方法，parent是CreateEmitter，实现了Disposable，和我们创建Observer时实现的onSubscribe方法一致，没毛病</span></span><br><span class="line">        observer.onSubscribe(parent);</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">            <span class="hljs-comment">//执行subscribe方法，source为ObservableOnSubscribe对象，parent为CreateEmitter，而CreateEmitter实现ObservableEmitter接口，没毛病</span></span><br><span class="line">            source.subscribe(parent);</span><br><span class="line">        &#125; <span class="hljs-keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">            Exceptions.throwIfFatal(ex);</span><br><span class="line">            <span class="hljs-comment">//CreateEmitter执行onError方法</span></span><br><span class="line">            parent.onError(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">//CreateEmitter类继承AtomicReference&lt;Disposable&gt;实现ObservableEmitter和Disposable 接口</span></span><br><span class="line">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateEmitter</span>&lt;<span class="hljs-title">T</span>&gt;</span></span><br><span class="line"><span class="hljs-class">    <span class="hljs-keyword">extends</span> <span class="hljs-title">AtomicReference</span>&lt;<span class="hljs-title">Disposable</span>&gt;</span></span><br><span class="line"><span class="hljs-class">    <span class="hljs-keyword">implements</span> <span class="hljs-title">ObservableEmitter</span>&lt;<span class="hljs-title">T</span>&gt;, <span class="hljs-title">Disposable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = -<span class="hljs-number">3434801548987643227L</span>;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">//创建过程中传入的Observer</span></span><br><span class="line">        <span class="hljs-keyword">final</span> Observer&lt;? <span class="hljs-keyword">super</span> T&gt; observer;</span><br><span class="line"></span><br><span class="line">        CreateEmitter(Observer&lt;? <span class="hljs-keyword">super</span> T&gt; observer) &#123;</span><br><span class="line">            <span class="hljs-keyword">this</span>.observer = observer;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">//OnNext方法</span></span><br><span class="line">        <span class="hljs-meta">@Override</span></span><br><span class="line">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(T t)</span> </span>&#123;</span><br><span class="line">            <span class="hljs-comment">//非空检查，onNext在2.0之后不允许传入null值作为参数</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (t == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                onError(<span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">"onNext called with null. Null values are generally not allowed in 2.x operators and sources."</span>));</span><br><span class="line">                <span class="hljs-keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-comment">//这个对应上我们的上一篇博客，一次性水管，如果isDisposed为true,则发射器发出的事件，将不会被观察者执行</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (!isDisposed()) &#123;</span><br><span class="line">                observer.onNext(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">//onError方法，当tryOnErro返回false的时候，执行RxJavaPlugins.onError(t)，何时tryOnError会返回false呢？看下面</span></span><br><span class="line">        <span class="hljs-meta">@Override</span></span><br><span class="line">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable t)</span> </span>&#123;</span><br><span class="line">            <span class="hljs-comment">//当isDisposed()为true后，会执行RxJavaPlugins.onError(t)操作，也就是说如果在isDisposed()为true的情况下，发射器还发出onError()事件，会导致程序崩溃。具体看下面的运行示例。</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (!tryOnError(t)) &#123;</span><br><span class="line">                RxJavaPlugins.onError(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-meta">@Override</span></span><br><span class="line">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">tryOnError</span><span class="hljs-params">(Throwable t)</span> </span>&#123;</span><br><span class="line">            <span class="hljs-comment">//也是不允许传入null</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (t == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                t = <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">"onError called with null. Null values are generally not allowed in 2.x operators and sources."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-comment">//如果isDisposed为false,执行观察者的onError方法，然后执行dispose()操作，也就是观察者不处理后面发射器发送的事件了。估计onComplete()方法中也会有类似的操作流程</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (!isDisposed()) &#123;</span><br><span class="line">                <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                    observer.onError(t);</span><br><span class="line">                &#125; <span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">                    dispose();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-comment">//只有当isDisposed为true的时候回返回false，也就是上一个方法回执行RxJavaPlugins.onError(t);操作</span></span><br><span class="line">            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-meta">@Override</span></span><br><span class="line">        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">            <span class="hljs-comment">//和上面onError(）操作类似，不同的是没有非空检查，因为onComplete没有参数。</span></span><br><span class="line">            <span class="hljs-keyword">if</span> (!isDisposed()) &#123;</span><br><span class="line">                <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                    observer.onComplete();</span><br><span class="line">                &#125; <span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">                    dispose();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ……</span><br><span class="line">    &#125;</span><br><span class="line">    ……</span><br><span class="line">    <span class="hljs-comment">//这部分介绍的是SerializedEmitter，暂无涉及</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例说明，isDisposed()为true时，发射器继续发送onError事件会导致程序崩溃。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">           <span class="hljs-meta">@Override</span></span><br><span class="line">           <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">               Logger(<span class="hljs-string">"Emit 111"</span>);</span><br><span class="line">               e.onNext(<span class="hljs-number">111</span>);</span><br><span class="line">               Logger(<span class="hljs-string">"Emit 222"</span>);</span><br><span class="line">               e.onNext(<span class="hljs-number">222</span>);</span><br><span class="line">               Logger(<span class="hljs-string">"Emit 333"</span>);</span><br><span class="line">               e.onNext(<span class="hljs-number">333</span>);</span><br><span class="line">               Logger(<span class="hljs-string">"Emit onError"</span>);</span><br><span class="line">               e.onError(<span class="hljs-keyword">new</span> Throwable(<span class="hljs-string">"Test Disposable onError"</span>));</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line"></span><br><span class="line">       Observer&lt;Integer&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;</span><br><span class="line">           Disposable mDisposable;</span><br><span class="line">           <span class="hljs-meta">@Override</span></span><br><span class="line">           <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;</span><br><span class="line">               Logger(<span class="hljs-string">"onSubscribe"</span>);</span><br><span class="line">               mDisposable = d;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="hljs-meta">@Override</span></span><br><span class="line">           <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(Integer integer)</span> </span>&#123;</span><br><span class="line">               Logger(<span class="hljs-string">"onNext integer = "</span> + integer);</span><br><span class="line">               <span class="hljs-keyword">if</span>(mDisposable!=<span class="hljs-keyword">null</span> &amp;&amp; !mDisposable.isDisposed() &amp;&amp; integer == <span class="hljs-number">222</span>) &#123;</span><br><span class="line">                   mDisposable.dispose();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="hljs-meta">@Override</span></span><br><span class="line">           <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;</span><br><span class="line">               Logger(<span class="hljs-string">"onError e = "</span> + e.getMessage());</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="hljs-meta">@Override</span></span><br><span class="line">           <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">               Logger(<span class="hljs-string">"onComplete"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       observable.subscribe(observer);</span><br></pre></td></tr></table></figure>

<p>运行结果：<br><img src="https://img-blog.csdn.net/20180106145442678" alt="这里写图片描述"></p>
<h3 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a>Observer</h3><p>创建Observer，无甚特殊，注意onSubscribe，onNext，onError传入的参数不能为空以及Disposable 的使用。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Observer</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(@NonNull Disposable d)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(@NonNull T t)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(@NonNull Throwable e)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="observable-subscribe-observer"><a href="#observable-subscribe-observer" class="headerlink" title="observable.subscribe(observer)"></a>observable.subscribe(observer)</h3><p>分析一下subscribe方法</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(Observer&lt;? <span class="hljs-keyword">super</span> T&gt; observer)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">//observer非空检查</span></span><br><span class="line">    ObjectHelper.requireNonNull(observer, <span class="hljs-string">"observer is null"</span>);</span><br><span class="line">    <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">        <span class="hljs-comment">//关联observable和observer</span></span><br><span class="line">        observer = RxJavaPlugins.onSubscribe(<span class="hljs-keyword">this</span>, observer);</span><br><span class="line"></span><br><span class="line">        ObjectHelper.requireNonNull(observer, <span class="hljs-string">"Plugin returned null Observer"</span>);</span><br><span class="line">        <span class="hljs-comment">//这个方法在Observable中是个抽象方法，但是结合上面Observerable的create过程，可以知道这里实际上调用的是ObservableCreate的subscribeActual方法，也就是上面我们分析的过程，没毛病</span></span><br><span class="line">        subscribeActual(observer);</span><br><span class="line">    &#125; <span class="hljs-keyword">catch</span> (NullPointerException e) &#123; <span class="hljs-comment">// NOPMD</span></span><br><span class="line">        <span class="hljs-keyword">throw</span> e;</span><br><span class="line">    &#125; <span class="hljs-keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">        Exceptions.throwIfFatal(e);</span><br><span class="line">        <span class="hljs-comment">// can't call onError because no way to know if a Disposable has been set or not</span></span><br><span class="line">        <span class="hljs-comment">// can't call onSubscribe because the call might have set a Subscription already</span></span><br><span class="line">        RxJavaPlugins.onError(e);</span><br><span class="line"></span><br><span class="line">        NullPointerException npe = <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">"Actually not, but can't throw other exceptions due to RS"</span>);</span><br><span class="line">        npe.initCause(e);</span><br><span class="line">        <span class="hljs-keyword">throw</span> npe;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一路看下来，我们就可以很快的和我们做的测试对应上，先调用onSubscribe方法，然后执行subscribe方法中的发射器操作，根据发射器的操作Observer作出对应的处理。</p>
<h3 id="subscribeOn"><a href="#subscribeOn" class="headerlink" title="subscribeOn"></a>subscribeOn</h3><p>subscribeOn用来指定Observable在哪个线程执行自己的subscribe方法。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; <span class="hljs-title">subscribeOn</span><span class="hljs-params">(Scheduler scheduler)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">//scheduler非空检查</span></span><br><span class="line">    ObjectHelper.requireNonNull(scheduler, <span class="hljs-string">"scheduler is null"</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> RxJavaPlugins.onAssembly(<span class="hljs-keyword">new</span> ObservableSubscribeOn&lt;T&gt;(<span class="hljs-keyword">this</span>, scheduler));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建了一个ObservableSubscribeOn，这个类千万别和上面创建Observable过程中使用的ObservableOnSubscribe接口弄混淆，结合当前操作为subscribeOn来记住这个类名。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ObservableSubscribeOn</span><span class="hljs-params">(ObservableSource&lt;T&gt; source, Scheduler scheduler)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">super</span>(source);</span><br><span class="line">    <span class="hljs-keyword">this</span>.scheduler = scheduler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Observerable继承自ObservableSource，所以创建ObservableSubscribeOn的时候Observable和scheduler传递过来。<br>ObservableSubscribeOn继承<br>AbstractObservableWithUpstream，而后者又继承Observable。所以实际上经过subscribeOn操作之后，后续操作的对象从Observerable变成了ObservableSubscribeOn，所以，当后面执行subscribe时执行的subscribeActual方法为ObservableSubscribeOn重的对应方法</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribeActual</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Observer&lt;? <span class="hljs-keyword">super</span> T&gt; s)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-comment">//封装Observer，实际Observer由其内部actual维护</span></span><br><span class="line">        <span class="hljs-keyword">final</span> SubscribeOnObserver&lt;T&gt; parent = <span class="hljs-keyword">new</span> SubscribeOnObserver&lt;T&gt;(s);</span><br><span class="line">        <span class="hljs-comment">//Observer执行onSubscribe方法，SubscribeOnObserver实现Disposable接口，所以上面的例子中onSubscribe传递的是Disposable类型</span></span><br><span class="line">        s.onSubscribe(parent);</span><br><span class="line"><span class="hljs-comment">//这里有3个操作：</span></span><br><span class="line"><span class="hljs-comment">//1. 创建SubscribeTask，传入封装后的Observer</span></span><br><span class="line"><span class="hljs-comment">//2. 调度器执行scheduleDirect操作</span></span><br><span class="line"><span class="hljs-comment">//3. 封装后的Observer执行setDisposable操作</span></span><br><span class="line"> parent.setDisposable(scheduler.scheduleDirect(<span class="hljs-keyword">new</span> SubscribeTask(parent)));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>关注scheduler.scheduleDirect(new SubscribeTask(parent))，先看下</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubscribeTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SubscribeOnObserver&lt;T&gt; parent;</span><br><span class="line"></span><br><span class="line">    SubscribeTask(SubscribeOnObserver&lt;T&gt; parent) &#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        source.subscribe(parent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现Runnable，终于看到一个有点熟悉的东西。传入的parent为封装后的Observer。而source则是创建ObservableSubscribeOn过程中传入的Observable。<br>在看scheduleDirect方法之前，我们得先弄清楚这个scheduler是个什么东西？在Schedulers类中，不同的Scheduler已经初始化完成。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">static</span> &#123;</span><br><span class="line">    SINGLE = RxJavaPlugins.initSingleScheduler(<span class="hljs-keyword">new</span> SingleTask());</span><br><span class="line"></span><br><span class="line">    COMPUTATION = RxJavaPlugins.initComputationScheduler(<span class="hljs-keyword">new</span> ComputationTask());</span><br><span class="line"></span><br><span class="line">    IO = RxJavaPlugins.initIoScheduler(<span class="hljs-keyword">new</span> IOTask());</span><br><span class="line"></span><br><span class="line">    TRAMPOLINE = TrampolineScheduler.instance();</span><br><span class="line"></span><br><span class="line">    NEW_THREAD = RxJavaPlugins.initNewThreadScheduler(<span class="hljs-keyword">new</span> NewThreadTask());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>就看下NEW_THREAD 这个，首先new NewThreadTask()</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewThreadTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Callable</span>&lt;<span class="hljs-title">Scheduler</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Scheduler <span class="hljs-title">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> NewThreadHolder.DEFAULT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewThreadHolder</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Scheduler DEFAULT = <span class="hljs-keyword">new</span> NewThreadScheduler();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewThreadScheduler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Scheduler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">final</span> ThreadFactory threadFactory;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String THREAD_NAME_PREFIX = <span class="hljs-string">"RxNewThreadScheduler"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> RxThreadFactory THREAD_FACTORY;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/** The name of the system property for setting the thread priority for this Scheduler. */</span></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String KEY_NEWTHREAD_PRIORITY = <span class="hljs-string">"rx2.newthread-priority"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">static</span> &#123;</span><br><span class="line">        <span class="hljs-keyword">int</span> priority = Math.max(Thread.MIN_PRIORITY, Math.min(Thread.MAX_PRIORITY,</span><br><span class="line">                Integer.getInteger(KEY_NEWTHREAD_PRIORITY, Thread.NORM_PRIORITY)));</span><br><span class="line"></span><br><span class="line">        THREAD_FACTORY = <span class="hljs-keyword">new</span> RxThreadFactory(THREAD_NAME_PREFIX, priority);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NewThreadScheduler</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>(THREAD_FACTORY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NewThreadScheduler</span><span class="hljs-params">(ThreadFactory threadFactory)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">this</span>.threadFactory = threadFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@NonNull</span></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> Worker <span class="hljs-title">createWorker</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NewThreadWorker(threadFactory);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看到了ThreadFactory，RxThreadFactory，而RxThreadFactory实现了ThreadFactory接口，所以最后还是线程的使用，只是RxJava对这些基础的东西做了深度的封装和流程上的优化，让我们更方便的使用。<br>回溯到上面的scheduleDirect方法，</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> Disposable <span class="hljs-title">scheduleDirect</span><span class="hljs-params">(@NonNull Runnable run)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> scheduleDirect(run, <span class="hljs-number">0L</span>, TimeUnit.NANOSECONDS);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> Disposable <span class="hljs-title">scheduleDirect</span><span class="hljs-params">(@NonNull Runnable run, <span class="hljs-keyword">long</span> delay, @NonNull TimeUnit unit)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">//创建工作线程，以NewThreadScheduler为例，是创建NewThreadWorker</span></span><br><span class="line">    <span class="hljs-keyword">final</span> Worker w = createWorker();</span><br><span class="line">    <span class="hljs-comment">//</span></span><br><span class="line">    <span class="hljs-keyword">final</span> Runnable decoratedRun = RxJavaPlugins.onSchedule(run);</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">//封装出一个带Dispose的Task，方便控制</span></span><br><span class="line">    DisposeTask task = <span class="hljs-keyword">new</span> DisposeTask(decoratedRun, w);</span><br><span class="line">    <span class="hljs-comment">//以NewThreadScheduler为例，这里执行的是NewThreadWorker中的schedule方法</span></span><br><span class="line">    w.schedule(task, delay, unit);</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">return</span> task;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> Disposable <span class="hljs-title">schedule</span><span class="hljs-params">(@NonNull <span class="hljs-keyword">final</span> Runnable action, <span class="hljs-keyword">long</span> delayTime, @NonNull TimeUnit unit)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (disposed) &#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> EmptyDisposable.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">return</span> scheduleActual(action, delayTime, unit, <span class="hljs-keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>忽略disposed的影响，最后执行到scheduleActual</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> ScheduledRunnable <span class="hljs-title">scheduleActual</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Runnable run, <span class="hljs-keyword">long</span> delayTime, @NonNull TimeUnit unit, @Nullable DisposableContainer parent)</span> </span>&#123;</span><br><span class="line">     Runnable decoratedRun = RxJavaPlugins.onSchedule(run);</span><br><span class="line"></span><br><span class="line">     ScheduledRunnable sr = <span class="hljs-keyword">new</span> ScheduledRunnable(decoratedRun, parent);</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (parent != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (!parent.add(sr)) &#123;</span><br><span class="line">             <span class="hljs-keyword">return</span> sr;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     Future&lt;?&gt; f;</span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         <span class="hljs-comment">//直接提交或者进入队列</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (delayTime &lt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="line">             f = executor.submit((Callable&lt;Object&gt;)sr);</span><br><span class="line">         &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">             f = executor.schedule((Callable&lt;Object&gt;)sr, delayTime, unit);</span><br><span class="line">         &#125;</span><br><span class="line">         sr.setFuture(f);</span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (RejectedExecutionException ex) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (parent != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             parent.remove(sr);</span><br><span class="line">         &#125;</span><br><span class="line">         RxJavaPlugins.onError(ex);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">return</span> sr;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>可以看到熟悉的ScheduledExecutorService和Future。<br>所以，综上所述，其内部也是新创建一个线程，结合Runnable。</p>
<h3 id="observeOn"><a href="#observeOn" class="headerlink" title="observeOn"></a>observeOn</h3><p>原理我觉得和subscribeOn没有太大的差别。不做赘述。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-06T03:13:08.000Z">2018-01-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1039 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/06/RxJava2小白手册（1）- 基础使用/">RxJava2-基础使用</a>
            
        </h1>
        <div class="content">
            <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p> RxJava，响应式编程，告别AsyncTask，与Retrofit组成了日常开发经典组合。之前，好读书不求甚解得态度，让我对其印象并不深刻，知识层面比较浅薄。为了加深印象，重新学习。</p>
<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight groovy hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="hljs-string">'io.reactivex.rxjava2:rxandroid:2.0.1'</span></span><br><span class="line">implementation <span class="hljs-string">'io.reactivex.rxjava2:rxjava:2.1.7'</span></span><br></pre></td></tr></table></figure>

<h2 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h2><h3 id="上游和下游（被观察者和观察者）"><a href="#上游和下游（被观察者和观察者）" class="headerlink" title="上游和下游（被观察者和观察者）"></a>上游和下游（被观察者和观察者）</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        e.onNext(<span class="hljs-number">111</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">222</span>);</span><br><span class="line">        e.onComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observer&lt;Integer&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onSubscribe"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(Integer integer)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onNext integer = "</span> + integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onError e = "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onComplete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>

<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://img-blog.csdn.net/20180105222144717" alt="这里写图片描述"></p>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><ol>
<li>创建Observable</li>
<li>创建Observer</li>
<li>Observerable订阅（subscribe）Observer</li>
</ol>
<h3 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h3><p>Observable是一个抽象类，实现ObservableSource接口</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observable</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">ObservableSource</span>&lt;<span class="hljs-title">T</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>而ObservableSource接口中只有一个订阅方法</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ObservableSource</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Subscribes the given Observer to this ObservableSource instance.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> observer the Observer, not null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> NullPointerException if &#123;<span class="hljs-doctag">@code</span> observer&#125; is null</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(@NonNull Observer&lt;? <span class="hljs-keyword">super</span> T&gt; observer)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过create方法创建Observable，稍微追下源码，帮助理解</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Observable&lt;T&gt; <span class="hljs-title">create</span><span class="hljs-params">(ObservableOnSubscribe&lt;T&gt; source)</span> </span>&#123;</span><br><span class="line">    ObjectHelper.requireNonNull(source, <span class="hljs-string">"source is null"</span>);</span><br><span class="line">    <span class="hljs-keyword">return</span> RxJavaPlugins.onAssembly(<span class="hljs-keyword">new</span> ObservableCreate&lt;T&gt;(source));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参数类型为ObservableOnSubscribe接口</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ObservableOnSubscribe</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Called for each Observer that subscribes.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e the safe emitter instance, never null</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception on error</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(@NonNull ObservableEmitter&lt;T&gt; e)</span> <span class="hljs-keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ObservableEmitter可以理解成发射器，看下它的源码。它继承Emitter。而Emitter中才是我们最基础最常用的功能。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ObservableEmitter</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">Emitter</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setDisposable</span><span class="hljs-params">(@Nullable Disposable d)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setCancellable</span><span class="hljs-params">(@Nullable Cancellable c)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isDisposed</span><span class="hljs-params">()</span></span>;</span><br><span class="line">    <span class="hljs-function">ObservableEmitter&lt;T&gt; <span class="hljs-title">serialize</span><span class="hljs-params">()</span></span>;</span><br><span class="line">    <span class="hljs-meta">@Experimental</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">tryOnError</span><span class="hljs-params">(@NonNull Throwable t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这部分代码，删除了部分注释，可在源码中查阅。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Emitter</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Signal a normal value.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value the value to signal, not null</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(@NonNull T value)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Signal a Throwable exception.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> error the Throwable to signal, not null</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(@NonNull Throwable error)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Signal a completion.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 从上面Emitter的代码可以看出，我们可以发射三种消息：<br> onNext, onComplete, onError。从语义上就很容易看出他们的作用。<br> 针对三个事件，做一些说明：</p>
<ol>
<li>发射器可以发送无限个onNext, Observer也可以接收无限个onNext；</li>
<li>发射器发送一个onComplete后, onComplete之后的事件将会继续发送, 而Observer收到第一个onComplete事件之后将不再继续接收事件；</li>
<li>发射器发送了一个onError后, onError之后的事件将继续发送, 而Observer收到onError事件之后将不再继续接收事件；</li>
<li>发射器可以不发送onComplete或onError；</li>
<li>发射器不能同时发出onComplete和onError；</li>
<li>不允许发出多个onError或者onComplete。</li>
</ol>
<h3 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a>Observer</h3><p>相对于Observable而言，Observer就简单很多，我们只需要针对我们感兴趣的事件作出相应的处理即可。</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Observer</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(@NonNull Disposable d)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(@NonNull T t)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(@NonNull Throwable e)</span></span>;</span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里有一个新内容Disposable，先看代码，“象征一个一次性资源”，从注释上看是这个意思。但是如何理解？</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * Represents a disposable resource.</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Disposable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Dispose the resource, the operation should be idempotent.</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dispose</span><span class="hljs-params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">     * Returns true if this resource has been disposed.</span></span><br><span class="line"><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> true if this resource has been disposed</span></span><br><span class="line"><span class="hljs-comment">     */</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isDisposed</span><span class="hljs-params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Integer&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        e.onNext(<span class="hljs-number">111</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">222</span>);</span><br><span class="line">        e.onNext(<span class="hljs-number">333</span>);</span><br><span class="line">        e.onComplete();</span><br><span class="line">        e.onNext(<span class="hljs-number">444</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observer&lt;Integer&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    Disposable mDisposable;</span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onSubscribe"</span>);</span><br><span class="line">        mDisposable = d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(Integer integer)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onNext integer = "</span> + integer);</span><br><span class="line">        <span class="hljs-keyword">if</span>(integer== <span class="hljs-number">222</span> &amp;&amp; !mDisposable.isDisposed()) &#123;</span><br><span class="line">            mDisposable.dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onError e = "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">        Logger(<span class="hljs-string">"onComplete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img src="https://img-blog.csdn.net/20180105225934723" alt="这里写图片描述"></p>
<p>可以看到发射器发送了222之后，剩下的事件Observer并没有处理，那么剩下的事件发射器有没有发送呢？在发射器发射事件之前添加log。</p>
<p><img src="https://img-blog.csdn.net/20180105230231952" alt="这里写图片描述"></p>
<p>可以看到发射器的事件并没有受到Disposable影响，只是Observer没有接收到222之后的事件而已。</p>
<p>Disposable的作用应该是，截断发射器与Observer之间的事件通道。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-10-08T06:59:53.000Z">2017-10-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    30 分钟 读完 (大约 4539 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/10/08/《Android开源库》Picasso/">《Android开源库》Picasso</a>
            
        </h1>
        <div class="content">
            <p> 版权声明：本文为博主原创文章，未经博主允许不得转载。 <a href="https://blog.csdn.net/poorkick/article/details/78175020" target="_blank" rel="noopener">https://blog.csdn.net/poorkick/article/details/78175020</a>   </p>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a><a href></a>1. 前言</h2><p> 最近项目开发中使用到来Picasso，并且碰到了一个部分图片无法加载的问题，使用Glide可以正常加载，使用最新的Picasso3.0.0-SNAPSHOT版本也没有问题，最后使用Picasso自带的异常监听获取堆栈，并且在Github中找到的同样的问题，具体查阅：</p>
<p> <a href="https://github.com/square/picasso/issues/1514" target="_blank" rel="noopener">https://github.com/square/picasso/issues/1514</a></p>
<p> 所以，想详细的看看Picasso的详细用法和master分支上的源代码。</p>
<h2 id="2-基本介绍"><a href="#2-基本介绍" class="headerlink" title="2. 基本介绍"></a><a href></a>2. 基本介绍</h2><p> Picasso 是Square 公司开源的Android 端的图片加载和缓存框架。图片的加载是一个令人很头疼的问题，因为涉及的内容比较多，比如网络请求，本地存储，图片缓存，图片回收等等，处理不好可能会出现图片变形内存泄漏等令开发者焦头烂额的问题，但是Picasso帮我们做了很多事情，比如：</p>
<ul>
<li><p>处理Adapter 中ImageView的回收和取消下载。 </p>
</li>
<li><p>使用最小的内存 来做复杂的图片变换。比如高斯模糊，圆角、圆形等处理。 </p>
</li>
<li><p>自动帮我们缓存图片。内存和磁盘缓存  </p>
<h2 id="3-基本使用"><a href="#3-基本使用" class="headerlink" title="3. 基本使用"></a><a href></a>3. 基本使用</h2><p>以Android Studio为开发环境，以Gradle为构建工具，其他的本文不做介绍。</p>
</li>
</ul>
<h3 id="3-1-添加依赖"><a href="#3-1-添加依赖" class="headerlink" title="3.1 添加依赖"></a><a href></a>3.1 添加依赖</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.squareup.picasso:picasso:2.5.2&apos;</span><br></pre></td></tr></table></figure>


<h3 id="3-2-混淆"><a href="#3-2-混淆" class="headerlink" title="3.2 混淆"></a><a href></a>3.2 混淆</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-dontwarn com.squareup.okhttp.**</span><br></pre></td></tr></table></figure>


<h3 id="3-3-加载图片"><a href="#3-3-加载图片" class="headerlink" title="3.3 加载图片"></a><a href></a>3.3 加载图片</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/* 网络图片 */</span><br><span class="line">Picasso.with(context).load(&quot;http://i.imgur.com/DvpvklR.png&quot;).into(imageView);</span><br><span class="line"></span><br><span class="line">/* 图片资源 */</span><br><span class="line">Picasso.with(context).load(R.drawable.landing_screen).into(imageView1);</span><br><span class="line"></span><br><span class="line">/* 本地图片*/</span><br><span class="line">Picasso.with(context).load(&quot;file:///android_asset/DvpvklR.png&quot;).into(imageView2);</span><br><span class="line"></span><br><span class="line">/* 本地图片文件 */</span><br><span class="line">Picasso.with(context).load(new File(...)).into(imageView3);</span><br></pre></td></tr></table></figure>


<h4 id="3-3-1-Picasso-with-Context-context"><a href="#3-3-1-Picasso-with-Context-context" class="headerlink" title="3.3.1 Picasso.with(Context context)"></a><a href></a>3.3.1 Picasso.with(Context context)</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * The global default &#123;@link Picasso&#125; instance.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * This instance is automatically initialized with defaults that are suitable to most</span><br><span class="line"> * implementations.</span><br><span class="line"> * &lt;ul&gt;</span><br><span class="line"> * &lt;li&gt;LRU memory cache of 15% the available application RAM&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;Disk cache of 2% storage space up to 50MB but no less than 5MB. (Note: this is only</span><br><span class="line"> * available on API 14+ &lt;em&gt;or&lt;/em&gt; if you are using a standalone library that provides a disk</span><br><span class="line"> * cache on all API levels like OkHttp)&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;Three download threads for disk and network access.&lt;/li&gt;</span><br><span class="line"> * &lt;/ul&gt;</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * If these settings do not meet the requirements of your application you can construct your own</span><br><span class="line"> * with full control over the configuration by using &#123;@link Picasso.Builder&#125; to create a</span><br><span class="line"> * &#123;@link Picasso&#125; instance. You can either use this directly or by setting it as the global</span><br><span class="line"> * instance with &#123;@link #setSingletonInstance&#125;.</span><br><span class="line"> */</span><br><span class="line">public static Picasso with(Context context) &#123;</span><br><span class="line">  if (singleton == null) &#123;</span><br><span class="line">    synchronized (Picasso.class) &#123;</span><br><span class="line">      if (singleton == null) &#123;</span><br><span class="line">        singleton = new Builder(context).build();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return singleton;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 构造一个默认的Picasso单例，如果注释中的一些基本配置需求无法满足你，你可以使用Picasso.Builder来构造自己的Picasso实例。</p>
<h4 id="3-3-2-load"><a href="#3-3-2-load" class="headerlink" title="3.3.2 load()"></a><a href></a>3.3.2 load()</h4><p> <img src="https://img-blog.csdn.net/20171008123438173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br> 很显然，四个load方法，不同的入参，相同类型的返回值。针对不同的图片来源，执行不同的加载方式。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * Start an image request using the specified URI.</span><br><span class="line">   * &lt;p&gt;</span><br><span class="line">   * Passing &#123;@code null&#125; as a &#123;@code uri&#125; will not trigger any request but will set a placeholder,</span><br><span class="line">   * if one is specified.</span><br><span class="line">   *</span><br><span class="line">   * @see #load(File)</span><br><span class="line">   * @see #load(String)</span><br><span class="line">   * @see #load(int)</span><br><span class="line">   */</span><br><span class="line">  public RequestCreator load(Uri uri) &#123;</span><br><span class="line">    return new RequestCreator(this, uri, 0);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * Start an image request using the specified path. This is a convenience method for calling</span><br><span class="line">   * &#123;@link #load(Uri)&#125;.</span><br><span class="line">   * &lt;p&gt;</span><br><span class="line">   * This path may be a remote URL, file resource (prefixed with &#123;@code file:&#125;), content resource</span><br><span class="line">   * (prefixed with &#123;@code content:&#125;), or android resource (prefixed with &#123;@code</span><br><span class="line">   * android.resource:&#125;.</span><br><span class="line">   * &lt;p&gt;</span><br><span class="line">   * Passing &#123;@code null&#125; as a &#123;@code path&#125; will not trigger any request but will set a</span><br><span class="line">   * placeholder, if one is specified.</span><br><span class="line">   *</span><br><span class="line">   * @see #load(Uri)</span><br><span class="line">   * @see #load(File)</span><br><span class="line">   * @see #load(int)</span><br><span class="line">   * @throws IllegalArgumentException if &#123;@code path&#125; is empty or blank string.</span><br><span class="line">   */</span><br><span class="line">  public RequestCreator load(String path) &#123;</span><br><span class="line">    if (path == null) &#123;</span><br><span class="line">      return new RequestCreator(this, null, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    if (path.trim().length() == 0) &#123;</span><br><span class="line">      throw new IllegalArgumentException(&quot;Path must not be empty.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return load(Uri.parse(path));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * Start an image request using the specified image file. This is a convenience method for</span><br><span class="line">   * calling &#123;@link #load(Uri)&#125;.</span><br><span class="line">   * &lt;p&gt;</span><br><span class="line">   * Passing &#123;@code null&#125; as a &#123;@code file&#125; will not trigger any request but will set a</span><br><span class="line">   * placeholder, if one is specified.</span><br><span class="line">   * &lt;p&gt;</span><br><span class="line">   * Equivalent to calling &#123;@link #load(Uri) load(Uri.fromFile(file))&#125;.</span><br><span class="line">   *</span><br><span class="line">   * @see #load(Uri)</span><br><span class="line">   * @see #load(String)</span><br><span class="line">   * @see #load(int)</span><br><span class="line">   */</span><br><span class="line">  public RequestCreator load(File file) &#123;</span><br><span class="line">    if (file == null) &#123;</span><br><span class="line">      return new RequestCreator(this, null, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    return load(Uri.fromFile(file));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * Start an image request using the specified drawable resource ID.</span><br><span class="line">   *</span><br><span class="line">   * @see #load(Uri)</span><br><span class="line">   * @see #load(String)</span><br><span class="line">   * @see #load(File)</span><br><span class="line">   */</span><br><span class="line">  public RequestCreator load(int resourceId) &#123;</span><br><span class="line">    if (resourceId == 0) &#123;</span><br><span class="line">      throw new IllegalArgumentException(&quot;Resource ID must not be zero.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return new RequestCreator(this, null, resourceId);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p> 每一个load()方法都是创建一个RequestCreator实例，load(File file)和load(String path)最后都是通过转换成load(Uri uri)的方式实现加载。而RequestCreator的构造方法中三个参数，第一个是Picasso实例，一个是uri，一个是resourceId，通过后两个参数覆盖所有的加载场景。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RequestCreator(Picasso picasso, Uri uri, int resourceId) &#123;</span><br><span class="line">  if (picasso.shutdown) &#123;</span><br><span class="line">    throw new IllegalStateException(</span><br><span class="line">        &quot;Picasso instance already shut down. Cannot submit new requests.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.picasso = picasso;</span><br><span class="line">  this.data = new Request.Builder(uri, resourceId, picasso.defaultBitmapConfig);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="3-3-3-into"><a href="#3-3-3-into" class="headerlink" title="3.3.3 into()"></a><a href></a>3.3.3 into()</h4><p> RequestCreator中很多方法都是我们经常会用到的。先看into()方法<br> <img src="https://img-blog.csdn.net/20171008125754024?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request into the specified &#123;@link Target&#125;. In most cases, you</span><br><span class="line"> * should use this when you are dealing with a custom &#123;@link android.view.View View&#125; or view</span><br><span class="line"> * holder which should implement the &#123;@link Target&#125; interface.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * Implementing on a &#123;@link android.view.View View&#125;:</span><br><span class="line"> * &lt;blockquote&gt;&lt;pre&gt;</span><br><span class="line"> * public class ProfileView extends FrameLayout implements Target &#123;</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onBitmapLoaded(Bitmap bitmap, LoadedFrom from) &#123;</span><br><span class="line"> *     setBackgroundDrawable(new BitmapDrawable(bitmap));</span><br><span class="line"> *   &#125;</span><br><span class="line"> *</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onBitmapFailed() &#123;</span><br><span class="line"> *     setBackgroundResource(R.drawable.profile_error);</span><br><span class="line"> *   &#125;</span><br><span class="line"> *</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onPrepareLoad(Drawable placeHolderDrawable) &#123;</span><br><span class="line"> *     frame.setBackgroundDrawable(placeHolderDrawable);</span><br><span class="line"> *   &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> * &lt;/pre&gt;&lt;/blockquote&gt;</span><br><span class="line"> * Implementing on a view holder object for use inside of an adapter:</span><br><span class="line"> * &lt;blockquote&gt;&lt;pre&gt;</span><br><span class="line"> * public class ViewHolder implements Target &#123;</span><br><span class="line"> *   public FrameLayout frame;</span><br><span class="line"> *   public TextView name;</span><br><span class="line"> *</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onBitmapLoaded(Bitmap bitmap, LoadedFrom from) &#123;</span><br><span class="line"> *     frame.setBackgroundDrawable(new BitmapDrawable(bitmap));</span><br><span class="line"> *   &#125;</span><br><span class="line"> *</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onBitmapFailed() &#123;</span><br><span class="line"> *     frame.setBackgroundResource(R.drawable.profile_error);</span><br><span class="line"> *   &#125;</span><br><span class="line"> *</span><br><span class="line"> *   &#123;@literal @&#125;Override public void onPrepareLoad(Drawable placeHolderDrawable) &#123;</span><br><span class="line"> *     frame.setBackgroundDrawable(placeHolderDrawable);</span><br><span class="line"> *   &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> * &lt;/pre&gt;&lt;/blockquote&gt;</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * &lt;em&gt;Note:&lt;/em&gt; This method keeps a weak reference to the &#123;@link Target&#125; instance and will be</span><br><span class="line"> * garbage collected if you do not keep a strong reference to it. To receive callbacks when an</span><br><span class="line"> * image is loaded use &#123;@link #into(android.widget.ImageView, Callback)&#125;.</span><br><span class="line"> */</span><br><span class="line">public void into(Target target) &#123;</span><br><span class="line">  long started = System.nanoTime();</span><br><span class="line">  checkMain();</span><br><span class="line"></span><br><span class="line">  if (target == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Target must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (deferred) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Fit cannot be used with a Target.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (!data.hasImage()) &#123;</span><br><span class="line">    picasso.cancelRequest(target);</span><br><span class="line">    target.onPrepareLoad(setPlaceholder ? getPlaceholderDrawable() : null);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Request request = createRequest(started);</span><br><span class="line">  String requestKey = createKey(request);</span><br><span class="line"></span><br><span class="line">  if (shouldReadFromMemoryCache(memoryPolicy)) &#123;</span><br><span class="line">    Bitmap bitmap = picasso.quickMemoryCacheCheck(requestKey);</span><br><span class="line">    if (bitmap != null) &#123;</span><br><span class="line">      picasso.cancelRequest(target);</span><br><span class="line">      target.onBitmapLoaded(bitmap, MEMORY);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  target.onPrepareLoad(setPlaceholder ? getPlaceholderDrawable() : null);</span><br><span class="line"></span><br><span class="line">  Action action =</span><br><span class="line">      new TargetAction(picasso, target, request, memoryPolicy, networkPolicy, errorDrawable,</span><br><span class="line">          requestKey, tag, errorResId);</span><br><span class="line">  picasso.enqueueAndSubmit(action);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request into the specified &#123;@link RemoteViews&#125; object with the</span><br><span class="line"> * given &#123;@code viewId&#125;. This is used for loading bitmaps into a &#123;@link Notification&#125;.</span><br><span class="line"> */</span><br><span class="line">public void into(RemoteViews remoteViews, int viewId, int notificationId,</span><br><span class="line">    Notification notification) &#123;</span><br><span class="line">  long started = System.nanoTime();</span><br><span class="line"></span><br><span class="line">  if (remoteViews == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;RemoteViews must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (notification == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Notification must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (deferred) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Fit cannot be used with RemoteViews.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (placeholderDrawable != null || placeholderResId != 0 || errorDrawable != null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(</span><br><span class="line">        &quot;Cannot use placeholder or error drawables with remote views.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Request request = createRequest(started);</span><br><span class="line">  String key = createKey(request, new StringBuilder()); // Non-main thread needs own builder.</span><br><span class="line"></span><br><span class="line">  RemoteViewsAction action =</span><br><span class="line">      new NotificationAction(picasso, request, remoteViews, viewId, notificationId, notification,</span><br><span class="line">          memoryPolicy, networkPolicy, key, tag, errorResId);</span><br><span class="line"></span><br><span class="line">  performRemoteViewInto(action);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request into the specified &#123;@link RemoteViews&#125; object with the</span><br><span class="line"> * given &#123;@code viewId&#125;. This is used for loading bitmaps into all instances of a widget.</span><br><span class="line"> */</span><br><span class="line">public void into(RemoteViews remoteViews, int viewId, int[] appWidgetIds) &#123;</span><br><span class="line">  long started = System.nanoTime();</span><br><span class="line"></span><br><span class="line">  if (remoteViews == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;remoteViews must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (appWidgetIds == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;appWidgetIds must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (deferred) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Fit cannot be used with remote views.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (placeholderDrawable != null || placeholderResId != 0 || errorDrawable != null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(</span><br><span class="line">        &quot;Cannot use placeholder or error drawables with remote views.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Request request = createRequest(started);</span><br><span class="line">  String key = createKey(request, new StringBuilder()); // Non-main thread needs own builder.</span><br><span class="line"></span><br><span class="line">  RemoteViewsAction action =</span><br><span class="line">      new AppWidgetAction(picasso, request, remoteViews, viewId, appWidgetIds, memoryPolicy,</span><br><span class="line">          networkPolicy, key, tag, errorResId);</span><br><span class="line"></span><br><span class="line">  performRemoteViewInto(action);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request into the specified &#123;@link ImageView&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * &lt;em&gt;Note:&lt;/em&gt; This method keeps a weak reference to the &#123;@link ImageView&#125; instance and will</span><br><span class="line"> * automatically support object recycling.</span><br><span class="line"> */</span><br><span class="line">public void into(ImageView target) &#123;</span><br><span class="line">  into(target, null);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request into the specified &#123;@link ImageView&#125; and invokes the</span><br><span class="line"> * target &#123;@link Callback&#125; if it&apos;s not &#123;@code null&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * &lt;em&gt;Note:&lt;/em&gt; The &#123;@link Callback&#125; param is a strong reference and will prevent your</span><br><span class="line"> * &#123;@link android.app.Activity&#125; or &#123;@link android.app.Fragment&#125; from being garbage collected. If</span><br><span class="line"> * you use this method, it is &lt;b&gt;strongly&lt;/b&gt; recommended you invoke an adjacent</span><br><span class="line"> * &#123;@link Picasso#cancelRequest(android.widget.ImageView)&#125; call to prevent temporary leaking.</span><br><span class="line"> */</span><br><span class="line">public void into(ImageView target, Callback callback) &#123;</span><br><span class="line">  long started = System.nanoTime();</span><br><span class="line">  checkMain();</span><br><span class="line"></span><br><span class="line">  if (target == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Target must not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (!data.hasImage()) &#123;</span><br><span class="line">    picasso.cancelRequest(target);</span><br><span class="line">    if (setPlaceholder) &#123;</span><br><span class="line">      setPlaceholder(target, getPlaceholderDrawable());</span><br><span class="line">    &#125;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (deferred) &#123;</span><br><span class="line">    if (data.hasSize()) &#123;</span><br><span class="line">      throw new IllegalStateException(&quot;Fit cannot be used with resize.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    int width = target.getWidth();</span><br><span class="line">    int height = target.getHeight();</span><br><span class="line">    if (width == 0 || height == 0) &#123;</span><br><span class="line">      if (setPlaceholder) &#123;</span><br><span class="line">        setPlaceholder(target, getPlaceholderDrawable());</span><br><span class="line">      &#125;</span><br><span class="line">      picasso.defer(target, new DeferredRequestCreator(this, target, callback));</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    data.resize(width, height);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Request request = createRequest(started);</span><br><span class="line">  String requestKey = createKey(request);</span><br><span class="line"></span><br><span class="line">  if (shouldReadFromMemoryCache(memoryPolicy)) &#123;</span><br><span class="line">    Bitmap bitmap = picasso.quickMemoryCacheCheck(requestKey);</span><br><span class="line">    if (bitmap != null) &#123;</span><br><span class="line">      picasso.cancelRequest(target);</span><br><span class="line">      setBitmap(target, picasso.context, bitmap, MEMORY, noFade, picasso.indicatorsEnabled);</span><br><span class="line">      if (picasso.loggingEnabled) &#123;</span><br><span class="line">        log(OWNER_MAIN, VERB_COMPLETED, request.plainId(), &quot;from &quot; + MEMORY);</span><br><span class="line">      &#125;</span><br><span class="line">      if (callback != null) &#123;</span><br><span class="line">        callback.onSuccess();</span><br><span class="line">      &#125;</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (setPlaceholder) &#123;</span><br><span class="line">    setPlaceholder(target, getPlaceholderDrawable());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Action action =</span><br><span class="line">      new ImageViewAction(picasso, target, request, memoryPolicy, networkPolicy, errorResId,</span><br><span class="line">          errorDrawable, requestKey, tag, callback, noFade);</span><br><span class="line"></span><br><span class="line">  picasso.enqueueAndSubmit(action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 可以看到5个into()方法，可以看到Picasso常用的是直接往ImageView，但是它的功能远远不止如此，我们可以通过实现Target接口来实现自定义的图片处理，可以用来设背景，可以用来填充布局，可扩展性很强，也支持RemoteView。而我们常用的</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void into(ImageView target) &#123;</span><br><span class="line">  into(target, null);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 转到有Callback的执行方法。我们可以通过使用带有回调的into方法来执行图片加载成功或者失败后的事件处理。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public interface Callback &#123;</span><br><span class="line">  void onSuccess();</span><br><span class="line"></span><br><span class="line">  void onError();</span><br><span class="line"></span><br><span class="line">  public static class EmptyCallback implements Callback &#123;</span><br><span class="line"></span><br><span class="line">    @Override public void onSuccess() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override public void onError() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 看下public void into(ImageView target, Callback callback)这个方法：</p>
<ol>
<li>checkMain() 判断是否为主进程 </li>
<li>非空检查。判断target是否为空，uri 或者 resourceId是否为空； </li>
<li>deferred是否为true。这个和是否调用fit方法有关。由于fit方法是让图片适应ImageView的大小，所以需要ImageView大小明确之后才执行请求，所以需要延迟执行。 </li>
<li>创建Request和requestKey </li>
<li>是否在Cache查找该图片，通过requestKey，这个Key的构建过程和很多内容有关系。 </li>
<li>设置占位图片 </li>
<li>构建Action并提交  以上就是图片加载的主要过程。</li>
</ol>
<h2 id="4-进阶用法-链式使用"><a href="#4-进阶用法-链式使用" class="headerlink" title="4. 进阶用法(链式使用)"></a><a href></a>4. 进阶用法(链式使用)</h2><p> 主要介绍一下Picasso的其他用法</p>
<h3 id="4-1-noPlaceholder"><a href="#4-1-noPlaceholder" class="headerlink" title="4.1 noPlaceholder()"></a><a href></a>4.1 noPlaceholder()</h3><p> 不设置占位图片，不能于placeHolder同时使用</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Explicitly opt-out to having a placeholder set when calling &#123;@code into&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * By default, Picasso will either set a supplied placeholder or clear the target</span><br><span class="line"> * &#123;@link ImageView&#125; in order to ensure behavior in situations where views are recycled. This</span><br><span class="line"> * method will prevent that behavior and retain any already set image.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator noPlaceholder() &#123;</span><br><span class="line">  if (placeholderResId != 0) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Placeholder resource already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (placeholderDrawable != null) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Placeholder image already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  setPlaceholder = false;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-2-placeholder"><a href="#4-2-placeholder" class="headerlink" title="4.2 placeholder()"></a><a href></a>4.2 placeholder()</h3><p> 设置占位图片</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * A placeholder drawable to be used while the image is being loaded. If the requested image is</span><br><span class="line"> * not immediately available in the memory cache then this resource will be set on the target</span><br><span class="line"> * &#123;@link ImageView&#125;.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator placeholder(int placeholderResId) &#123;</span><br><span class="line">  if (!setPlaceholder) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Already explicitly declared as no placeholder.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (placeholderResId == 0) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Placeholder image resource invalid.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (placeholderDrawable != null) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Placeholder image already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.placeholderResId = placeholderResId;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-3-error"><a href="#4-3-error" class="headerlink" title="4.3 error()"></a><a href></a>4.3 error()</h3><p> 设置加载出错时的图片</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/** An error drawable to be used if the request image could not be loaded. */</span><br><span class="line">public RequestCreator error(int errorResId) &#123;</span><br><span class="line">  if (errorResId == 0) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Error image resource invalid.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (errorDrawable != null) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Error image already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.errorResId = errorResId;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** An error drawable to be used if the request image could not be loaded. */</span><br><span class="line">public RequestCreator error(Drawable errorDrawable) &#123;</span><br><span class="line">  if (errorDrawable == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Error image may not be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (errorResId != 0) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Error image already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.errorDrawable = errorDrawable;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-4-tag"><a href="#4-4-tag" class="headerlink" title="4.4 tag()"></a><a href></a>4.4 tag()</h3><p> 设置tag，方便后续pause，cancel，或者resume。这个应该用的比较少，有可能通过tag来cancel一下。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Assign a tag to this request. Tags are an easy way to logically associate</span><br><span class="line"> * related requests that can be managed together e.g. paused, resumed,</span><br><span class="line"> * or canceled.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * You can either use simple &#123;@link String&#125; tags or objects that naturally</span><br><span class="line"> * define the scope of your requests within your app such as a</span><br><span class="line"> * &#123;@link android.content.Context&#125;, an &#123;@link android.app.Activity&#125;, or a</span><br><span class="line"> * &#123;@link android.app.Fragment&#125;.</span><br><span class="line"> *</span><br><span class="line"> * &lt;strong&gt;WARNING:&lt;/strong&gt;: Picasso will keep a reference to the tag for</span><br><span class="line"> * as long as this tag is paused and/or has active requests. Look out for</span><br><span class="line"> * potential leaks.</span><br><span class="line"> *</span><br><span class="line"> * @see Picasso#cancelTag(Object)</span><br><span class="line"> * @see Picasso#pauseTag(Object)</span><br><span class="line"> * @see Picasso#resumeTag(Object)</span><br><span class="line"> */</span><br><span class="line">public RequestCreator tag(Object tag) &#123;</span><br><span class="line">  if (tag == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Tag invalid.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (this.tag != null) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Tag already set.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.tag = tag;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-5-fit-amp-unfit"><a href="#4-5-fit-amp-unfit" class="headerlink" title="4.5 fit() &amp; unfit()"></a><a href></a>4.5 fit() &amp; unfit()</h3><p> 调整图片大小来适配target的边界，这个会导致图片的加载过程在ImageView布局确定之后进行。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Attempt to resize the image to fit exactly into the target &#123;@link ImageView&#125;&apos;s bounds. This</span><br><span class="line"> * will result in delayed execution of the request until the &#123;@link ImageView&#125; has been laid out.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * &lt;em&gt;Note:&lt;/em&gt; This method works only when your target is an &#123;@link ImageView&#125;.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator fit() &#123;</span><br><span class="line">  deferred = true;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** Internal use only. Used by &#123;@link DeferredRequestCreator&#125;. */</span><br><span class="line">RequestCreator unfit() &#123;</span><br><span class="line">  deferred = false;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-6-resizeDimen-amp-resize"><a href="#4-6-resizeDimen-amp-resize" class="headerlink" title="4.6 resizeDimen() &amp; resize()"></a><a href></a>4.6 resizeDimen() &amp; resize()</h3><p> 调整图片大小。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/** Resize the image to the specified dimension size. */</span><br><span class="line">public RequestCreator resizeDimen(int targetWidthResId, int targetHeightResId) &#123;</span><br><span class="line">  Resources resources = picasso.context.getResources();</span><br><span class="line">  int targetWidth = resources.getDimensionPixelSize(targetWidthResId);</span><br><span class="line">  int targetHeight = resources.getDimensionPixelSize(targetHeightResId);</span><br><span class="line">  return resize(targetWidth, targetHeight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** Resize the image to the specified size in pixels. */</span><br><span class="line">public RequestCreator resize(int targetWidth, int targetHeight) &#123;</span><br><span class="line">  data.resize(targetWidth, targetHeight);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-7-centerCrop-amp-centerInside"><a href="#4-7-centerCrop-amp-centerInside" class="headerlink" title="4.7 centerCrop() &amp; centerInside()"></a><a href></a>4.7 centerCrop() &amp; centerInside()</h3><p> centerCrop：充满ImageView居中裁剪<br> centerInside： 完整显示图片但是可能无法充满ImageView</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Crops an image inside of the bounds specified by &#123;@link #resize(int, int)&#125; rather than</span><br><span class="line"> * distorting the aspect ratio. This cropping technique scales the image so that it fills the</span><br><span class="line"> * requested bounds and then crops the extra.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator centerCrop() &#123;</span><br><span class="line">  data.centerCrop();</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Centers an image inside of the bounds specified by &#123;@link #resize(int, int)&#125;. This scales</span><br><span class="line"> * the image so that both dimensions are equal to or less than the requested bounds.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator centerInside() &#123;</span><br><span class="line">  data.centerInside();</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-8-onlyScaleDown"><a href="#4-8-onlyScaleDown" class="headerlink" title="4.8 onlyScaleDown()"></a><a href></a>4.8 onlyScaleDown()</h3><p> 当调用了resize 方法重新设置图片尺寸的时候，调用onlyScaleDown 方法，只有当原始图片的尺寸大于我们指定的尺寸时，resize才起作用。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Only resize an image if the original image size is bigger than the target size</span><br><span class="line"> * specified by &#123;@link #resize(int, int)&#125;.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator onlyScaleDown() &#123;</span><br><span class="line">  data.onlyScaleDown();</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-9-rotate"><a href="#4-9-rotate" class="headerlink" title="4.9 rotate()"></a><a href></a>4.9 rotate()</h3><p> 旋转图片角度，可指定旋转中心点</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/** Rotate the image by the specified degrees. */</span><br><span class="line">public RequestCreator rotate(float degrees) &#123;</span><br><span class="line">  data.rotate(degrees);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/** Rotate the image by the specified degrees around a pivot point. */</span><br><span class="line">public RequestCreator rotate(float degrees, float pivotX, float pivotY) &#123;</span><br><span class="line">  data.rotate(degrees, pivotX, pivotY);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-10-config"><a href="#4-10-config" class="headerlink" title="4.10 config()"></a><a href></a>4.10 config()</h3><p> 设置图片Bitmap格式，如<br> ALPHA_8，ARGB_4444，ARGB_8888，HARDWARE，RGBA_F16，RGB_565等等。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Attempt to decode the image using the specified config.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * Note: This value may be ignored by &#123;@link BitmapFactory&#125;. See</span><br><span class="line"> * &#123;@link BitmapFactory.Options#inPreferredConfig its documentation&#125; for more details.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator config(Bitmap.Config config) &#123;</span><br><span class="line">  data.config(config);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-11-stableKey"><a href="#4-11-stableKey" class="headerlink" title="4.11 stableKey()"></a><a href></a>4.11 stableKey()</h3><p> 设置固定Key</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Sets the stable key for this request to be used instead of the URI or resource ID when</span><br><span class="line"> * caching. Two requests with the same value are considered to be for the same resource.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator stableKey(String stableKey) &#123;</span><br><span class="line">  data.stableKey(stableKey);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-12-priority"><a href="#4-12-priority" class="headerlink" title="4.12 priority()"></a><a href></a>4.12 priority()</h3><p> 设置优先级，这个对图片请求的执行顺序有影响，默认的优先级均为NORMAL</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Set the priority of this request.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * This will affect the order in which the requests execute but does not guarantee it.</span><br><span class="line"> * By default, all requests have &#123;@link Priority#NORMAL&#125; priority, except for</span><br><span class="line"> * &#123;@link #fetch()&#125; requests, which have &#123;@link Priority#LOW&#125; priority by default.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator priority(Priority priority) &#123;</span><br><span class="line">  data.priority(priority);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-13-transform"><a href="#4-13-transform" class="headerlink" title="4.13 transform()"></a><a href></a>4.13 transform()</h3><p> 添加自定义Transformation，方便执行图形转换。<br> 更多transformation请移步<a href="https://github.com/wasabeef/picasso-transformations" target="_blank" rel="noopener">picasso-transformations</a></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Add a custom transformation to be applied to the image.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * Custom transformations will always be run after the built-in transformations.</span><br><span class="line"> */</span><br><span class="line">// TODO show example of calling resize after a transform in the javadoc</span><br><span class="line">public RequestCreator transform(Transformation transformation) &#123;</span><br><span class="line">  data.transform(transformation);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * Add a list of custom transformations to be applied to the image.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * Custom transformations will always be run after the built-in transformations.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator transform(List&lt;? extends Transformation&gt; transformations) &#123;</span><br><span class="line">  data.transform(transformations);</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-14-memoryPolicy"><a href="#4-14-memoryPolicy" class="headerlink" title="4.14 memoryPolicy()"></a><a href></a>4.14 memoryPolicy()</h3><p> 指定memoryPolicy。NO_CACHE，NO_STORE<br> NO_CACHE：表示处理请求的时候跳过检查内存缓存<br> NO_STORE: 表示请求成功之后，结果不存到内存。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Specifies the &#123;@link MemoryPolicy&#125; to use for this request. You may specify additional policy</span><br><span class="line"> * options using the varargs parameter.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator memoryPolicy(MemoryPolicy policy, MemoryPolicy... additional) &#123;</span><br><span class="line">  if (policy == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Memory policy cannot be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.memoryPolicy |= policy.index;</span><br><span class="line">  if (additional == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Memory policy cannot be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (additional.length &gt; 0) &#123;</span><br><span class="line">    for (MemoryPolicy memoryPolicy : additional) &#123;</span><br><span class="line">      if (memoryPolicy == null) &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;Memory policy cannot be null.&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      this.memoryPolicy |= memoryPolicy.index;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-15-networkPolicy"><a href="#4-15-networkPolicy" class="headerlink" title="4.15 networkPolicy()"></a><a href></a>4.15 networkPolicy()</h3><p> 指定NetworkPolicy。NO_CACHE，NO_STORE，OFFLINE<br> NO_CACHE: 表示处理请求的时候跳过处理磁盘缓存<br> NO_STORE: 表示请求成功后，结果不缓存到Disk。<br> OFFLINE: 强制这次请求从缓存中获取结果，不会发起网络请求，不管缓存中能否获取到结果。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Specifies the &#123;@link NetworkPolicy&#125; to use for this request. You may specify additional policy</span><br><span class="line"> * options using the varargs parameter.</span><br><span class="line"> */</span><br><span class="line">public RequestCreator networkPolicy(NetworkPolicy policy, NetworkPolicy... additional) &#123;</span><br><span class="line">  if (policy == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Network policy cannot be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  this.networkPolicy |= policy.index;</span><br><span class="line">  if (additional == null) &#123;</span><br><span class="line">    throw new IllegalArgumentException(&quot;Network policy cannot be null.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (additional.length &gt; 0) &#123;</span><br><span class="line">    for (NetworkPolicy networkPolicy : additional) &#123;</span><br><span class="line">      if (networkPolicy == null) &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;Network policy cannot be null.&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">      this.networkPolicy |= networkPolicy.index;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-16-noFade"><a href="#4-16-noFade" class="headerlink" title="4.16 noFade()"></a><a href></a>4.16 noFade()</h3><p> 去掉默认的图片加载过程中的渐入效果</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/** Disable brief fade in of images loaded from the disk cache or network. */</span><br><span class="line">public RequestCreator noFade() &#123;</span><br><span class="line">  noFade = true;</span><br><span class="line">  return this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="5-其他用法"><a href="#5-其他用法" class="headerlink" title="5. 其他用法"></a><a href></a>5. 其他用法</h2><p> <img src="https://img-blog.csdn.net/20171008163018068?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="5-1-get"><a href="#5-1-get" class="headerlink" title="5.1 get()"></a><a href></a>5.1 get()</h3><p> 同步方法，获取Bitmap。所以不要在主线程执行此操作<br> 用法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">   Bitmap bitmap =  Picasso.with(this).load(URL).get();</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 源码实现：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * Synchronously fulfill this request. Must not be called from the main thread.</span><br><span class="line">  * &lt;p&gt;</span><br><span class="line">  * &lt;em&gt;Note&lt;/em&gt;: The result of this operation is not cached in memory because the underlying</span><br><span class="line">  * &#123;@link Cache&#125; implementation is not guaranteed to be thread-safe.</span><br><span class="line">  */</span><br><span class="line"> public Bitmap get() throws IOException &#123;</span><br><span class="line">   long started = System.nanoTime();</span><br><span class="line">   checkNotMain();</span><br><span class="line"></span><br><span class="line">   if (deferred) &#123;</span><br><span class="line">     throw new IllegalStateException(&quot;Fit cannot be used with get.&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">   if (!data.hasImage()) &#123;</span><br><span class="line">     return null;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Request finalData = createRequest(started);</span><br><span class="line">   String key = createKey(finalData, new StringBuilder());</span><br><span class="line"></span><br><span class="line">   Action action = new GetAction(picasso, finalData, memoryPolicy, networkPolicy, tag, key);</span><br><span class="line">   return forRequest(picasso, picasso.dispatcher, picasso.cache, picasso.stats, action).hunt();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<h3 id="5-2-fetch"><a href="#5-2-fetch" class="headerlink" title="5.2 fetch()"></a><a href></a>5.2 fetch()</h3><p> 毫无结果的获取图片，也没有目标，也没有返回bitmap，难道只是为了暖场？考虑到Picasso有缓存机制，这个方法还是有一点价值的，提前加载放到缓存，后面加载速度会更快。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Asynchronously fulfills the request without a &#123;@link ImageView&#125; or &#123;@link Target&#125;,</span><br><span class="line"> * and invokes the target &#123;@link Callback&#125; with the result. This is useful when you want to warm</span><br><span class="line"> * up the cache with an image.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * &lt;em&gt;Note:&lt;/em&gt; The &#123;@link Callback&#125; param is a strong reference and will prevent your</span><br><span class="line"> * &#123;@link android.app.Activity&#125; or &#123;@link android.app.Fragment&#125; from being garbage collected</span><br><span class="line"> * until the request is completed.</span><br><span class="line"> */</span><br><span class="line">public void fetch(Callback callback) &#123;</span><br><span class="line">  long started = System.nanoTime();</span><br><span class="line"></span><br><span class="line">  if (deferred) &#123;</span><br><span class="line">    throw new IllegalStateException(&quot;Fit cannot be used with fetch.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  if (data.hasImage()) &#123;</span><br><span class="line">    // Fetch requests have lower priority by default.</span><br><span class="line">    if (!data.hasPriority()) &#123;</span><br><span class="line">      data.priority(Priority.LOW);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Request request = createRequest(started);</span><br><span class="line">    String key = createKey(request, new StringBuilder());</span><br><span class="line">    Bitmap bitmap = picasso.quickMemoryCacheCheck(key);</span><br><span class="line"></span><br><span class="line">    if (bitmap != null) &#123;</span><br><span class="line">      if (picasso.loggingEnabled) &#123;</span><br><span class="line">        log(OWNER_MAIN, VERB_COMPLETED, request.plainId(), &quot;from &quot; + MEMORY);</span><br><span class="line">      &#125;</span><br><span class="line">      if (callback != null) &#123;</span><br><span class="line">        callback.onSuccess();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      Action action =</span><br><span class="line">          new FetchAction(picasso, request, memoryPolicy, networkPolicy, tag, key, callback);</span><br><span class="line">      picasso.submit(action);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="6-自定义Picasso"><a href="#6-自定义Picasso" class="headerlink" title="6. 自定义Picasso"></a><a href></a>6. 自定义Picasso</h2><p> 默认使用Picasso.with(context)可以快速的构建Picasso实例，但是Picasso支持扩展自定义Picasso，也就是一些默认的配置，我们可以自己来调控。<br> <img src="https://img-blog.csdn.net/20171008164157411?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p> 可以看到Picasso.Builder方法存在很多可配置的内容，downloader, executor, memoryCache,listener等等都是可以自己设置的，配置完成后调用<br> builder()方法即可返回Picasso实例。<br> 还可以通过如下方法设置全局Picasso实例。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Set the global instance returned from &#123;@link #with&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * This method must be called before any calls to &#123;@link #with&#125; and may only be called once.</span><br><span class="line"> */</span><br><span class="line">public static void setSingletonInstance(Picasso picasso) &#123;</span><br><span class="line">  synchronized (Picasso.class) &#123;</span><br><span class="line">    if (singleton != null) &#123;</span><br><span class="line">      throw new IllegalStateException(&quot;Singleton instance already exists.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    singleton = picasso;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="7-类图"><a href="#7-类图" class="headerlink" title="7. 类图"></a><a href></a>7. 类图</h2><p> 请适当放大后查看。<br> <img src="https://img-blog.csdn.net/20171009162242016?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="8-主要流程图"><a href="#8-主要流程图" class="headerlink" title="8. 主要流程图"></a><a href></a>8. 主要流程图</h2><p> 请适当放大后查看。<br> <img src="https://img-blog.csdn.net/20171009162305890?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcG9vcmtpY2s=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-25T02:10:31.000Z">2017-06-25</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1083 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/25/《Android开源库》 MPAndroidChart Wiki(译文)～Part 6/">《Android开源库》 MPAndroidChart Wiki(译文)～Part 6</a>
            
        </h1>
        <div class="content">
            <h2 id="22-ViewPortHandler"><a href="#22-ViewPortHandler" class="headerlink" title="22. ViewPortHandler"></a><a href></a>22. ViewPortHandler</h2><p> ViewPortHandler负责处理图表的视窗。也就是说它负责图表视图中的展示给用户的那部分内容。包括图表位移，缩放级别，图表大小和绘制区域以及当前偏移量。ViewPortHandler允许我们访问以上提到的所有书属性并修改它。</p>
<p> 和通过Chart类修改视窗不一样的是，通过ViewPortHandler直接修改可见取悦并不是完全安全的。即使你对API比较熟悉你也需要很小心的使用它。不恰当的使用可能会导致意想不到的结果。然而，ViewPortHandler提供了很多高阶的方法来修改视窗。</p>
<h3 id="22-1-获取实例"><a href="#22-1-获取实例" class="headerlink" title="22.1 获取实例"></a><a href></a>22.1 获取实例</h3><p> 可以通过如下方式获取实例：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ViewPortHandler handler = chart.getViewPortHandler();</span><br></pre></td></tr></table></figure>


<h3 id="22-2-缩放-amp-位移"><a href="#22-2-缩放-amp-位移" class="headerlink" title="22.2 缩放&amp;位移"></a><a href></a>22.2 缩放&amp;位移</h3><pre><code>方法          | 使用        
----------- | ---------- 
getScaleX() | 返回X轴上的缩放级别
getScaleY() | 返回Y轴上的缩放级别
getTransX() | 返回X轴方向上的位移
getTransY() | 返回Y轴方向上的位移</code></pre><hr>
<h3 id="22-3-图表尺寸-amp-内容"><a href="#22-3-图表尺寸-amp-内容" class="headerlink" title="22.3 图表尺寸&amp;内容"></a><a href></a>22.3 图表尺寸&amp;内容</h3><pre><code>方法               | 使用                  
---------------- | -------------------- 
getChartWidth()  | 返回图表的宽度             
getChartHeight() | 返回图表的高度             
getContentRect() | 返回一个RectF对象表示当前的内容区域</code></pre><p>更多方法请查阅<a href="https://github.com/PhilJay/MPAndroidChart/wiki#javadoc" target="_blank" rel="noopener">JavaDoc</a>或者学习API</p>
<hr>
<h2 id="23-FillFormatter"><a href="#23-FillFormatter" class="headerlink" title="23. FillFormatter"></a><a href></a>23. FillFormatter</h2><p> FillFormatter接口允许自定义LineDataSet的填充行应该在哪里结束。 所有需要做的都是创建一个新类并实现FillFormatter接口。 使用：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public float getFillLinePosition(LineDataSet dataSet, LineDataProvider provider)</span><br></pre></td></tr></table></figure>

<p> 用于实现自定义逻辑的接口的方法，该自定义逻辑计算单个LineDataSet的填充行的结束点。</p>
<p> 创建一个类实现该接口：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class MyCustomFillFormatter implements FillFormatter &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public float getFillLinePosition(LineDataSet dataSet, LineDataProvider dataProvider) &#123;</span><br><span class="line"></span><br><span class="line">        float myDesiredFillPosition = ...;</span><br><span class="line">        // put your logic here...</span><br><span class="line"></span><br><span class="line">        return myDesiredFillPosition;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 然后把自定义的formatter设置到LineDataSet：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineDataSet.setFillFormatter(new MyCustomFillFormatter());</span><br></pre></td></tr></table></figure>

<p> 查看<a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartLib/src/com/github/mikephil/charting/formatter/DefaultFillFormatter.java" target="_blank" rel="noopener">DefaultFillFormatter</a>的实现</p>
<hr>
<h2 id="24-ProGuard"><a href="#24-ProGuard" class="headerlink" title="24. ProGuard"></a><a href></a>24. ProGuard</h2><p> 使用Proguard,需要添加如下配置：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep class com.github.mikephil.charting.** &#123; *; &#125;</span><br></pre></td></tr></table></figure>

<p> 如果使用proguard但是不配置以上规则，动画会失效。<br> Realm.io对应配置：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-dontwarn io.realm.**</span><br></pre></td></tr></table></figure>

<p> <a href="http://developer.android.com/tools/help/proguard.html" target="_blank" rel="noopener">其他ProGuard信息</a></p>
<hr>
<h2 id="25-Realm-io数据库集成"><a href="#25-Realm-io数据库集成" class="headerlink" title="25. Realm.io数据库集成"></a><a href></a>25. Realm.io数据库集成</h2><p> 请移步官方<a href="https://github.com/PhilJay/MPAndroidChart-Realm" target="_blank" rel="noopener">MPAndroidChart-Realm</a>来了解如何从Realm.io数据库中提取数据填充MPAndroidChart。</p>
<p> 具体操作指南请查阅<a href="https://github.com/PhilJay/MPAndroidChart-Realm/wiki/Realm.io-database-integration" target="_blank" rel="noopener">此处</a></p>
<hr>
<h2 id="26-自定义DataSets"><a href="#26-自定义DataSets" class="headerlink" title="26. 自定义DataSets"></a><a href></a>26. 自定义DataSets</h2><p> 从<a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">版本v.2.2.0</a>开始，MP AndroidChart允许你创建自定义的DataSets并在图表中使用它们。</p>
<h3 id="26-1-必需操作"><a href="#26-1-必需操作" class="headerlink" title="26.1 必需操作"></a><a href></a>26.1 必需操作</h3><ul>
<li>创建自定义类（如：CustomDataSet） </li>
<li>继承BaseDataSet&lt; ? extends Entry&gt; </li>
<li>根据需求实现对应的IDataSet接口。如IBarDataSet </li>
<li>实现接口对应的方法并返回你期望的结果  </li>
</ul>
<hr>
<h3 id="26-2-示例"><a href="#26-2-示例" class="headerlink" title="26.2 示例"></a><a href></a>26.2 示例</h3><p> 创建一个BarDataSet供BarChart使用：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public class CustomBarDataSet extends BaseDataSet&lt;BarEntry&gt; implements IBarDataSet &#123;</span><br><span class="line">    // implement all by the extended class and interface required methods</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 创建CustomBarDataSet后实现所有接口需要实现的方法，然后它就可以像BarDataSet一样在所有的BarChart中使用了。</p>
<hr>
<h2 id="27-其他方法"><a href="#27-其他方法" class="headerlink" title="27. 其他方法"></a><a href></a>27. 其他方法</h2><h3 id="27-1-图表内容"><a href="#27-1-图表内容" class="headerlink" title="27.1 图表内容"></a><a href></a>27.1 图表内容</h3><pre><code>方法            | 使用                                            
------------- | ---------------------------------------------- 
clear()       | 清空图表中的所有数据（通过设置数据对象为null实现）。调用invalidate()刷新数据
clearValues() | 清空图表中的数据集，X轴上数据不做修改                           
isEmpty()     | 判断图表中数据是否为空                                   </code></pre><hr>
<h3 id="27-2-好用的Getter方法"><a href="#27-2-好用的Getter方法" class="headerlink" title="27.2 好用的Getter方法"></a><a href></a>27.2 好用的Getter方法</h3><pre><code>方法                             | 使用                   
------------------------------ | --------------------- 
getData()                      | 返回图表中的Data对象         
getViewPortHandler()           | 返回ViewPortHandler对象  
getRenderer()                  | 返回负责绘制图表的DataRender对象
getCenter()                    | 返回整个图表的中心点.          
getCenterOffsets()             | 返回图表绘制区域的中心点         
getPercentOfTotal(float value) | 返回提供的值构成图表内总和的百分比.   
getYMin()                      | 返回Y轴最小值              
getYMax()                      | 返回Y轴最大值              
getLowestVisibleXIndex()       | 返回X轴方向上最小可见索引        
getHighestVisibleXIndex()      | 返回X轴方向上最大可见索引        </code></pre><hr>
<h3 id="27-3-更多Chart类方法"><a href="#27-3-更多Chart类方法" class="headerlink" title="27.3 更多Chart类方法"></a><a href></a>27.3 更多Chart类方法</h3><pre><code>方法                                              | 使用                                                  
----------------------------------------------- | ---------------------------------------------------- 
saveToGallery(String title)                     | 将当前图表状态以图片的形式保存到图库。记得添加&quot;WRITE_EXTERNAL_STORAGE&quot;权限.  
saveToPath(String title, String pathOnSD)       | 将当前图表状态以图片的形式保存到指定路径。记得添加&quot;WRITE_EXTERNAL_STORAGE&quot;权限.
getChartBitmap()                                | 将当前图表状态以Bitmap的形式返回.                                
setHardwareAccelerationEnabled(boolean enabled) | 启用／禁用图表绘制硬件加速, 仅针对API级别11+的设备.                      </code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-22T05:46:53.000Z">2017-06-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 分钟 读完 (大约 1933 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/22/《Android开源库》 MPAndroidChart Wiki(译文)～Part 5/">《Android开源库》 MPAndroidChart Wiki(译文)～Part 5</a>
            
        </h1>
        <div class="content">
            <h2 id="19-ChartData子类"><a href="#19-ChartData子类" class="headerlink" title="19. ChartData子类"></a><a href></a>19. ChartData子类</h2><p> 这篇wiki主要关注ChartData子类的具体介绍。至于此部分没有提及到的ChartData的子类，代表他们没有特性功能需要介绍。</p>
<h3 id="BarData"><a href="#BarData" class="headerlink" title="BarData"></a><a href></a>BarData</h3><pre><code>方法                           | 使用                                                
---------------------------- | -------------------------------------------------- 
setGroupSpace(float percent) | 按照一个栏的总宽度的百分比设置不同数据集的条形组之间的空间.100%代表一个条形的宽度。默认为80%
isGrouped()                  | 如果此数据对象分组（由多个DataSet组成），则返回true，否则返回false         </code></pre><hr>
<h3 id="ScatterData"><a href="#ScatterData" class="headerlink" title="ScatterData"></a><a href></a>ScatterData</h3><pre><code>方法                     | 使用                                 
---------------------- | ----------------------------------- 
getGreatestShapeSize() | 返回此数据对象包含的所有ScatterDataSets的最大形状大小。</code></pre><hr>
<h3 id="PieData"><a href="#PieData" class="headerlink" title="PieData"></a><a href></a>PieData</h3><pre><code>方法                         | 使用                                         
-------------------------- | ------------------------------------------- 
getDataSet()               | 返回包含的PieDataSet对象。PieData不能包含多个PieDataSet对象
setDataSet(PieDataSet set) | 设置PieDataSet                               </code></pre><hr>
<h3 id="BubbleData"><a href="#BubbleData" class="headerlink" title="BubbleData"></a><a href></a>BubbleData</h3><pre><code>方法                                   | 使用                                                  
------------------------------------ | ---------------------------------------------------- 
setHighlightCircleWidth(float width) | 设置当数据对象包含的所有BubbleDataSet对象处于突出显示状态时的环绕该气泡的圆的宽度。单位dp</code></pre><hr>
<h3 id="CombinedData"><a href="#CombinedData" class="headerlink" title="CombinedData"></a><a href></a>CombinedData</h3><p> 该数据对象被设计为包含所有其他数据对象的实例。使用setData（…）方法提供此对象的数据。这仅用于CombinedChart。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class CombinedData extends ChartData &#123;</span><br><span class="line">    </span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">    public CombinedData(List&lt;String&gt; xVals) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    public CombinedData(String[] xVals) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(LineData data) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(BarData data) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(ScatterData data) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(CandleData data) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="20-DataSet类（通用样式）"><a href="#20-DataSet类（通用样式）" class="headerlink" title="20. DataSet类（通用样式）"></a><a href></a>20. DataSet类（通用样式）</h2><p> DataSet是如LineDataSet,BarDataSet等所有数据集类的基类。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class LineDataSet extends DataSet &#123; ...</span><br></pre></td></tr></table></figure>

<p> DataSet代表一组或者一类在图表中归结在一起的数据条目集合。设计它的目的是为了将图表中的不同组数据进行逻辑分离。（比如线形图中的特定一条线，柱形图中的特定一组柱形）</p>
<p> 以下提到的方法在DataSet类中实现，因此可用于所有子类。</p>
<h3 id="20-1-数据样式"><a href="#20-1-数据样式" class="headerlink" title="20.1 数据样式"></a><a href></a>20.1 数据样式</h3><pre><code>方法                                  | 使用                                                              
----------------------------------- | ---------------------------------------------------------------- 
setValueTextColor(int color)        | 设置 DataSet 数据对象包含的数据的值文本的颜色                                     
setValueTextColors(List colors)     | 设置一个颜色列表用于显示值                                                   
setValueTextSize(float size)        | 设置 DataSet 数据对象包含的数据的值文本的大小（单位是dp）                              
setValueTypeface(Typeface tf)       | 设置 DataSet 数据对象包含的数据的值文本的字体                                     
setValueFormatter(ValueFormatter f) | 为DataSet 数据对象包含的数据设置自定义的 ValueFormatter。更多关于ValueFormatter，请查阅此处
setDrawValues(boolean enabled)      | 启用/禁用 绘制所有 DataSet 数据对象包含的数据的值文本                                </code></pre><p>以上方法同样适用于ChartData对象，只是操作结果针对的是其包含的所有的DataSet。</p>
<hr>
<h3 id="20-2-高亮"><a href="#20-2-高亮" class="headerlink" title="20.2 高亮"></a><a href></a>20.2 高亮</h3><pre><code>方法                                                   | 使用                                        
---------------------------------------------------- | ------------------------------------------ 
setHighlightEnabled(boolean enabled)                 | 设置为true，允许通过点击高亮突出 ChartData 对象和其 DataSets
setDrawVerticalHighlightIndicator(boolean enabled)   | 启用／禁用纵向选中高亮指示线。如果禁用，指示线将不会被绘制             
setDrawHorizontalHighlightIndicator(boolean enabled) | 启用／禁用横向选中高亮指示线。如果禁用，指示线将不会被绘制             </code></pre><hr>
<h3 id="20-3-Getter-Convenience"><a href="#20-3-Getter-Convenience" class="headerlink" title="20.3 Getter/Convenience"></a><a href></a>20.3 Getter/Convenience</h3><pre><code>方法                    | 使用                                              
--------------------- | ------------------------------------------------ 
contains(Entry entry) | 检查此数据对象是否包含指定的Entry 。 注：这个相当影响性能，性能严峻情况下，不要过度使用。</code></pre><hr>
<h2 id="21-DataSet子类（特定样式）"><a href="#21-DataSet子类（特定样式）" class="headerlink" title="21. DataSet子类（特定样式）"></a><a href></a>21. DataSet子类（特定样式）</h2><p> 本章wiki专注于DataSet类的子类。此处未提及的DataSet的所有其他子类代表它们没有特定的增强功能。</p>
<h3 id="21-1-Line-Bar-Scatter-Bubble-amp-CandleDataSet"><a href="#21-1-Line-Bar-Scatter-Bubble-amp-CandleDataSet" class="headerlink" title="21.1 Line-, Bar-, Scatter-, Bubble- &amp; CandleDataSet"></a><a href></a>21.1 Line-, Bar-, Scatter-, Bubble- &amp; CandleDataSet</h3><pre><code>方法                           | 使用                                                                                 
---------------------------- | ----------------------------------------------------------------------------------- 
setHighLightColor(int color) | 设置高亮颜色。不要忘记用getResources().getColor(…) 或者 Color.rgb(…)来解析颜色（或者使用Color.BLACK这种简单的方式）</code></pre><hr>
<h3 id="21-2-Line-Bar-Scatter-Candle-amp-RadarDataSet"><a href="#21-2-Line-Bar-Scatter-Candle-amp-RadarDataSet" class="headerlink" title="21.2 Line-, Bar-, Scatter-, Candle- &amp; RadarDataSet"></a><a href></a>21.2 Line-, Bar-, Scatter-, Candle- &amp; RadarDataSet</h3><pre><code>方法                                          | 使用                                                                                                   
------------------------------------------- | ----------------------------------------------------------------------------------------------------- 
setDrawHighlightIndicators(boolean enabled) | 启用/禁用垂直和水平高亮指示线。调用setDrawVerticalHighlightIndicator（…）和setDrawHorizo​​ntalHighlightIndicator（…）进行单独配置
setHighlightLineWidth(float width)          | 设置高亮线（十字准线）的宽度。单位dp                                                                                  </code></pre><hr>
<h3 id="21-3-Line-amp-RadarDataSet"><a href="#21-3-Line-amp-RadarDataSet" class="headerlink" title="21.3 Line- &amp; RadarDataSet"></a><a href></a>21.3 Line- &amp; RadarDataSet</h3><pre><code>方法                            | 使用                                                                                                                                                  
----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- 
setFillColor(int color)       | 设置用于填充线条表面的颜色                                                                                                                                       
setFillAlpha(int alpha)       | 设置用于填充线条表面（0-255）的Alpha值（透明度），默认值：85,255 =完全不透明，0 =完全透明                                                                                             
setFillDrawable(Drawable d)   | 设置一个可以覆盖填充区域的Drawable。这也允许使用渐变Drawable                                                                                                              
setDrawFilled(boolean filled) | 如果DataSet需要绘制填充（表面，区域），而不单单是一条线，那么将此项设置为true，禁用此功能将提升性能。请注意，此方法使用canvas.clipPath（…）方法绘制填充区域。对于API级别&amp;lt;18（Android 4.3）的设备，应关闭图表的硬件加速。具体查阅此处,默认为false
setLineWidth(float width)     | 设置线条宽度（最小=0.2f,最大10f）;默认1f。注意：细线性能更好，粗线性能更差                                                                                                         </code></pre><hr>
<p> 以下提到的方法仅适用于具体提到的DataSet子类。</p>
<h3 id="21-4-LineDataSet"><a href="#21-4-LineDataSet" class="headerlink" title="21.4 LineDataSet"></a><a href></a>21.4 LineDataSet</h3><pre><code>方法                                                                 | 使用                                                                                           
------------------------------------------------------------------ | --------------------------------------------------------------------------------------------- 
setCircleRadius(float size)                                        | 设置的圆形值指示符的大小（半径），默认大小= 4F                                                                    
setDrawCircles(boolean enabled)                                    | 设置为true启用LineDataSet的圆形指示器。默认为true                                                           
setDrawCubic(boolean enabled)                                      | 如果设置为true，则线条图线将以立方式而不是线性绘制。这对性能有负面影响！默认值：false                                              
setCubicIntensity(float intensity)                                 | 设置立方体线的强度（如果启用）。 Max = 1f =非常立方，Min = 0.05f =低立方效应，默认值：0.2f                                  
setCircleColor(int color)                                          | 设置圆形指示器的颜色                                                                                   
setCircleColors(List colors)                                       | 设置此LineDataSet外圈应具有的颜色。还有需要其他的方法来设置外圈的颜色                                                     
setCircleColorHole(int color)                                      | 设置内圈的颜色                                                                                      
setDrawCircleHole(boolean enabled)                                 | 设置为true.在绘制内圈，否则不绘制内圈                                                                        
enableDashedLine(float lineLength, float spaceLength, float phase) | 启动虚线绘制，具体像&quot;- - - - - -&quot;这样. &quot;lineLength&quot;虚线段长度, &quot;spaceLength&quot;虚线段之间的空隙, &quot;phase&quot;是偏移量，以度数为单位（通常为0）</code></pre><hr>
<h3 id="21-5-BarDataSet"><a href="#21-5-BarDataSet" class="headerlink" title="21.5 BarDataSet"></a><a href></a>21.5 BarDataSet</h3><pre><code>方法                                | 使用                                                                                   
--------------------------------- | ------------------------------------------------------------------------------------- 
setBarSpacePercent(float percent) | 以总条宽的百分比设置条之间的间距                                                                     
setBarShadowColor(int color)      | 设置用于绘制条形阴影的颜色。条形图的阴影部分是一个用来表示最大值的界面。使用getResources().getColor(…) 或者Color.rgb(…)来设置这个值
setHighLightAlpha(int alpha)      | 设置用于绘制高亮指示条的alpha值（透明度）。最小值=0（完全透明），最大值=255（完全不透明）                                   
setStackLabels(String[] labels)   | 设置不同值的条形堆栈的标签，如果有标签的话                                                                </code></pre><hr>
<h3 id="21-6-ScatterDataSet"><a href="#21-6-ScatterDataSet" class="headerlink" title="21.6 ScatterDataSet"></a><a href></a>21.6 ScatterDataSet</h3><pre><code>方法                                  | 使用                             
----------------------------------- | ------------------------------- 
setScatterShapeSize(float size)     | 设置绘制的散点图将具有的密度像素的大小。这仅适用于非自定义形状
setScatterShape(ScatterShape shape) | 设置在值所在的位置绘制的形状                 </code></pre><hr>
<h3 id="21-7-CandleDataSet"><a href="#21-7-CandleDataSet" class="headerlink" title="21.7 CandleDataSet"></a><a href></a>21.7 CandleDataSet</h3><pre><code>方法                                         | 使用                                         
------------------------------------------ | ------------------------------------------- 
setBodySpace(float space)                  | 设置每个蜡烛体左侧和右侧留出的空间，默认为0.1f（10％），最大0.45f，最小0f
setShadowWidth(float width)                | 设置蜡烛线的宽度，单位dp。默认3f                         
setShadowColor(int color)                  | 设置蜡烛线的颜色                                   
setDecreasingColor(int color)              | 设置当打开&amp;gt;关闭时应该用于此DataSet的唯一的颜色             
setIncreasingColor(int color)              | 设置当打开&amp;lt;=关闭时应该用于此DataSet的唯一的颜色            
setDecreasingPaintStyle(Paint.Style style) | 设置当打开&amp;gt;关闭时的Paint风格（填充或者线条）               
setIncreasingPaintStyle(Paint.Style style) | 设置当打开&amp;lt;=关闭时的Paint风格（填充或者线条）              </code></pre><hr>
<h3 id="21-8-BubbleDataSet"><a href="#21-8-BubbleDataSet" class="headerlink" title="21.8 BubbleDataSet"></a><a href></a>21.8 BubbleDataSet</h3><pre><code>方法                                   | 使用                      
------------------------------------ | ------------------------ 
setHighlightCircleWidth(float width) | 设置在突出显示状态下气泡周围的圆的宽度，单位dp</code></pre><hr>
<h3 id="21-9-PieDataSet"><a href="#21-9-PieDataSet" class="headerlink" title="21.9 PieDataSet"></a><a href></a>21.9 PieDataSet</h3><pre><code>方法                             | 使用                                      
------------------------------ | ---------------------------------------- 
setSliceSpace(float degrees)   | 设置饼图切片之间的空隙。默认：0-&amp;gt;没有空隙，最大20，最小0（没有空隙）
setSelectionShift(float shift) | 设置此DataSet的突出显示的饼图切片距离图表中心“偏移”的距离，默认为12f</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-17T13:44:09.000Z">2017-06-17</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    14 分钟 读完 (大约 2031 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/17/《Android开源库》 MPAndroidChart Wiki(译文)～Part 4/">《Android开源库》 MPAndroidChart Wiki(译文)～Part 4</a>
            
        </h1>
        <div class="content">
            <h2 id="16-动画"><a href="#16-动画" class="headerlink" title="16. 动画"></a><a href></a>16. 动画</h2><p> <strong>注意：本章的动画效果只会在API 11（Android3.0.x）及以上的Android版本上生效</strong><br> 在低于上述的Android版本中，动画将不会被执行，并不会导致程序崩溃。</p>
<p> 所有类型的图标都可以用一种看上去比较炫酷的动画效果来进行构建。<br> 三种不同的动画方法来让我们在X轴，Y轴或则两个轴同时显示动画效果。</p>
<pre><code>方法                                      | 使用                             
--------------------------------------- | ------------------------------- 
animateX(int durationMillis)            | X水平轴的图表值动画，这意味着在指定的时间内从左到右 建立图表
animateY(int durationMillis)            | 垂直轴的图表值动画，这意味着在指定的时间内从下到上 建立图表。
animateXY(int xDuration, int yDuration) | 两个轴的图表值动画，从左到右，从下到上 建立图表。      </code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mChart.animateX(3000); // animate horizontal 3000 milliseconds</span><br><span class="line">// or:</span><br><span class="line">mChart.animateY(3000); // animate vertical 3000 milliseconds</span><br><span class="line">// or:</span><br><span class="line">mChart.animateXY(3000, 3000); // animate horizontal and vertical 3000 milliseconds</span><br></pre></td></tr></table></figure>

<p> 任意一种 animate(…) 动画方法被调用后，无需再调用 invalidate() 方法。</p>
<h3 id="16-1-缓动动画"><a href="#16-1-缓动动画" class="headerlink" title="16.1 缓动动画"></a><a href></a>16.1 缓动动画</h3><p> 这个库可以让你对动画应用”缓动函数”。<br> 你可以选择以下预定义的静态 Easing.EasingOption :</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public enum EasingOption &#123;</span><br><span class="line">    Linear,</span><br><span class="line">    EaseInQuad,</span><br><span class="line">    EaseOutQuad,</span><br><span class="line">    EaseInOutQuad,</span><br><span class="line">    EaseInCubic,</span><br><span class="line">    EaseOutCubic,</span><br><span class="line">    EaseInOutCubic,</span><br><span class="line">    EaseInQuart,</span><br><span class="line">    EaseOutQuart,</span><br><span class="line">    EaseInOutQuart,</span><br><span class="line">    EaseInSine,</span><br><span class="line">    EaseOutSine,</span><br><span class="line">    EaseInOutSine,</span><br><span class="line">    EaseInExpo,</span><br><span class="line">    EaseOutExpo,</span><br><span class="line">    EaseInOutExpo,</span><br><span class="line">    EaseInCirc,</span><br><span class="line">    EaseOutCirc,</span><br><span class="line">    EaseInOutCirc,</span><br><span class="line">    EaseInElastic,</span><br><span class="line">    EaseOutElastic,</span><br><span class="line">    EaseInOutElastic,</span><br><span class="line">    EaseInBack,</span><br><span class="line">    EaseOutBack,</span><br><span class="line">    EaseInOutBack,</span><br><span class="line">    EaseInBounce,</span><br><span class="line">    EaseOutBounce,</span><br><span class="line">    EaseInOutBounce,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 基本上，有以下两种方式进行 easing 你的动画。</p>
<ol start="2">
<li><p>预定义的缓动选项：（下面代码可在所有 Android 版本运行）  </p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void animateY(int durationmillis, Easing.EasingOption option);</span><br></pre></td></tr></table></figure>

<p>例如，调用带有预定义缓动选项的动画方法</p>
</li>
</ol>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// animate both axes with easing</span><br><span class="line">mChart.animateY(3000, Easing.EasingOption.EaseOutBack);</span><br></pre></td></tr></table></figure>

<p> 当你想代码运行在 Android 3.0 (API 11) 以下时，要使用 Easing.EasingOption 。  </p>
<ol start="2">
<li>自定义缓动函数（在 Android 3.0 自定义缓动函数会使应用 crash）：</li>
</ol>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void animateY(int durationmillis, EasingFunction function);</span><br></pre></td></tr></table></figure>

<p> 通过创建你自己的easing-function类并且实现EasingFunction接口，你可以实现你自己的easing功能</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Interface for creating custom made easing functions. </span><br><span class="line"> */</span><br><span class="line"> public interface EasingFunction &#123;</span><br><span class="line">    /**</span><br><span class="line">     * Called everytime the animation is updated.</span><br><span class="line">     * @param input - the time passed since the animation started (value between 0 and 1)</span><br><span class="line">     */</span><br><span class="line">     public float getInterpolation(float input);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p> 然后，按照如下方式使用(注意，这个不能在小于Android3.0的版本上使用，将会导致程序崩溃)</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// animate both axes with easing</span><br><span class="line">mChart.animateY(3000, new MyEasingFunction());</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="17-IMarker接口"><a href="#17-IMarker接口" class="headerlink" title="17. IMarker接口"></a><a href></a>17. IMarker接口</h2><p> 自<a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">版本v3.0.0</a>以来，图表中的标记（弹出窗口）由IMarker接口表示。</p>
<h3 id="17-1-IMarker接口"><a href="#17-1-IMarker接口" class="headerlink" title="17.1 IMarker接口"></a><a href></a>17.1 IMarker接口</h3><p> 这个接口可以帮助你实现在图表中条目高亮的时候显示自定义的Marker窗口。这个接口给我们提供了如下需要实现的方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public interface IMarker &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The desired (general) offset you wish the IMarker to have on the x- and y-axis.</span><br><span class="line">     *         By returning x: -(width / 2) you will center the IMarker horizontally.</span><br><span class="line">     *         By returning y: -(height / 2) you will center the IMarker vertically.</span><br><span class="line">     */</span><br><span class="line">    MPPointF getOffset();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The offset for drawing at the specific `point`. This allows conditional adjusting of the Marker position.</span><br><span class="line">     *         If you have no adjustments to make, return getOffset().</span><br><span class="line">     *</span><br><span class="line">     * @param posX This is the X position at which the marker wants to be drawn.</span><br><span class="line">     *             You can adjust the offset conditionally based on this argument.</span><br><span class="line">     * @param posY This is the X position at which the marker wants to be drawn.</span><br><span class="line">     *             You can adjust the offset conditionally based on this argument.</span><br><span class="line">     */</span><br><span class="line">    MPPointF getOffsetForDrawingAtPos(float posX, float posY);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * This method enables a specified custom IMarker to update it&apos;s content every time the IMarker is redrawn.</span><br><span class="line">     *</span><br><span class="line">     * @param e         The Entry the IMarker belongs to. This can also be any subclass of Entry, like BarEntry or</span><br><span class="line">     *                  CandleEntry, simply cast it at runtime.</span><br><span class="line">     * @param highlight The highlight object contains information about the highlighted value such as it&apos;s dataset-index, the</span><br><span class="line">     *                  selected range or stack-index (only stacked bar entries).</span><br><span class="line">     */</span><br><span class="line">    void refreshContent(Entry e, Highlight highlight);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Draws the IMarker on the given position on the screen with the given Canvas object.</span><br><span class="line">     *</span><br><span class="line">     * @param canvas</span><br><span class="line">     * @param posX</span><br><span class="line">     * @param posY</span><br><span class="line">     */</span><br><span class="line">    void draw(Canvas canvas, float posX, float posY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="17-2-创建一个标记视图"><a href="#17-2-创建一个标记视图" class="headerlink" title="17.2 创建一个标记视图"></a><a href></a>17.2 创建一个标记视图</h3><p> 为了创建一个自定义的标记视图，你需要创建一个实现了IMarker接口的类：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class YourMarkerView implements IMarker &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 实现IMarker接口时返回什么样的值，完全取决于你自己的需求。所以，看看上面关于每个方法的介绍是很有必要的。</p>
<p> 除了通过实现IMarker接口来创建自己的标记视图，我们还可以通过继承下面提到的一个类来达到同样的目的。这个方法比较简单，并且我们也不需要实现IMarker接口中的所有方法。只有几个特定的方法需要我们复写和自定义。最重要的是复写refreshContent（…）方法来调整标记视图中的数据。一个简单的示例如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class YourMarkerView extends MarkerView &#123;</span><br><span class="line"></span><br><span class="line">    private TextView tvContent;</span><br><span class="line"></span><br><span class="line">    public MyMarkerView(Context context, int layoutResource) &#123;</span><br><span class="line">        super(context, layoutResource);</span><br><span class="line"></span><br><span class="line">        // find your layout components</span><br><span class="line">        tvContent = (TextView) findViewById(R.id.tvContent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // callbacks everytime the MarkerView is redrawn, can be used to update the</span><br><span class="line">    // content (user-interface)</span><br><span class="line">    @Override</span><br><span class="line">    public void refreshContent(Entry e, Highlight highlight) &#123;</span><br><span class="line"></span><br><span class="line">        tvContent.setText(&quot;&quot; + e.getY());</span><br><span class="line"></span><br><span class="line">        // this will perform necessary layouting</span><br><span class="line">        super.refreshContent(e, highlight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private MPPointF mOffset; </span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public MPPointF getOffset() &#123;</span><br><span class="line"></span><br><span class="line">        if(mOffset == null) &#123;</span><br><span class="line">           // center the marker horizontally and vertically</span><br><span class="line">           mOffset = new MPPointF(-(getWidth() / 2), -getHeight());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return mOffset;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="17-3-获取／设置Marker"><a href="#17-3-获取／设置Marker" class="headerlink" title="17.3 获取／设置Marker"></a><a href></a>17.3 获取／设置Marker</h3><p> 给图表设置一个Marker，使用setMarker(…)方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IMarker marker = new YourMarkerView();</span><br><span class="line">chart.setMarker(marker);</span><br></pre></td></tr></table></figure>

<p> 要访问图表上的一个Marker，使用getMarker()方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IMarker marker = chart.getMarker();</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="17-4-预定义Markers"><a href="#17-4-预定义Markers" class="headerlink" title="17.4 预定义Markers"></a><a href></a>17.4 预定义Markers</h3><p> 除了你自定义的MarkerView，开源库中也给我们提供了几个预定义的markers以供方便快捷的使用。其中包括：</p>
<ul>
<li><a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartLib/src/main/java/com/github/mikephil/charting/components/MarkerView.java" target="_blank" rel="noopener">MarkerView</a> :基本marker。允许提供布局文件作为图表上呈现的标记。继承这个类并且复写refreshContent(…)方法来调整标记视图中的内容。 </li>
<li><a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartLib/src/main/java/com/github/mikephil/charting/components/MarkerImage.java" target="_blank" rel="noopener">MarkerImage</a>:一种绘制图片的标记视图。允许提供一个图片资源作为图表上的标记视图。继承这个类并且复写refreshContent(…)方法来调整标记视图中的内容。  </li>
</ul>
<hr>
<h3 id="17-5-旧版MarkerView"><a href="#17-5-旧版MarkerView" class="headerlink" title="17.5 旧版MarkerView"></a><a href></a>17.5 旧版MarkerView</h3><p> <a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">版本v3.0.0</a> 之前，MarkerView类负责在图表高亮部分绘制标记视图。详情请查阅老版的the old <a href="https://github.com/PhilJay/MPAndroidChart/wiki/MarkerView" target="_blank" rel="noopener">MarkerView wiki page</a>.</p>
<hr>
<h2 id="18-ChartData类"><a href="#18-ChartData类" class="headerlink" title="18. ChartData类"></a><a href></a>18. ChartData类</h2><p> 本章旨在让你更深入的了解MPAndroidChart中的数据模型。</p>
<p> ChartData类是像LineData，BarData等等这些数据类的父类。setData()方法可以将数据设置到图表中。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class LineData extends ChartData &#123; ...&#125;</span><br></pre></td></tr></table></figure>

<p> 下面介绍一些ChartData类中的方法，可以直接在它的子类中使用。</p>
<h3 id="18-1-数据样式"><a href="#18-1-数据样式" class="headerlink" title="18.1 数据样式"></a><a href></a>18.1 数据样式</h3><pre><code>方法                                  | 使用                                                               
----------------------------------- | ----------------------------------------------------------------- 
setValueTextColor(int color)        | 设置 DataSets 数据对象包含的数据的值文本的颜色                                     
setValueTextColors(List colors)     | 设置一个颜色列表用于显示值                                                    
setValueTextSize(float size)        | 设置 DataSets 数据对象包含的数据的值文本的大小（单位是dp）                              
setValueTypeface(Typeface tf)       | 设置 DataSets 数据对象包含的数据的值文本的字体                                     
setValueFormatter(ValueFormatter f) | 为DataSets 数据对象包含的数据设置自定义的 ValueFormatter。更多关于ValueFormatter，请查阅此处
setDrawValues(boolean enabled)      | 启用/禁用 绘制所有 DataSets 数据对象包含的数据的值文本                                </code></pre><hr>
<h3 id="18-2-Getter方法"><a href="#18-2-Getter方法" class="headerlink" title="18.2 Getter方法"></a><a href></a>18.2 Getter方法</h3><pre><code>方法                           | 使用                                              
---------------------------- | ------------------------------------------------ 
getDataSetByIndex(int index) | 返回目标 DataSet 列表中给定索引的数据对象。                      
contains(Entry entry)        | 检查此数据对象是否包含指定的Entry 。 注：这个相当影响性能，性能严峻情况下，不要过度使用。
contains(T dataSet)          | 如果数据中包含指定dataSet,返回true否则返回false                </code></pre><hr>
<h3 id="18-3-清除"><a href="#18-3-清除" class="headerlink" title="18.3 清除"></a><a href></a>18.3 清除</h3><pre><code>方法            | 使用                                                
------------- | -------------------------------------------------- 
clearValues() | 清除所有 DataSet 对象和所有 Entries 的数据 。 不会删除所提供的 x-values</code></pre><hr>
<h3 id="18-4-选中高亮"><a href="#18-4-选中高亮" class="headerlink" title="18.4 选中高亮"></a><a href></a>18.4 选中高亮</h3><pre><code>方法                                                   | 使用                                        
---------------------------------------------------- | ------------------------------------------ 
setHighlightEnabled(boolean enabled)                 | 设置为true，允许通过点击高亮突出 ChartData 对象和其 DataSets
setDrawVerticalHighlightIndicator(boolean enabled)   | 启用／即用纵向选中高亮指示线。如果禁用，指示线将不会被绘制             
setDrawHorizontalHighlightIndicator(boolean enabled) | 用／即用横向选中高亮指示线。如果禁用，指示线将不会被绘制              </code></pre><hr>
<h3 id="18-5-动态数据"><a href="#18-5-动态数据" class="headerlink" title="18.5 动态数据"></a><a href></a>18.5 动态数据</h3><pre><code>方法                  | 使用                        
------------------- | -------------------------- 
notifyDataChanged() | 通知数据对象，底层数据发生变化，候执行所有必需的计算</code></pre><p>想了解如何在数据对象上增加或者移除数据，请查阅<a href="https://github.com/PhilJay/MPAndroidChart/wiki/Dynamic-&amp;-Realtime-Data" target="_blank" rel="noopener">dynamic &amp; realtime data</a>章节</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-16T06:33:34.000Z">2017-06-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 分钟 读完 (大约 2387 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/16/《Android开源库》 MPAndroidChart Wiki(译文)～Part 3/">《Android开源库》 MPAndroidChart Wiki(译文)～Part 3</a>
            
        </h1>
        <div class="content">
            <h2 id="13-图例"><a href="#13-图例" class="headerlink" title="13. 图例"></a><a href></a>13. 图例</h2><p> 默认情况下，所有的图表都支持图例并且会自动生成。给图表设置完数据之后，图例会被绘制出来。图例通常由多个条目组成，每个条目由标签形式/形状表示。<br> 自动生成的图例包含的条目数取决于不同颜色的数量（跨所有DataSet对象）以及DataSet标签。图例的标签取决于为图表中使用的DataSet对象设置的标签。如果没有指定DataSet对象的标签，图表将自动生成。</p>
<p> 为了自定义Legend，我们可以通过如下方式从图表中拿到Legend对象：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Legend legend = chart.getLegend();</span><br></pre></td></tr></table></figure>


<h3 id="13-1-控制Legend是否被绘制"><a href="#13-1-控制Legend是否被绘制" class="headerlink" title="13.1 控制Legend是否被绘制"></a><a href></a>13.1 控制Legend是否被绘制</h3><pre><code>方法                          | 使用                              
--------------------------- | -------------------------------- 
setEnabled(boolean enabled) | 设置图例禁用或者启用。如果设置为false,图例将不会被绘制出来</code></pre><hr>
<h3 id="13-2-样式-修改图例"><a href="#13-2-样式-修改图例" class="headerlink" title="13.2 样式/修改图例"></a><a href></a>13.2 样式/修改图例</h3><pre><code>方法                       | 使用             
------------------------ | --------------- 
setTextColor(int color)  | 设置图例标签的文本颜色    
setTextSize(float size)  | 设置图例标签的字体大小（dp）
setTypeface(Typeface tf) | 设置图例标签的字体      </code></pre><hr>
<h3 id="13-3-换行-避免裁剪"><a href="#13-3-换行-避免裁剪" class="headerlink" title="13.3 换行/避免裁剪"></a><a href></a>13.3 换行/避免裁剪</h3><pre><code>方法                                  | 使用                                                                         
----------------------------------- | --------------------------------------------------------------------------- 
setWordWrapEnabled(boolean enabled) | 如果设置为true,如果图例标签过长，将会另起一行来展示超出图表范围的内容，而不是截断它。请注意，启动后会降低性能并且这个只对处理图表下的图例标签有效
setMaxSizePercent(float maxSize)    | 设置最大图例的百分比（相对整个图表大小）。默认为0.95f (95%)                                        </code></pre><hr>
<h3 id="13-4-自定义图例"><a href="#13-4-自定义图例" class="headerlink" title="13.4 自定义图例"></a><a href></a>13.4 自定义图例</h3><pre><code>方法                                  | 使用                                                                                                                                                                 
----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
setPosition(LegendPosition pos)     | 设置图例的显示位置。可选项：RIGHT_OF_CHART, RIGHT_OF_CHART_CENTER, RIGHT_OF_CHART_INSIDE, BELOW_CHART_LEFT, BELOW_CHART_RIGHT, BELOW_CHART_CENTER or PIECHART_CENTER (只有饼图使用这个)等等
setForm(LegendForm shape)           | 设置LegendForm。这是在带有图例条目表示的DataSet的颜色的图例标签旁边绘制的形状。可选项：SQUARE，CIRCLE、LINE。                                                                                            
setFormSize(float size)             | 设置legend-forms的大小（dp）                                                                                                                                              
setXEntrySpace(float space)         | 设置横轴上的图例项之间的空间                                                                                                                                                     
setYEntrySpace(float space)         | 设置垂直轴上的图例条目之间的空间                                                                                                                                                   
setFormToTextSpace(float space)     | 设置图例标签和相应图例之间的空格                                                                                                                                                   
setWordWrapEnabled(boolean enabled) | 设置 Legend 是否自动换行？ 目前仅支持BelowChartLeft，BelowChartRight，BelowChartCenter.                                                                                            </code></pre><hr>
<h3 id="13-5-设置自定义标签-amp-颜色"><a href="#13-5-设置自定义标签-amp-颜色" class="headerlink" title="13.5 设置自定义标签&amp;颜色"></a><a href></a>13.5 设置自定义标签&amp;颜色</h3><pre><code>方法                                       | 使用                                                                                                                
---------------------------------------- | ------------------------------------------------------------------------------------------------------------------ 
setCustom(int[] colors, String[] labels) | 设置自定义图例标签和颜色数组，颜色数量和标签数量相同且一一对应。这个方法将使默认的图例计算功能失效。调用resetCustom()来重新打开自动计算图例的功能(然后调用notifyDataSetChanged()来执行重新计算)
resetCustom()                            | 调用这个方法之后自定义图例标签功能将会失效。标签将会被自动计算(调用notifyDataSetChanged()之后)                                                       
setExtra(int[] colors, String[] labels)  | 设置颜色数组和标签数据，颜色和标签一一对应，这些标签将会接在自动计算得到的标签之后（如果图例已经被计算出来， 我们需要调用notifyDataSetChanged()来让我们的修改生效）                     </code></pre><hr>
<h3 id="13-6-示例"><a href="#13-6-示例" class="headerlink" title="13.6 示例"></a><a href></a>13.6 示例</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Legend l = chart.getLegend();</span><br><span class="line">   l.setFormSize(10f); // set the size of the legend forms/shapes</span><br><span class="line">   l.setForm(LegendForm.CIRCLE); // set what type of form/shape should be used</span><br><span class="line">   l.setPosition(LegendPosition.BELOW_CHART_LEFT);</span><br><span class="line">   l.setTypeface(...);</span><br><span class="line">   l.setTextSize(12f);</span><br><span class="line">   l.setTextColor(Color.BLACK);</span><br><span class="line">   l.setXEntrySpace(5f); // set the space between the legend entries on the x-axis</span><br><span class="line">   l.setYEntrySpace(5f); // set the space between the legend entries on the y-axis</span><br><span class="line"></span><br><span class="line">   // set custom labels and colors</span><br><span class="line">   l.setCustom(ColorTemplate.VORDIPLOM_COLORS, new String[] &#123; &quot;Set1&quot;, &quot;Set2&quot;, &quot;Set3&quot;, &quot;Set4&quot;, &quot;Set5&quot; &#125;);</span><br><span class="line"></span><br><span class="line">   // and many more...</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="14-动态-amp-实时数据"><a href="#14-动态-amp-实时数据" class="headerlink" title="14. 动态 &amp; 实时数据"></a><a href></a>14. 动态 &amp; 实时数据</h2><p> 从版本<a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">v1.6.3</a>开始支持，持续改进中。</p>
<p> 为了实现动态增删图表中的数据，开源库提供了大量的方法，方便我们实现图表中DataSet 数据条目的增加和删除。</p>
<h3 id="14-1-动态添加-删除数据的可能性"><a href="#14-1-动态添加-删除数据的可能性" class="headerlink" title="14.1 动态添加/删除数据的可能性"></a><a href></a>14.1 动态添加/删除数据的可能性</h3><p> DataSet类（和它的所有子类）：</p>
<pre><code>方法                | 使用                
----------------- | ------------------ 
addEntry(Entry e) | 把指定Entry添加到DataSet</code></pre><p>ChartData类（和它的所有子类）</p>
<pre><code>方法                                  | 使用                       
----------------------------------- | ------------------------- 
addEntry(Entry e, int dataSetIndex) | 把指定Entry添加到DataSet的指定索引位置
addDataSet(DataSet d)               | 把指定DataSet添加到ChartData中  </code></pre><p>除此之外，还存在动态移除数据的方法，具体如下：</p>
<p> DateSet类（和它的所有子类）</p>
<pre><code>方法                                     | 使用                                       
-------------------------------------- | ----------------------------------------- 
public boolean removeFirst()           | 移除第一个Entry(索引为0)。成功返回true,失败返回false      
public boolean removeLast()            | 移除最后一个Entry(索引为size-1)。成功返回true,失败返回false
public boolean removeEntry(Entry e)    | 移除指定Entry。成功返回true                       
public boolean removeEntry(int xIndex) | 移除指定索引的Entry。成功返回true                    </code></pre><p>ChartData类（和它的所有子类）</p>
<pre><code>方法                                                       | 使用                                             
-------------------------------------------------------- | ----------------------------------------------- 
public boolean removeEntry(Entry e, int dataSetIndex)    | 移除指定索引位置DataSet中的给定Entry对象。成功则返回true           
public boolean removeEntry(int xIndex, int dataSetIndex) | 移除指定索引位置DataSet中的给定xIndex索引对应的Entry对象。成功则返回true
public boolean removeDataSet(DataSet d)                  | 从ChartData中移除指定DataSet。成功则返回true               
public boolean removeDataSet(int index)                  | 从ChartData中移除指定索引位置对应的DataSet。成功则返回true        </code></pre><hr>
<h3 id="14-2-注意"><a href="#14-2-注意" class="headerlink" title="14.2 注意"></a><a href></a>14.2 注意</h3><p> 在动态增加或者删除数据之后，记得调用notifyDataSetChanged() ，然后调用invalidate()来执行刷新操作。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// EXAMPLE 1</span><br><span class="line">// add entries to the &quot;data&quot; object</span><br><span class="line">exampleData.addEntry(...);</span><br><span class="line">chart.notifyDataSetChanged(); // let the chart know it&apos;s data changed</span><br><span class="line">chart.invalidate(); // refresh</span><br><span class="line"></span><br><span class="line">// EXAMPLE 2</span><br><span class="line">// add entries to &quot;dataSet&quot; object</span><br><span class="line">dataSet.addEntry(...);</span><br><span class="line">exampleData.notifyDataChanged(); // let the data know a dataSet changed</span><br><span class="line">chart.notifyDataSetChanged(); // let the chart know it&apos;s data changed</span><br><span class="line">chart.invalidate(); // refresh</span><br></pre></td></tr></table></figure>

<p> 注意：像moveViewTo(…)这样的方法，将会自动调用invalidate()。</p>
<hr>
<h3 id="14-3-动态数据示例"><a href="#14-3-动态数据示例" class="headerlink" title="14.3 动态数据示例"></a><a href></a>14.3 动态数据示例</h3><p> 有关如何实现动态数据添加/删除的示例，请参考示例应用程序和其中的如下Activity：</p>
<ul>
<li><a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartExample/src/com/xxmassdeveloper/mpchartexample/DynamicalAddingActivity.java" target="_blank" rel="noopener">DynamicalAddingActivity</a> </li>
<li><a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartExample/src/com/xxmassdeveloper/mpchartexample/RealtimeLineChartActivity.java" target="_blank" rel="noopener">RealtimeDataActivity</a>  </li>
</ul>
<hr>
<h2 id="15-修改视窗"><a href="#15-修改视窗" class="headerlink" title="15. 修改视窗"></a><a href></a>15. 修改视窗</h2><p> 本库提供了各种方法来修改视窗（图表的可见部分）。注意，这些修改视窗的方法仅适用于LineChart, BarChart, ScatterChart和CandleStickChart。<br> 下面提到的方法都是Chart类提供的方法。修改视窗的另一种方法是通过<a href="https://github.com/PhilJay/MPAndroidChart/wiki/The-ViewPortHandler" target="_blank" rel="noopener">ViewPortHandler</a>直接访问它（没有图表提供的中间安全性）。这仅适用于熟悉API的高级用户。</p>
<blockquote>
<p>请注意，只有在设置数据之后才能调用上面这些修改视窗的方法</p>
</blockquote>
<h3 id="15-1-限制可见范围"><a href="#15-1-限制可见范围" class="headerlink" title="15.1 限制可见范围"></a><a href></a>15.1 限制可见范围</h3><pre><code>方法                                                                   | 使用                                                                                                              
-------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- 
setVisibleXRangeMaximum(float maxXRange)                             | 设置在X轴上一次性最大可见范围。如果这个值设置为10，则X轴取值超过10之外的图表在不滚动的情况是无法被看到的                                                         
setVisibleXRangeMinimum(float minXRange)                             | 设置在X轴上一次性能看到的最小范围，如果这个值设置成10，则不管你怎么放大，X轴的取值范围都不会小于10                                                            
setVisibleYRangeMaximum(float maxYRange, AxisDependency axis)        | 设置Y轴上一次性最大可见范围。通过AxisDependency明确对应的Y轴                                                                          
setViewPortOffsets(float left, float top, float right, float bottom) | 设置当前视窗的自定义偏移量（实际图表窗口侧面的偏移量），设置这个值将阻止图表自动计算其偏移量。使用resetViewPortOffsets()方法来恢复自动计算偏移量的功能。注意，如果你不知道这个是干什么的，请先搞清楚再使用
resetViewPortOffsets()                                               | 重置所有setViewPortOffsets(…)设置的偏移量。允许图表自动计算所有偏移量                                                                   
setExtraOffsets(float left, float top, float right, float bottom)    | 在自动计算的偏移量的基础上增加额外的偏移量。这个方法不会改变自动计算的偏移量结果，只是在其基础上追加                                                              </code></pre><hr>
<h3 id="15-2-移动视图"><a href="#15-2-移动视图" class="headerlink" title="15.2 移动视图"></a><a href></a>15.2 移动视图</h3><pre><code>方法                                                            | 使用                                                                                       
------------------------------------------------------------- | ----------------------------------------------------------------------------------------- 
fitScreen()                                                   | 重设所有缩放和拖动，使图表完全适合它的边界（完全缩小）                                                              
moveViewToX(float xValue)                                     | 将当前视窗的左侧（边）到指定的 x 值                                                                      
moveViewToY(float yValue, AxisDependency axis)                | 使得指定的y值显示在对应y轴( 左or右 )的中间                                                                
moveViewTo(float xValue, float yValue, AxisDependency axis)   | 将当前视窗的左侧移动到x轴上的指定x值，并将视窗居中到所提供的y轴上的指定y值，相当于setVisibleXRange(…) 和 setVisibleYRange(…) 组合使用
centerViewTo(float xValue, float yValue, AxisDependency axis) | 将使当前视窗的中心移动到指定的x值和y值相当于 setVisibleXRange(…) 和 setVisibleYRange(…) 组合使用                   </code></pre><hr>
<h3 id="15-3-移动视图动画"><a href="#15-3-移动视图动画" class="headerlink" title="15.3 移动视图动画"></a><a href></a>15.3 移动视图动画</h3><pre><code>方法                                                                                   | 使用                             
------------------------------------------------------------------------------------ | ------------------------------- 
moveViewToAnimated(float xValue, float yValue, AxisDependency axis, long duration)   | 和上面moveViewTo结果一样，只是这个过程有动画效果  
centerViewToAnimated(float xValue, float yValue, AxisDependency axis, long duration) | 和上面centerViewTo结果一样，只是这个过程有动画效果</code></pre><hr>
<h3 id="15-4-缩放"><a href="#15-4-缩放" class="headerlink" title="15.4 缩放"></a><a href></a>15.4 缩放</h3><pre><code>方法                                                                                                                | 使用                                                     
----------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- 
zoomIn()                                                                                                          | 以图表中心为中心点，1.4倍步幅放大                                     
zoomOut()                                                                                                         | 以图表中心为中心点，0.7倍步幅缩小                                     
zoom(float scaleX, float scaleY, float x, float y)                                                                | 根据所给的参数进行放大或缩小。 参数 x 和 y 是变焦中心的坐标（单位：像素）。 记住，1f = 无放缩 。
zoomAndCenterAnimated(float scaleX, float scaleY, float xValue, float yValue, AxisDependency axis, long duration) | 按照给定的缩放因子进行缩放，并将视图中心移动到指定位置（带动画）                       </code></pre><hr>
<h3 id="15-5-完整示例"><a href="#15-5-完整示例" class="headerlink" title="15.5 完整示例"></a><a href></a>15.5 完整示例</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chart.setData(...); // first set data</span><br><span class="line"></span><br><span class="line">// now modify viewport</span><br><span class="line">chart.setVisibleXRangeMaximum(20); // allow 20 values to be displayed at once on the x-axis, not more</span><br><span class="line">chart.moveViewToX(10); // set the left edge of the chart to x-index 10</span><br><span class="line">// moveViewToX(...) also calls invalidate()</span><br></pre></td></tr></table></figure>



        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-12T07:56:50.000Z">2017-06-12</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    35 分钟 读完 (大约 5285 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/12/《Android开源库》 MPAndroidChart Wiki(译文)～Part 2/">《Android开源库》 MPAndroidChart Wiki(译文)～Part 2</a>
            
        </h1>
        <div class="content">
            <h2 id="7-填充数据"><a href="#7-填充数据" class="headerlink" title="7. 填充数据"></a><a href></a>7. 填充数据</h2><p> 这一章节将讲解给各式各样的图表设置数据的方法。</p>
<h3 id="7-1-LineChart（线形图）"><a href="#7-1-LineChart（线形图）" class="headerlink" title="7.1 LineChart（线形图）"></a><a href></a>7.1 LineChart（线形图）</h3><p> 想给图表添加数据，使用如下方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void setData(ChartData data) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 基类<a href="https://github.com/PhilJay/MPAndroidChart/wiki/The-ChartData-class" target="_blank" rel="noopener">ChartData</a>囊括所有图表在渲染过程中所需要的信息。针对不同的图表，有不同的ChartData的子类来为对应的图表设置数据，例如针对LineChart，你可以使用LineData。在构造函数中，你可以传递List&lt;? extends IDataSet&gt;作为要显示的值。从下面这个例子中，你可以看到如何使用LineData给LineChart设置数据：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/** List constructor */</span><br><span class="line">public LineData(List&lt;ILineDataSet&gt; sets) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">/** Constructor with one or multiple ILineDataSet objects */</span><br><span class="line">public LineData(ILineDataSet...) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 那么，什么是DataSet?为什么你需要使用到它呢？其实很简单。一个DataSet代表在图表中显示的一组数据条目。它的设计初衷是为了将同一个图表中的不同组数据在逻辑上分离开，这样子看上去更清晰。针对不同的图表，存在不同的DataSet的子类（例如，LineDataSet），它们都有着自己的样式。</p>
<p> 比如说，你想在一个线形图中展示两家公司一年中四个季度的收入。这种情况下，建议创建两个不同的LineDataSet（对应两个公司），每个LineDataSet包含四个季度的值（一年四个季度）。当然你也可以使用一个LineDataSet，然后包含两个公司8个季度的值。</p>
<p> 通过以下方式创建LineDataSet:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public LineDataSet(List&lt;Entry&gt; entries, String label) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 从构造方法可以看出，LineDataSet创建的时候需要一个List&lt; Entry&gt;和一个用于描述LineDataSet的String，这个String也是在图例上显示的标签。 此外，此标签可用于在包含其他LineDataSet的LineData对象中查找该LineDataSet。</p>
<p> Entry列表包含图表中的所有数据。一个Entry对象，实际上就是对一个含有X值和Y值得数据条目的封装。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public Entry(float x, float y) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 综上（两家公司一年内季度收入的例子）：<br> 首先，创建 List&lt; Entry&gt;来存放数据值：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Entry&gt; valsComp1 = new ArrayList&lt;Entry&gt;();</span><br><span class="line">List&lt;Entry&gt; valsComp2 = new ArrayList&lt;Entry&gt;();</span><br></pre></td></tr></table></figure>

<p> 然后，使用Entry对象填写列表。 确保条目对象包含x轴的正确索引。 （当然，这里可以使用一个循环，在这种情况下，循环的计数器变量可以是x轴上的索引）。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Entry c1e1 = new Entry(0f, 100000f); // 0 == quarter 1</span><br><span class="line">valsComp1.add(c1e1);</span><br><span class="line">Entry c1e2 = new Entry(1f, 140000f); // 1 == quarter 2 ...</span><br><span class="line">valsComp1.add(c1e2);</span><br><span class="line">// and so on ...</span><br><span class="line"></span><br><span class="line">Entry c2e1 = new Entry(0f, 130000f); // 0 == quarter 1</span><br><span class="line">valsComp2.add(c2e1);</span><br><span class="line">Entry c2e2 = new Entry(1f, 115000f); // 1 == quarter 2 ...</span><br><span class="line">valsComp2.add(c2e2);</span><br><span class="line">//...</span><br></pre></td></tr></table></figure>

<p> List&lt; Entry&gt;搞定之后，创建LineDataSet对象：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LineDataSet setComp1 = new LineDataSet(valsComp1, &quot;Company 1&quot;);</span><br><span class="line">setComp1.setAxisDependency(AxisDependency.LEFT);</span><br><span class="line">LineDataSet setComp2 = new LineDataSet(valsComp2, &quot;Company 2&quot;);</span><br><span class="line">setComp2.setAxisDependency(AxisDependency.LEFT);</span><br></pre></td></tr></table></figure>

<p> 通过调用setAxisDependency（…），指定DataSet对应的轴。 最后但同样重要的是<br> ，创建一个IDataSets列表并构建ChartData对象：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// use the interface ILineDataSet</span><br><span class="line">List&lt;ILineDataSet&gt; dataSets = new ArrayList&lt;ILineDataSet&gt;();</span><br><span class="line">dataSets.add(setComp1);</span><br><span class="line">dataSets.add(setComp2);</span><br><span class="line"></span><br><span class="line">LineData data = new LineData(dataSets);</span><br><span class="line">mLineChart.setData(data);</span><br><span class="line">mLineChart.invalidate(); // refresh</span><br></pre></td></tr></table></figure>

<p> 在调用invalidate()之后，图表将会刷新，我们提供的数据将会被绘制出来。</p>
<p> 如果我们要为x轴添加更多的描述性值（而不是不同季度的0到3的数字），我们可以通过使用IAxisValueFormatter接口来实现。 此接口允许在XAxis上绘制的值自定义样式。 在此示例中，格式化程序可能如下所示：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// the labels that should be drawn on the XAxis</span><br><span class="line">final String[] quarters = new String[] &#123; &quot;Q1&quot;, &quot;Q2&quot;, &quot;Q3&quot;, &quot;Q4&quot; &#125;;</span><br><span class="line"></span><br><span class="line">IAxisValueFormatter formatter = new IAxisValueFormatter() &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getFormattedValue(float value, AxisBase axis) &#123;</span><br><span class="line">        return quarters[(int) value];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // we don&apos;t draw numbers, so no decimal digits needed</span><br><span class="line">    @Override</span><br><span class="line">    public int getDecimalDigits() &#123;  return 0; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">XAxis xAxis = mLineChart.getXAxis();</span><br><span class="line">xAxis.setGranularity(1f); // minimum axis-step (interval) is 1</span><br><span class="line">xAxis.setValueFormatter(formatter);</span><br></pre></td></tr></table></figure>

<p> 关于IAxisValueFormatter 接口的更多使用方法，请查阅<a href="https://github.com/PhilJay/MPAndroidChart/wiki/The-AxisValueFormatter-interface" target="_blank" rel="noopener">IAxisValueFormatter</a></p>
<p> 上面示例的运行结果大致如下</p>
<p> <img src="https://camo.githubusercontent.com/a5e0d63619c5f1f2811543782ac669bbdc133909/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d5043686172742f6d61737465722f73637265656e73686f74732f6c696e6563686172745f77696b692e706e67" alt></p>
<p> 给BarChart，ScatterChart，BubbleChart和CandleStickChart设置数据的方法类似于LineChart。 一个特殊情况是针对多组数据的BarChart，这个后面会进行详细的介绍。</p>
<hr>
<h4 id="7-1-1-数据顺序"><a href="#7-1-1-数据顺序" class="headerlink" title="7.1.1 数据顺序"></a><a href></a>7.1.1 数据顺序</h4><p> 请注意，本开源库不支持X轴非升序的Entry组成的LineDataSet的绘制。以未排序的方式添加条目可能会导致正确的绘制，但也可能导致意外的结果。 Entry对象列表可以手动排序，也可以使用EntryXComparator：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Entry&gt; entries = ...;</span><br><span class="line">Collections.sort(entries, new EntryXComparator());</span><br></pre></td></tr></table></figure>

<p> 因为本库使用了<a href="https://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank" rel="noopener">二分查找算法</a>来优化性能，所以只能在排好序后的列表数据上工作。</p>
<hr>
<h3 id="7-2-BarChart-柱形图"><a href="#7-2-BarChart-柱形图" class="headerlink" title="7.2 BarChart(柱形图)"></a><a href></a>7.2 BarChart(柱形图)</h3><p> BarChart上设置数据的方式和LineChart很相似。主要的差别是用于设置的数据对象从Entry变成了BarEntry。除此之外，BarChart还支持更多的样式。</p>
<p> 下面是一个给BarChart填充数据的例子：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;BarEntry&gt; entries = new ArrayList&lt;&gt;();</span><br><span class="line">entries.add(new BarEntry(0f, 30f));</span><br><span class="line">entries.add(new BarEntry(1f, 80f));</span><br><span class="line">entries.add(new BarEntry(2f, 60f));</span><br><span class="line">entries.add(new BarEntry(3f, 50f)); </span><br><span class="line">// gap of 2f</span><br><span class="line">entries.add(new BarEntry(5f, 70f));</span><br><span class="line">entries.add(new BarEntry(6f, 60f));</span><br><span class="line"></span><br><span class="line">BarDataSet set = new BarDataSet(entries, &quot;BarDataSet&quot;);</span><br></pre></td></tr></table></figure>

<p> 在上面的例子中，创建了五个BarEntry对象并将其添加到BarDataSet中。 请注意，在第四个到第五个条目之间的x位置上存在“2”的差距。 在这个例子中，这个差距用于解释BarChart中非常不错的定位方式。 本教程末尾的截图将显示给定数据的结果BarChart，后面会看到。 然后下一步，创建一个BarData对象：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BarData data = new BarData(set);</span><br><span class="line">data.setBarWidth(0.9f); // set custom bar width</span><br><span class="line">chart.setData(data);</span><br><span class="line">chart.setFitBars(true); // make the x-axis fit exactly all bars</span><br><span class="line">chart.invalidate(); // refresh</span><br></pre></td></tr></table></figure>

<p> 在上述代码片段中，创建了一个BarData对象。 当创建图表的BarEntry对象时，每个柱形之间的间隔是1f(以中心为起点终点)。 通过将柱形宽度设置为0.9f，我们在每个柱形之间有效地创建一个0.1f的空间。 setFitBars（true）调用会告诉图表调整它的x轴值的范围，以精确地适合所有的柱形，并且在两边不会有柱形断层。</p>
<p> 创建BarData对象后，我们将其设置到图表中并进行刷新。 运行结果如下：</p>
<p> <img src="https://camo.githubusercontent.com/eb283164a410a68bc8102a1ade623ec759f2b7f2/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d5043686172742f6d61737465722f73637265656e73686f74732f6e6f726d616c5f62617263686172745f77696b692e706e67" alt></p>
<hr>
<h3 id="7-3-Grouped-BarChart-分组柱形图"><a href="#7-3-Grouped-BarChart-分组柱形图" class="headerlink" title="7.3 Grouped BarChart(分组柱形图)"></a><a href></a>7.3 Grouped BarChart(分组柱形图)</h3><p> 从<a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">v3.0.0版本</a>开始，MPAndroidChart开始支持显式分组的柱形图，或者用户自定义，这种情况下用户可以通过改变X坐标将柱形图放在图表的任何位置。<br> 本节将重点介绍显式分组的BarChart，这意味着开源库会帮你处理柱状图的x位置。 示例如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">YourData[] group1 = ...;</span><br><span class="line">YourData[] group2 = ...;</span><br><span class="line"></span><br><span class="line">List&lt;BarEntry&gt; entriesGroup1 = new ArrayList&lt;&gt;();</span><br><span class="line">List&lt;BarEntry&gt; entriesGroup2 = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">// fill the lists</span><br><span class="line">for(int i = 0; i &lt; group1.length; i++) &#123;</span><br><span class="line">    entriesGroup1.add(new BarEntry(i, group1.getValue()));</span><br><span class="line">    entriesGroup2.add(new BarEntry(i, group2.getValue()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BarDataSet set1 = new BarDataSet(entriesGroup1, &quot;Group 1&quot;);</span><br><span class="line">BarDataSet set2 = new BarDataSet(entriesGroup2, &quot;Group 2&quot;);</span><br></pre></td></tr></table></figure>

<p> 这个例子中，我们将有两组柱状图，每组由一个BarDataSet表示。 在显式分组的情况下，条目的实际x位置并不重要，它将会根据条目列表中BarEntry的位置执行分组：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">float groupSpace = 0.06f;</span><br><span class="line">float barSpace = 0.02f; // x2 dataset</span><br><span class="line">float barWidth = 0.45f; // x2 dataset</span><br><span class="line">// (0.02 + 0.45) * 2 + 0.06 = 1.00 -&gt; interval per &quot;group&quot;</span><br><span class="line"></span><br><span class="line">BarData data = new BarData(set1, set2);</span><br><span class="line">data.setBarWidth(barWidth); // set the width of each bar</span><br><span class="line">barChart.setData(data);</span><br><span class="line">barChart.groupBars(1980f, groupSpace, barSpace); // perform the &quot;explicit&quot; grouping</span><br><span class="line">barChart.invalidate(); // refresh</span><br></pre></td></tr></table></figure>

<p> 在上面的代码片段中，BarDataSet对象被添加到BarChart。 groupBars（…）方法执行两个BarDataSet对象的分组。 该方法采用以下参数：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void groupBars(float fromX, float groupSpace, float barSpace) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> fromX参数确定XAxis上分组条目开始的位置（在这种情况下为“1980”），groupSpace确定每组条目之间留下的空间，barSpace确定组中单个条目之间的空间。 基于这些参数，groupBars（…）方法将XAxis上的每个栏的位置更改为分组的外观，保留各个BarEntry对象的顺序。</p>
<p> 每个组在XAxis上的“间隔”（占用空间）也由groupSpace、barSpac以及barWidth定义。</p>
<p> 运行结果如下：</p>
<p> <img src="https://camo.githubusercontent.com/8b2f6996b19725410e02c85f16b93ed94478bdd9/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d5043686172742f6d61737465722f73637265656e73686f74732f67726f757065645f62617263686172745f77696b692e706e67" alt></p>
<p> 当然，分组的BarChart也可以在不使用groupBars（…）方法的情况下实现，只需通过手动的方式将各个条目直接定位到XAxis上即可。</p>
<p> 为了确保XAxis的标签位于上述屏幕截图上所示的中间位置，可以使用setCenterAxisLabels（…）方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">XAxis xAxis = chart.getXAxis();</span><br><span class="line">xAxis.setCenterAxisLabels(true);</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="7-4-Stacked-BarChart-堆积柱形图"><a href="#7-4-Stacked-BarChart-堆积柱形图" class="headerlink" title="7.4 Stacked BarChart(堆积柱形图)"></a><a href></a>7.4 Stacked BarChart(堆积柱形图)</h3><p> 堆积柱形图的使用方式和正常柱形图的使用方式基本相同。有点差异的是BarEntry的创建方式不太一样，在堆叠柱形图的使用中，需要使用到BarEntry的另一个构造方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public BarEntry(float x, float [] yValues) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 这个构造方法允许传入多个yValues，代表每个堆积的柱形图的值。下面有个例子：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BarEntry stackedEntry = new BarEntry(0f, new float[] &#123; 10, 20, 30 &#125;);</span><br></pre></td></tr></table></figure>

<p> 这个BarEntry由3个堆积的值组成，高度分别是10,20,30</p>
<hr>
<h3 id="7-5-PieChart-饼图"><a href="#7-5-PieChart-饼图" class="headerlink" title="7.5 PieChart(饼图)"></a><a href></a>7.5 PieChart(饼图)</h3><p> 与其他图表类型不同，PieChart以PieEntry对象的形式获取数据。PieEntry的构造方法如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public PieEntry(float value, String label) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p> 构造函数的第一个参数用于在PieChart中绘制为饼图的实际“值”，第二个参数“label”作为第一个参数绘制的那部分饼的描述。 示例如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">List&lt;PieEntry&gt; entries = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">entries.add(new PieEntry(18.5f, &quot;Green&quot;));</span><br><span class="line">entries.add(new PieEntry(26.7f, &quot;Yellow&quot;));</span><br><span class="line">entries.add(new PieEntry(24.0f, &quot;Red&quot;));</span><br><span class="line">entries.add(new PieEntry(30.8f, &quot;Blue&quot;));</span><br><span class="line"></span><br><span class="line">PieDataSet set = new PieDataSet(entries, &quot;Election Results&quot;);</span><br><span class="line">PieData data = new PieData(set);</span><br><span class="line">pieChart.setData(data);</span><br><span class="line">pieChart.invalidate(); // refresh</span><br></pre></td></tr></table></figure>

<p> PieEntry对象不需要保存x位置的值，因为图表中显示的PieEntry对象的顺序由其在条目列表中的顺序确定。<br> 添加一下样式设置之后，上面的例子将得到下面的饼图：</p>
<p> <img src="https://camo.githubusercontent.com/8dac84ecf64fa0a21d938cf030f021e30e0210a5/68747470733a2f2f7261772e6769746875622e636f6d2f5068696c4a61792f4d5043686172742f6d61737465722f73637265656e73686f74732f70696563686172745f77696b692e706e67" alt></p>
<h3 id="7-6-RadarChart"><a href="#7-6-RadarChart" class="headerlink" title="7.6 RadarChart"></a><a href></a>7.6 RadarChart</h3><p> 暂无介绍</p>
<h3 id="7-7-CombinedChart"><a href="#7-7-CombinedChart" class="headerlink" title="7.7 CombinedChart"></a><a href></a>7.7 CombinedChart</h3><p> 暂无介绍</p>
<hr>
<h2 id="8-设置颜色"><a href="#8-设置颜色" class="headerlink" title="8. 设置颜色"></a><a href></a>8. 设置颜色</h2><p> 从<a href="https://github.com/PhilJay/MPAndroidChart/releases/tag/v1.4.0" target="_blank" rel="noopener">V1.4.0版本</a>开始，在之前版本上负责设置颜色的ColorTemplate 不再被需要。但是，一些预定义的颜色值依然保存在这个类中（例如，ColorTemplate.VORDIPLOM_COLORS），并且提供便利的方法，方便我们将颜色资源转换成真正的颜色。通过给DataSet直接指定颜色来代替ColorTemplate，同时你可以给每个DataSet分别设计样式。</p>
<p> 在下面这个简单的例子中，我们使用两个不同的LineDataSet分别代表两家公司一年内四个季度的收入，我们给每个公司的数据分别设置不同的颜色。</p>
<ul>
<li>“Company 1”使用四中不同的红色 </li>
<li>“Company 2”使用四中不同的绿色  代码如下：</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LineDataSet setComp1 = new LineDataSet(valsComp1, &quot;Company 1&quot;);</span><br><span class="line"> // sets colors for the dataset, resolution of the resource name to a &quot;real&quot; color is done internally</span><br><span class="line"> setComp1.setColors(new int[] &#123; R.color.red1, R.color.red2, R.color.red3, R.color.red4 &#125;, Context);</span><br><span class="line"> </span><br><span class="line"> LineDataSet setComp2 = new LineDataSet(valsComp2, &quot;Company 2&quot;);</span><br><span class="line"> setComp2.setColors(new int[] &#123; R.color.green1, R.color.green2, R.color.green3, R.color.green4 &#125;, Context);</span><br></pre></td></tr></table></figure>

<p> 除了上面这个方法外，还有很多给DataSet设置颜色的方法。具体如下：</p>
<pre><code>方法                                          | 作用                                                                                                                                                
------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- 
setColors(int [] colors, Context c)         | 设置DataSet的颜色。当数据条目超过颜色数组的大小时，颜色将会被重复使用。你可以使用new int[] { R.color.red, R.color.green, … }来为这个方法提供颜色数组，实际上，内部是通过 getResources().getColor(…)来解析你传入的参数的
setColors(int [] colors)                    | 设置DataSet的颜色。当数据条目超过颜色数组的大小时，颜色将会被重复使用。确保颜色是通过getResources().getColor(…)后获取的值，也就是颜色的16进制值                                                         
setColors(ArrayList&amp;lt; Integer&amp;gt; colors) | 设置DataSet的颜色。当数据条目超过颜色数组的大小时，颜色将会被重复使用。确保颜色是通过getResources().getColor(…)后获取的值，也就是颜色的16进制值                                                         
setColor(int color)                         | 给DataSet设置一个唯一的颜色值。实际上，内部也是使用一个数组，只是数组中的颜色是一样的而已                                                                                                  </code></pre><p>ColorTemplate示例：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LineDataSet set = new LineDataSet(...);</span><br><span class="line">set.setColors(ColorTemplate.VORDIPLOM_COLORS);</span><br></pre></td></tr></table></figure>

<p> 如果没有给DataSet设置颜色，我们将会使用默认值。</p>
<hr>
<h2 id="9-格式化数据值-IValueFormatter"><a href="#9-格式化数据值-IValueFormatter" class="headerlink" title="9. 格式化数据值(IValueFormatter)"></a><a href></a>9. 格式化数据值(IValueFormatter)</h2><p> <a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">V1.6.2版本</a>引入，<a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">V2.1.4版本</a>优化</p>
<p> IValueFormatter接口允许用户自定义格式化类来将图表中的数据按照一种特定的方式格式化后再进行绘制。</p>
<p> 你可以创建一个类，实现IValueFormatter接口，然后在getFormattedValue(…)方法中，返回你希望在图表中绘制的内容。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class MyValueFormatter implements IValueFormatter &#123;</span><br><span class="line"></span><br><span class="line">    private DecimalFormat mFormat;</span><br><span class="line">    </span><br><span class="line">    public MyValueFormatter() &#123;</span><br><span class="line">        mFormat = new DecimalFormat(&quot;###,###,##0.0&quot;); // use one decimal</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public String getFormattedValue(float value, Entry entry, int dataSetIndex, ViewPortHandler viewPortHandler) &#123;</span><br><span class="line">        // write your logic here</span><br><span class="line">        return mFormat.format(value) + &quot; $&quot;; // e.g. append a dollar-sign</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 然后，将格式化程序设置到ChartData或者DataSet：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// usage on whole data object</span><br><span class="line">lineData.setValueFormatter(new MyValueFormatter());</span><br><span class="line"></span><br><span class="line">// usage on individual dataset object</span><br><span class="line">lineDataSet.setValueFormatter(new MyValueFormatter());</span><br></pre></td></tr></table></figure>


<h3 id="9-1-预定义的Formatter"><a href="#9-1-预定义的Formatter" class="headerlink" title="9.1 预定义的Formatter"></a><a href></a>9.1 预定义的Formatter</h3><pre><code>Formatter             | 介绍                                                                                                   
--------------------- | ----------------------------------------------------------------------------------------------------- 
LargeNumberFormatter  | 用于格式化大于1000的数字。“1.000”-&amp;gt;“1k”, “1.000.000”-&amp;gt;“1m” (million), “1.000.000.000”-&amp;gt;“1b” (billion)等等
PercentFormatter      | 用于显示保留一位小数的百分数，在饼图中用的比较多。50-&amp;gt;50.0%                                                                
StackedValueFormatter | 为堆积柱形图设置的格式化程序。可以明确指出是需要绘制所有的堆积值还是只绘制顶部值                                                             </code></pre><hr>
<hr>
<h2 id="10-格式化轴值-AxisValueFormatter"><a href="#10-格式化轴值-AxisValueFormatter" class="headerlink" title="10. 格式化轴值(AxisValueFormatter)"></a><a href></a>10. 格式化轴值(AxisValueFormatter)</h2><p> <a href="https://github.com/PhilJay/MPAndroidChart/releases" target="_blank" rel="noopener">v3.0.0版本</a>中引入，用于格式化X轴和Y轴上的显示值。</p>
<h3 id="10-1-创建Formatter"><a href="#10-1-创建Formatter" class="headerlink" title="10.1 创建Formatter"></a><a href></a>10.1 创建Formatter</h3><p> 轴值自定义格式只需要一步：创建实现IAxisValueFormatter 接口的自定义格式类。<br> 如下所示，这个例子中，将轴值格式化为1为小数。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class MyYAxisValueFormatter implements IAxisValueFormatter &#123;</span><br><span class="line"></span><br><span class="line">    private DecimalFormat mFormat;</span><br><span class="line"></span><br><span class="line">    public MyAxisValueFormatter() &#123;</span><br><span class="line"></span><br><span class="line">        // format values to 1 decimal digit</span><br><span class="line">        mFormat = new DecimalFormat(&quot;###,###,##0.0&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getFormattedValue(float value, AxisBase axis) &#123;</span><br><span class="line">        // &quot;value&quot; represents the position of the label on the axis (x or y)</span><br><span class="line">        return mFormat.format(value) + &quot; $&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /** this is only needed if numbers are returned, else return 0 */</span><br><span class="line">    @Override</span><br><span class="line">    public int getDecimalDigits() &#123; return 1; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 下面这个例子展示如何将一个字符串数组展示到轴上：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class MyXAxisValueFormatter implements IAxisValueFormatter &#123;</span><br><span class="line"></span><br><span class="line">    private String[] mValues;</span><br><span class="line"></span><br><span class="line">    public MyXAxisValueFormatter(String[] values) &#123;</span><br><span class="line">        this.mValues = values;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getFormattedValue(float value, AxisBase axis) &#123;</span><br><span class="line">        // &quot;value&quot; represents the position of the label on the axis (x or y)</span><br><span class="line">        return mValues[(int) value];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /** this is only needed if numbers are returned, else return 0 */</span><br><span class="line">    @Override</span><br><span class="line">    public int getDecimalDigits() &#123; return 0; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="10-2-设置Formatter"><a href="#10-2-设置Formatter" class="headerlink" title="10.2 设置Formatter"></a><a href></a>10.2 设置Formatter</h3><p> 创建完Formatter之后，设置到对应的轴：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">YAxis left = chart.getAxisLeft();</span><br><span class="line">left.setValueFormatter(new MyYAxisValueFormatter());</span><br><span class="line"></span><br><span class="line">String[] values = new String[] &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line">XAxis xAxis = chart.getXAxis();</span><br><span class="line">xAxis.setValueFormatter(new MyXAxisValueFormatter(values));</span><br></pre></td></tr></table></figure>

<p> 现在轴上将绘制Formatter提供的数据，而非默认的数据最小值和最大值。</p>
<hr>
<h3 id="10-3-限制间隔"><a href="#10-3-限制间隔" class="headerlink" title="10.3 限制间隔"></a><a href></a>10.3 限制间隔</h3><p> 如果你使用基于数组索引的格式化程序（如上所述），将轴的最小间隔限制为“1”是有意义的：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axis.setGranularity(1f); // restrict interval to 1 (minimum)</span><br></pre></td></tr></table></figure>

<p> 这将防止格式化程序绘制重复的轴标签（由轴间隔&lt;1）引起。 只要图表的“缩放级别”足够高，它将停止重新计算更小的间隔。</p>
<hr>
<h3 id="10-4-预定义Formatter"><a href="#10-4-预定义Formatter" class="headerlink" title="10.4 预定义Formatter"></a><a href></a>10.4 预定义Formatter</h3><pre><code>Formatter            | 介绍                                                                                                   
-------------------- | ----------------------------------------------------------------------------------------------------- 
LargeNumberFormatter | 用于格式化大于1000的数字。“1.000”-&amp;gt;“1k”, “1.000.000”-&amp;gt;“1m” (million), “1.000.000.000”-&amp;gt;“1b” (billion)等等
PercentFormatter     | 用于显示保留一位小数的百分数，在饼图中用的比较多。50-&amp;gt;50.0%                                                                </code></pre><hr>
<h3 id="10-5-示例Formatters"><a href="#10-5-示例Formatters" class="headerlink" title="10.5 示例Formatters"></a><a href></a>10.5 示例Formatters</h3><p> <a href="https://github.com/PhilJay/MPAndroidChart/blob/master/MPChartExample/src/com/xxmassdeveloper/mpchartexample/custom/DayAxisValueFormatter.java" target="_blank" rel="noopener">DayAxisValueFormatter</a>，该格式化程序将提供的值转换为日期字符串，根据比例改变字符串。</p>
<hr>
<h3 id="10-6-之前的Formatter"><a href="#10-6-之前的Formatter" class="headerlink" title="10.6 之前的Formatter"></a><a href></a>10.6 之前的Formatter</h3><p> 在v3.0.0之前的版本，针对X轴和Y轴分别存在两个Formatter,具体请查阅：</p>
<ul>
<li><a href="https://github.com/PhilJay/MPAndroidChart/wiki/The-XAxisValueFormatter-interface" target="_blank" rel="noopener">XAxisValueFormatter</a> </li>
<li><a href="https://github.com/PhilJay/MPAndroidChart/wiki/The-YAxisValueFormatter-interface" target="_blank" rel="noopener">YAxisValueFormatter</a>  </li>
</ul>
<hr>
<h2 id="11-基本设置-样式"><a href="#11-基本设置-样式" class="headerlink" title="11. 基本设置/样式"></a><a href></a>11. 基本设置/样式</h2><p> 本节重点介绍适用于本库中所有图表类型的基本设置和样式。</p>
<h3 id="11-1-刷新"><a href="#11-1-刷新" class="headerlink" title="11.1 刷新"></a><a href></a>11.1 刷新</h3><pre><code>方法                     | 使用                                                              
---------------------- | ---------------------------------------------------------------- 
invalidate()           | 调用该方法后，图表将会被刷新(重绘)，从而使我们的修改在图表上生效                               
notifyDataSetChanged() | 让图表知道底层数据发生了变化，需要重新进行所有的必需计算(位移,图例,最大值,最小值等等)。在加载动态数据的时候这个是很有必要的</code></pre><hr>
<h3 id="11-2-日志"><a href="#11-2-日志" class="headerlink" title="11.2 日志"></a><a href></a>11.2 日志</h3><pre><code>方法                             | 使用                                      
------------------------------ | ---------------------------------------- 
setLogEnabled(boolean enabled) | 设置为true,打开图表的日志输出。打开日志对性能有影响，没必要的话最好保持关闭</code></pre><hr>
<h3 id="11-3-基本图表样式"><a href="#11-3-基本图表样式" class="headerlink" title="11.3 基本图表样式"></a><a href></a>11.3 基本图表样式</h3><p> 下面是一些和风格相关的方法，你可以直接在图表对象上使用：</p>
<pre><code>方法                                       | 使用                                           
---------------------------------------- | --------------------------------------------- 
setBackgroundColor(int color)            | 设置整个图表的背景颜色，也可以通过xml文件设置                     
setDescription(String desc)              | 设置在图表右下角显示的描述文字                              
setDescriptionColor(int color)           | 设置描述文字的颜色                                    
setDescriptionPosition(float x, float y) | 设置描述文字显示的位置                                  
setDescriptionTypeface(Typeface t)       | 设置描述文字字体                                     
setDescriptionTextSize(float size)       | 设置描述文字的字体大小（px）, 最小6f, 最大16f.                
setNoDataText(String text)               | 设置图表中没有数据时显示的文字.                             
setDrawGridBackground(boolean enabled)   | 设置为true之后，图表绘制区域后面的矩形会被绘制                    
setGridBackgroundColor(int color)        | 设置要绘制的网格背景的颜色。                               
setDrawBorders(boolean enabled)          | 启用/禁用绘制图表边框（图表周围的线）.                         
setBorderColor(int color)                | 设置图表边框的颜色                                    
setBorderWidth(float width)              | 设置图表边框线的宽度(dp)                               
setMaxVisibleValueCount(int count)       | 设置图表上最大可见绘制值标签的数量。 这仅在启用setDrawValues（）时才会生效。</code></pre><hr>
<h2 id="12-特定图表设置和样式"><a href="#12-特定图表设置和样式" class="headerlink" title="12. 特定图表设置和样式"></a><a href></a>12. 特定图表设置和样式</h2><h3 id="12-1-Line-Bar-Scatter-Candle-amp-BubbleChart-条形图，柱形图，散列图，蜡烛图和气泡图"><a href="#12-1-Line-Bar-Scatter-Candle-amp-BubbleChart-条形图，柱形图，散列图，蜡烛图和气泡图" class="headerlink" title="12.1 Line-, Bar-, Scatter-, Candle- &amp; BubbleChart(条形图，柱形图，散列图，蜡烛图和气泡图)"></a><a href></a>12.1 Line-, Bar-, Scatter-, Candle- &amp; BubbleChart(条形图，柱形图，散列图，蜡烛图和气泡图)</h3><pre><code>方法                                         | 使用                                                                                 
------------------------------------------ | ----------------------------------------------------------------------------------- 
setAutoScaleMinMaxEnabled(boolean enabled) | 指示是否启用y轴上的自动缩放的标志。 如果启用，只要视口更改，y轴就会自动调整到当前x轴范围的最小和最大y值。 这对于显示财务数据的图表尤其有用。 默认值：false
setKeepPositionOnRotation(boolean enabled) | 设置方向更改后图表是否应保持其位置（缩放/滚动）。 默认值：false                                                </code></pre><hr>
<h3 id="12-2-BarChart-柱形图"><a href="#12-2-BarChart-柱形图" class="headerlink" title="12.2 BarChart(柱形图)"></a><a href></a>12.2 BarChart(柱形图)</h3><pre><code>方法                                          | 使用                                               
------------------------------------------- | ------------------------------------------------- 
setDrawValueAboveBar(boolean enabled)       | 设置为true,所有条目的值将会绘制在条目的上方，而不是顶部的下面                
setDrawBarShadow(boolean enabled)           | 如果设置为true，则在每个条之后绘制一个指示最大值的灰色区域。 打开这个开关将会是性能下降40%
setDrawValuesForWholeStack(boolean enabled) | 如果设置为true，则堆叠条的所有值都是单独绘制的，而不仅仅是它们的总和.            
setDrawHighlightArrow(boolean enabled)      | 设置为true后，若取值高亮，将会在每个高亮的条目上绘制一个箭头                 </code></pre><hr>
<h3 id="12-3-PieChart-饼图"><a href="#12-3-PieChart-饼图" class="headerlink" title="12.3 PieChart(饼图)"></a><a href></a>12.3 PieChart(饼图)</h3><pre><code>方法                                        | 使用                                                             
----------------------------------------- | --------------------------------------------------------------- 
setDrawSliceText(boolean enabled)         | 将其设置为true可将x值文本绘制到饼图切片中                                        
setUsePercentValues(boolean enabled)      | 如果启用此功能，则图表中的值将以百分比绘制，而不是以原始值绘制。提供给ValueFormatter的值将会以百分比的形式   
setCenterText(SpannableString text)       | 设置绘制在饼图中心的文字，过长的文字会被自动处理以免延伸到饼图切片中。                            
setCenterTextRadiusPercent(float percent) | 设置中心文本边界框的矩形半径，以饼孔默认值的百分比为1.f（100％）                            
setHoleRadius(float percent)              | 设置饼图中心空洞的半径，默认是整个饼图半径的一半也就是50%                                 
setTransparentCircleRadius(float percent) | 设置饼图中孔旁边的透明圆的半径，最大半径的百分比（max =整个图的半径），默认值55％ - &amp;gt;表示默认值比中心孔大5％
setTransparentCircleColor(int color)      | 设置透明圆圈的颜色                                                      
setTransparentCircleAlpha(int alpha)      | 设置透明圆圈的透明值                                                     
setMaxAngle(float maxangle)               | 设置用于计算饼形圆的最大角度。 360f意味着它是一个完整的PieChart，180f结果是一个半饼图。 默认值：360f  </code></pre><hr>
<h3 id="12-4-RadarChart-雷达图"><a href="#12-4-RadarChart-雷达图" class="headerlink" title="12.4 RadarChart(雷达图)"></a><a href></a>12.4 RadarChart(雷达图)</h3><pre><code>方法                             | 使用                          
------------------------------ | ---------------------------- 
setSkipWebLineCount(int count) | 允许跳过来自图表中心的网页线。 特别有用，如果有很多行。</code></pre>
        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/categories/Android开源库/page/0/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/categories/Android开源库/page/2/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/categories/Android开源库/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/Android开源库/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/Android开源库/page/3/">3</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.png" alt="Onlyloveyd">
                    
                    
                    <p class="is-size-4 is-block">
                        Onlyloveyd
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        小码过河
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>China，GuiYang</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        163
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        14
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        81
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/onlyloveyd" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/onlyloveyd">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="CSDN" href="https://blog.csdn.net/poorkick">
                
                <i class="blog"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Android基础/">
            <span class="level-start">
                <span class="level-item">Android基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">58</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Android基础/Android-Studio/">
            <span class="level-start">
                <span class="level-item">Android Studio</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Android安全/">
            <span class="level-start">
                <span class="level-item">Android安全</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android应用/">
            <span class="level-start">
                <span class="level-item">Android应用</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">26</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android开源库/">
            <span class="level-start">
                <span class="level-item">Android开源库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">29</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android源码/">
            <span class="level-start">
                <span class="level-item">Android源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android系统/">
            <span class="level-start">
                <span class="level-item">Android系统</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android进阶/">
            <span class="level-start">
                <span class="level-item">Android进阶</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Angular/">
            <span class="level-start">
                <span class="level-item">Angular</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Flutter/">
            <span class="level-start">
                <span class="level-item">Flutter</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Kotlin/">
            <span class="level-start">
                <span class="level-item">Kotlin</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/LeetCode/">
            <span class="level-start">
                <span class="level-item">LeetCode</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/微信小程序/">
            <span class="level-start">
                <span class="level-item">微信小程序</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/运维/">
            <span class="level-start">
                <span class="level-item">运维</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">13</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Aandroid实战/" style="font-size: 10px;">Aandroid实战</a> <a href="/tags/Android-Studio/" style="font-size: 13.08px;">Android Studio</a> <a href="/tags/Android基础/" style="font-size: 10px;">Android基础</a> <a href="/tags/Android实战/" style="font-size: 18.46px;">Android实战</a> <a href="/tags/Android开源库/" style="font-size: 11.54px;">Android开源库</a> <a href="/tags/Android源码/" style="font-size: 10px;">Android源码</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/BroadcastReceiver/" style="font-size: 10px;">BroadcastReceiver</a> <a href="/tags/CentOS/" style="font-size: 11.54px;">CentOS</a> <a href="/tags/CodeStyle/" style="font-size: 10px;">CodeStyle</a> <a href="/tags/Docker/" style="font-size: 12.31px;">Docker</a> <a href="/tags/Drawable/" style="font-size: 10.77px;">Drawable</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/FileProvider/" style="font-size: 10px;">FileProvider</a> <a href="/tags/Flex/" style="font-size: 10px;">Flex</a> <a href="/tags/Flutter/" style="font-size: 10px;">Flutter</a> <a href="/tags/Fragment/" style="font-size: 12.31px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 15.38px;">Framework</a> <a href="/tags/Gank-io/" style="font-size: 12.31px;">Gank.io</a> <a href="/tags/Gitlab/" style="font-size: 10px;">Gitlab</a> <a href="/tags/HAL/" style="font-size: 10px;">HAL</a> <a href="/tags/IDEA插件/" style="font-size: 10px;">IDEA插件</a> <a href="/tags/JetPack/" style="font-size: 10px;">JetPack</a> <a href="/tags/Kotlin/" style="font-size: 13.85px;">Kotlin</a> <a href="/tags/LeetCode/" style="font-size: 12.31px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 13.85px;">Linux</a> <a href="/tags/MPAndroidChart/" style="font-size: 16.15px;">MPAndroidChart</a> <a href="/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MultiDex/" style="font-size: 10px;">MultiDex</a> <a href="/tags/Mysql/" style="font-size: 10.77px;">Mysql</a> <a href="/tags/NDK/" style="font-size: 10px;">NDK</a> <a href="/tags/PMDReader/" style="font-size: 10px;">PMDReader</a> <a href="/tags/Picasso/" style="font-size: 10px;">Picasso</a> <a href="/tags/PowerDesign/" style="font-size: 10px;">PowerDesign</a> <a href="/tags/Realm/" style="font-size: 15.38px;">Realm</a> <a href="/tags/RecyclerView/" style="font-size: 11.54px;">RecyclerView</a> <a href="/tags/Retrofit/" style="font-size: 10px;">Retrofit</a> <a href="/tags/RxJava/" style="font-size: 11.54px;">RxJava</a> <a href="/tags/Service/" style="font-size: 10px;">Service</a> <a href="/tags/Smali/" style="font-size: 10.77px;">Smali</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/WanANdroid/" style="font-size: 10px;">WanANdroid</a> <a href="/tags/WebService/" style="font-size: 10px;">WebService</a> <a href="/tags/Xen/" style="font-size: 11.54px;">Xen</a> <a href="/tags/allowBackup/" style="font-size: 10px;">allowBackup</a> <a href="/tags/事件分发/" style="font-size: 10px;">事件分发</a> <a href="/tags/动画/" style="font-size: 11.54px;">动画</a> <a href="/tags/四大组件/" style="font-size: 10px;">四大组件</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/局域网/" style="font-size: 10px;">局域网</a> <a href="/tags/屏幕适配/" style="font-size: 10px;">屏幕适配</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/布局控件/" style="font-size: 20px;">布局控件</a> <a href="/tags/应用/" style="font-size: 17.69px;">应用</a> <a href="/tags/开发问题/" style="font-size: 10px;">开发问题</a> <a href="/tags/开机动画/" style="font-size: 10.77px;">开机动画</a> <a href="/tags/开源/" style="font-size: 11.54px;">开源</a> <a href="/tags/开源库/" style="font-size: 19.23px;">开源库</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/快捷键/" style="font-size: 10px;">快捷键</a> <a href="/tags/手电筒/" style="font-size: 10px;">手电筒</a> <a href="/tags/技术选型/" style="font-size: 10px;">技术选型</a> <a href="/tags/文本/" style="font-size: 10px;">文本</a> <a href="/tags/框架/" style="font-size: 10px;">框架</a> <a href="/tags/源码分析/" style="font-size: 11.54px;">源码分析</a> <a href="/tags/百度地图/" style="font-size: 12.31px;">百度地图</a> <a href="/tags/系统源码/" style="font-size: 10px;">系统源码</a> <a href="/tags/终端/" style="font-size: 10px;">终端</a> <a href="/tags/聚合数据/" style="font-size: 10px;">聚合数据</a> <a href="/tags/自定义View/" style="font-size: 14.62px;">自定义View</a> <a href="/tags/虚拟化/" style="font-size: 11.54px;">虚拟化</a> <a href="/tags/设计模式/" style="font-size: 10.77px;">设计模式</a> <a href="/tags/译文/" style="font-size: 16.92px;">译文</a> <a href="/tags/贪吃蛇/" style="font-size: 10px;">贪吃蛇</a> <a href="/tags/资源/" style="font-size: 10px;">资源</a> <a href="/tags/资源配置/" style="font-size: 10px;">资源配置</a> <a href="/tags/辅助工具/" style="font-size: 10px;">辅助工具</a> <a href="/tags/配置/" style="font-size: 12.31px;">配置</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/06/10/《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-10T12:51:43.000Z">2019-06-10</time></div>
                    <a href="/2019/06/10/《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays/" class="has-link-black-ter is-size-6">《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/01/《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-01T00:53:29.000Z">2019-06-01</time></div>
                    <a href="/2019/06/01/《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters/" class="has-link-black-ter is-size-6">《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/05/26/《LeetCode-0002》 两数相加-Add Two Numbers/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0002》 两数相加-Add Two Numbers">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-26T07:01:33.000Z">2019-05-26</time></div>
                    <a href="/2019/05/26/《LeetCode-0002》 两数相加-Add Two Numbers/" class="has-link-black-ter is-size-6">《LeetCode-0002》 两数相加-Add Two Numbers</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/05/26/《LeetCode-0001》 两数之和-TwoSum/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0001》 两数之和-TwoSum">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-26T01:53:45.000Z">2019-05-26</time></div>
                    <a href="/2019/05/26/《LeetCode-0001》 两数之和-TwoSum/" class="has-link-black-ter is-size-6">《LeetCode-0001》 两数之和-TwoSum</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/01/MacOS 10.11.6 Android源码编译并刷机/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MacOS 10.11.6 Android源码编译并刷机">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-01T11:57:08.000Z">2019-04-01</time></div>
                    <a href="/2019/04/01/MacOS 10.11.6 Android源码编译并刷机/" class="has-link-black-ter is-size-6">MacOS 10.11.6 Android源码编译并刷机</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android系统/">Android系统</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/04/">
                <span class="level-start">
                    <span class="level-item">四月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Aandroid实战/">
                        <span class="tag">Aandroid实战</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Studio/">
                        <span class="tag">Android Studio</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android基础/">
                        <span class="tag">Android基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android实战/">
                        <span class="tag">Android实战</span>
                        <span class="tag is-grey">27</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android开源库/">
                        <span class="tag">Android开源库</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android源码/">
                        <span class="tag">Android源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BroadcastReceiver/">
                        <span class="tag">BroadcastReceiver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CentOS/">
                        <span class="tag">CentOS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CodeStyle/">
                        <span class="tag">CodeStyle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Drawable/">
                        <span class="tag">Drawable</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/EditText/">
                        <span class="tag">EditText</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/FileProvider/">
                        <span class="tag">FileProvider</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flex/">
                        <span class="tag">Flex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flutter/">
                        <span class="tag">Flutter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Fragment/">
                        <span class="tag">Fragment</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Framework/">
                        <span class="tag">Framework</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gank-io/">
                        <span class="tag">Gank.io</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gitlab/">
                        <span class="tag">Gitlab</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HAL/">
                        <span class="tag">HAL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/IDEA插件/">
                        <span class="tag">IDEA插件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JetPack/">
                        <span class="tag">JetPack</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MPAndroidChart/">
                        <span class="tag">MPAndroidChart</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MacOS/">
                        <span class="tag">MacOS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MultiDex/">
                        <span class="tag">MultiDex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mysql/">
                        <span class="tag">Mysql</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NDK/">
                        <span class="tag">NDK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PMDReader/">
                        <span class="tag">PMDReader</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Picasso/">
                        <span class="tag">Picasso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PowerDesign/">
                        <span class="tag">PowerDesign</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Realm/">
                        <span class="tag">Realm</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RecyclerView/">
                        <span class="tag">RecyclerView</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Retrofit/">
                        <span class="tag">Retrofit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RxJava/">
                        <span class="tag">RxJava</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Service/">
                        <span class="tag">Service</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Smali/">
                        <span class="tag">Smali</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/TabLayout/">
                        <span class="tag">TabLayout</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/View/">
                        <span class="tag">View</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WanANdroid/">
                        <span class="tag">WanANdroid</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WebService/">
                        <span class="tag">WebService</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Xen/">
                        <span class="tag">Xen</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/allowBackup/">
                        <span class="tag">allowBackup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/事件分发/">
                        <span class="tag">事件分发</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动画/">
                        <span class="tag">动画</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/四大组件/">
                        <span class="tag">四大组件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/局域网/">
                        <span class="tag">局域网</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/屏幕适配/">
                        <span class="tag">屏幕适配</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/布局控件/">
                        <span class="tag">布局控件</span>
                        <span class="tag is-grey">31</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/应用/">
                        <span class="tag">应用</span>
                        <span class="tag is-grey">24</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发问题/">
                        <span class="tag">开发问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开机动画/">
                        <span class="tag">开机动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源库/">
                        <span class="tag">开源库</span>
                        <span class="tag is-grey">28</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/微信公众号/">
                        <span class="tag">微信公众号</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/快捷键/">
                        <span class="tag">快捷键</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手电筒/">
                        <span class="tag">手电筒</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/技术选型/">
                        <span class="tag">技术选型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/文本/">
                        <span class="tag">文本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/框架/">
                        <span class="tag">框架</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码分析/">
                        <span class="tag">源码分析</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/百度地图/">
                        <span class="tag">百度地图</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统源码/">
                        <span class="tag">系统源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/终端/">
                        <span class="tag">终端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/聚合数据/">
                        <span class="tag">聚合数据</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自定义View/">
                        <span class="tag">自定义View</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟化/">
                        <span class="tag">虚拟化</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/译文/">
                        <span class="tag">译文</span>
                        <span class="tag is-grey">20</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪吃蛇/">
                        <span class="tag">贪吃蛇</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源/">
                        <span class="tag">资源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源配置/">
                        <span class="tag">资源配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/辅助工具/">
                        <span class="tag">辅助工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置/">
                        <span class="tag">配置</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/06/10/《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-10T12:51:43.000Z">2019-06-10</time></div>
                    <a href="/2019/06/10/《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays/" class="has-link-black-ter is-size-6">《LeetCode-0004》 寻找两个有序数组的中位数-Median of Two Sorted Arrays</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/01/《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-01T00:53:29.000Z">2019-06-01</time></div>
                    <a href="/2019/06/01/《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters/" class="has-link-black-ter is-size-6">《LeetCode-0003》 无重复字符的最长子串-Longest Substring Without Repeating Characters</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/05/26/《LeetCode-0002》 两数相加-Add Two Numbers/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0002》 两数相加-Add Two Numbers">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-26T07:01:33.000Z">2019-05-26</time></div>
                    <a href="/2019/05/26/《LeetCode-0002》 两数相加-Add Two Numbers/" class="has-link-black-ter is-size-6">《LeetCode-0002》 两数相加-Add Two Numbers</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/05/26/《LeetCode-0001》 两数之和-TwoSum/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《LeetCode-0001》 两数之和-TwoSum">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-26T01:53:45.000Z">2019-05-26</time></div>
                    <a href="/2019/05/26/《LeetCode-0001》 两数之和-TwoSum/" class="has-link-black-ter is-size-6">《LeetCode-0001》 两数之和-TwoSum</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/LeetCode/">LeetCode</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/01/MacOS 10.11.6 Android源码编译并刷机/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MacOS 10.11.6 Android源码编译并刷机">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-01T11:57:08.000Z">2019-04-01</time></div>
                    <a href="/2019/04/01/MacOS 10.11.6 Android源码编译并刷机/" class="has-link-black-ter is-size-6">MacOS 10.11.6 Android源码编译并刷机</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Android系统/">Android系统</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/04/">
                <span class="level-start">
                    <span class="level-item">四月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Aandroid实战/">
                        <span class="tag">Aandroid实战</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Studio/">
                        <span class="tag">Android Studio</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android基础/">
                        <span class="tag">Android基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android实战/">
                        <span class="tag">Android实战</span>
                        <span class="tag is-grey">27</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android开源库/">
                        <span class="tag">Android开源库</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android源码/">
                        <span class="tag">Android源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BroadcastReceiver/">
                        <span class="tag">BroadcastReceiver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CentOS/">
                        <span class="tag">CentOS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CodeStyle/">
                        <span class="tag">CodeStyle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Drawable/">
                        <span class="tag">Drawable</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/EditText/">
                        <span class="tag">EditText</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/FileProvider/">
                        <span class="tag">FileProvider</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flex/">
                        <span class="tag">Flex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flutter/">
                        <span class="tag">Flutter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Fragment/">
                        <span class="tag">Fragment</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Framework/">
                        <span class="tag">Framework</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gank-io/">
                        <span class="tag">Gank.io</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gitlab/">
                        <span class="tag">Gitlab</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HAL/">
                        <span class="tag">HAL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/IDEA插件/">
                        <span class="tag">IDEA插件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JetPack/">
                        <span class="tag">JetPack</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MPAndroidChart/">
                        <span class="tag">MPAndroidChart</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MacOS/">
                        <span class="tag">MacOS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MultiDex/">
                        <span class="tag">MultiDex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mysql/">
                        <span class="tag">Mysql</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NDK/">
                        <span class="tag">NDK</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PMDReader/">
                        <span class="tag">PMDReader</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Picasso/">
                        <span class="tag">Picasso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PowerDesign/">
                        <span class="tag">PowerDesign</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Realm/">
                        <span class="tag">Realm</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RecyclerView/">
                        <span class="tag">RecyclerView</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Retrofit/">
                        <span class="tag">Retrofit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RxJava/">
                        <span class="tag">RxJava</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Service/">
                        <span class="tag">Service</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Smali/">
                        <span class="tag">Smali</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/TabLayout/">
                        <span class="tag">TabLayout</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/View/">
                        <span class="tag">View</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WanANdroid/">
                        <span class="tag">WanANdroid</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WebService/">
                        <span class="tag">WebService</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Xen/">
                        <span class="tag">Xen</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/allowBackup/">
                        <span class="tag">allowBackup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/事件分发/">
                        <span class="tag">事件分发</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动画/">
                        <span class="tag">动画</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/四大组件/">
                        <span class="tag">四大组件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/局域网/">
                        <span class="tag">局域网</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/屏幕适配/">
                        <span class="tag">屏幕适配</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/布局控件/">
                        <span class="tag">布局控件</span>
                        <span class="tag is-grey">31</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/应用/">
                        <span class="tag">应用</span>
                        <span class="tag is-grey">24</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发问题/">
                        <span class="tag">开发问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开机动画/">
                        <span class="tag">开机动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源库/">
                        <span class="tag">开源库</span>
                        <span class="tag is-grey">28</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/微信公众号/">
                        <span class="tag">微信公众号</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/快捷键/">
                        <span class="tag">快捷键</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手电筒/">
                        <span class="tag">手电筒</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/技术选型/">
                        <span class="tag">技术选型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/文本/">
                        <span class="tag">文本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/框架/">
                        <span class="tag">框架</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码分析/">
                        <span class="tag">源码分析</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/百度地图/">
                        <span class="tag">百度地图</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统源码/">
                        <span class="tag">系统源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/终端/">
                        <span class="tag">终端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/聚合数据/">
                        <span class="tag">聚合数据</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自定义View/">
                        <span class="tag">自定义View</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟化/">
                        <span class="tag">虚拟化</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/译文/">
                        <span class="tag">译文</span>
                        <span class="tag is-grey">20</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪吃蛇/">
                        <span class="tag">贪吃蛇</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源/">
                        <span class="tag">资源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源配置/">
                        <span class="tag">资源配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/辅助工具/">
                        <span class="tag">辅助工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置/">
                        <span class="tag">配置</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="onlyloveyd" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 yidong&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>