<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>标签: 开源库 - onlyloveyd</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="小码过河，人人喊累">
<meta name="keywords" content="onlyloveyd">
<meta property="og:type" content="website">
<meta property="og:title" content="onlyloveyd">
<meta property="og:url" content="http://yoursite.com/tags/开源库/page/2/index.html">
<meta property="og:site_name" content="onlyloveyd">
<meta property="og:description" content="小码过河，人人喊累">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="onlyloveyd">
<meta name="twitter:description" content="小码过河，人人喊累">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="onlyloveyd" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">标签</a></li>
            <li class="is-active"><a href="#" aria-current="page">开源库</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-19T05:40:47.000Z">2017-04-19</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    28 分钟 读完 (大约 4179 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/04/19/《Android 开源库》 FlycoTabLayout 从头到脚/">《Android 开源库》 FlycoTabLayout 从头到脚</a>
            
        </h1>
        <div class="content">
            <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a><a href></a>简介</h2><p> <a href="https://github.com/H07000223/FlycoTabLayout" target="_blank" rel="noopener">FlycoTabLayout</a>，是一个比Google原生TabLayout 功能更强大的TabLayout库。目前有3种TabLayout：</p>
<ul>
<li><p>SlidingTabLayout </p>
</li>
<li><p>CommonTabLayout </p>
</li>
<li><p>SegmentTabLayout  具体介绍和使用方法参考开源库的<a href="https://github.com/H07000223/FlycoTabLayout/blob/master/README_CN.md" target="_blank" rel="noopener">Wiki</a></p>
<p>官方示例：<br><img src="https://img-blog.csdn.net/20170417203132272" alt="这里写图片描述"></p>
</li>
</ul>
<hr>
<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a><a href></a>源码分析</h2><pre><code>共有属性名称                     | 格式        | 描述                                
-------------------------- | --------- | ---------------------------------- 
tl_indicator_color         | color     | 设置显示器颜色                           
tl_indicator_height        | dimension | 设置显示器高度                           
tl_indicator_margin_left   | dimension | 设置显示器margin,当indicator_width大于0,无效
tl_indicator_margin_top    | dimension | 设置显示器margin,当indicator_width大于0,无效
tl_indicator_margin_right  | dimension | 设置显示器margin,当indicator_width大于0,无效
tl_indicator_margin_bottom | dimension | 设置显示器margin,当indicator_width大于0,无效
tl_indicator_corner_radius | dimension | 设置显示器圆角弧度                         
tl_divider_color           | color     | 设置分割线颜色                           
tl_divider_width           | dimension | 设置分割线宽度                           
tl_divider_padding         | dimension | 设置分割线的paddingTop和paddingBottom    
tl_tab_padding             | dimension | 设置tab的paddingLeft和paddingRight    
tl_tab_space_equal         | boolean   | 设置tab大小等分                         
tl_tab_width               | dimension | 设置tab固定大小                         
tl_textsize                | dimension | 设置字体大小                            
tl_textSelectColor         | color     | 设置字体选中颜色                          
tl_textUnselectColor       | color     | 设置字体未选中颜色                         
tl_textBold                | boolean   | 设置字体加粗                            
tl_textAllCaps             | boolean   | 设置字体全大写                           </code></pre><h3 id="1-SlidingTabLayout"><a href="#1-SlidingTabLayout" class="headerlink" title="1. SlidingTabLayout"></a><a href></a>1. SlidingTabLayout</h3><h4 id="1-1-特有属性"><a href="#1-1-特有属性" class="headerlink" title="1.1 特有属性"></a><a href></a>1.1 特有属性</h4><pre><code>特有属性                           | 格式        | 描述                                        
------------------------------ | --------- | ------------------------------------------ 
tl_indicator_width             | dimension | 设置显示器固定宽度                                 
tl_indicator_gravity           | enum      | 设置显示器上方(TOP)还是下方(BOTTOM),只对常规显示器有用        
tl_indicator_style             | enum      | 设置显示器为常规(NORMAL)或三角形(TRIANGLE)或背景色块(BLOCK)
tl_indicator_width_equal_title | boolean   | 设置显示器与标题一样长(only for SlidingTabLayout)    
tl_underline_color             | color     | 设置下划线颜色                                   
tl_underline_height            | dimension | 设置下划线高度                                   
tl_underline_gravity           | enum      | 设置下划线上方(TOP)还是下方(BOTTOM)                  </code></pre><h4 id="1-2-类结构"><a href="#1-2-类结构" class="headerlink" title="1.2 类结构"></a><a href></a>1.2 类结构</h4><h5 id="1-2-1-构造方法"><a href="#1-2-1-构造方法" class="headerlink" title="1.2.1 构造方法"></a><a href></a>1.2.1 构造方法</h5><p> <img src="https://img-blog.csdn.net/20170418144706207" alt="这里写图片描述"><br> 第一个调用第二个，第二个调用第三个，第三个获取自定义属性值。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public SlidingTabLayout(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">    super(context, attrs, defStyleAttr);</span><br><span class="line">    setFillViewport(true);//设置滚动视图是否可以伸缩其内容以填充视口</span><br><span class="line">    setWillNotDraw(false);//重写onDraw方法,需要调用这个方法来清除flag</span><br><span class="line">    setClipChildren(false);//不限制child在其范围内绘制</span><br><span class="line">    setClipToPadding(false);//滚动时child可以绘制到padding区域</span><br><span class="line"></span><br><span class="line">    this.mContext = context;</span><br><span class="line">    mTabsContainer = new LinearLayout(context);//tab容器</span><br><span class="line">    addView(mTabsContainer);//添加到HorizontalScrollView中</span><br><span class="line"></span><br><span class="line">    obtainAttributes(context, attrs);//获取自定义属性，常用的方法，TypedArray记得回收</span><br><span class="line"></span><br><span class="line">    //获取layout_height属性的值，这个方法比较溜，之前没见过</span><br><span class="line">    String height = attrs.getAttributeValue(&quot;http://schemas.android.com/apk/res/android&quot;, &quot;layout_height&quot;);</span><br><span class="line"></span><br><span class="line">   //针对height做处理</span><br><span class="line">   if (height.equals(ViewGroup.LayoutParams.MATCH_PARENT + &quot;&quot;)) &#123;</span><br><span class="line">    &#125; else if (height.equals(ViewGroup.LayoutParams.WRAP_CONTENT + &quot;&quot;)) &#123;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        int[] systemAttrs = &#123;android.R.attr.layout_height&#125;;</span><br><span class="line">        TypedArray a = context.obtainStyledAttributes(attrs, systemAttrs);</span><br><span class="line">        //获取高度</span><br><span class="line">        mHeight = a.getDimensionPixelSize(0, ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class="line">        a.recycle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="1-2-2-ViewPager"><a href="#1-2-2-ViewPager" class="headerlink" title="1.2.2 ViewPager"></a><a href></a>1.2.2 ViewPager</h5><p> <img src="https://img-blog.csdn.net/20170418151748031" alt="这里写图片描述"><br> <img src="https://img-blog.csdn.net/20170418151831172" alt="这里写图片描述"></p>
<pre><code>方法                                                      | 描述                  
------------------------------------------------------- | -------------------- 
setViewPager(ViewPager vp)                              | 设置ViewPager内容       
public void setViewPager(ViewPager vp, String[] titles) | 设置ViewPager内容和标签页的标题</code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/** 关联ViewPager */</span><br><span class="line">public void setViewPager(ViewPager vp) &#123;</span><br><span class="line">    if (vp == null || vp.getAdapter() == null) &#123;</span><br><span class="line">        throw new IllegalStateException(&quot;ViewPager or ViewPager adapter can not be NULL !&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    /*本地赋值*/</span><br><span class="line">    this.mViewPager = vp;</span><br><span class="line">    /*重新绑定OnPageChangeListener*/</span><br><span class="line">    this.mViewPager.removeOnPageChangeListener(this);</span><br><span class="line">    this.mViewPager.addOnPageChangeListener(this);</span><br><span class="line">    /*viewpager变化，tab页响应处理处理*/</span><br><span class="line">    notifyDataSetChanged();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/** 更新数据 */</span><br><span class="line">public void notifyDataSetChanged() &#123;</span><br><span class="line">    mTabsContainer.removeAllViews();//清空tab</span><br><span class="line">    this.mTabCount = mTitles == null ? mViewPager.getAdapter().getCount() : mTitles.size();//获取tab数量，优先级mTitles &gt; ViewPager的默认标题</span><br><span class="line"></span><br><span class="line">    /*添加tab*/</span><br><span class="line">    View tabView;</span><br><span class="line">    for (int i = 0; i &lt; mTabCount; i++) &#123;</span><br><span class="line">        tabView = View.inflate(mContext, R.layout.layout_tab, null);</span><br><span class="line">        CharSequence pageTitle = mTitles == null ? mViewPager.getAdapter().getPageTitle(i) : mTitles.get(i);</span><br><span class="line">        addTab(i, pageTitle.toString(), tabView);</span><br><span class="line">    &#125;</span><br><span class="line">    //更新选中未选中状态更新tab</span><br><span class="line">    updateTabStyles();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">/** 创建并添加tab */</span><br><span class="line">  private void addTab(final int position, String title, View tabView) &#123;</span><br><span class="line">      //设置标题</span><br><span class="line">      TextView tv_tab_title = (TextView) tabView.findViewById(R.id.tv_tab_title);</span><br><span class="line">      if (tv_tab_title != null) &#123;</span><br><span class="line">          if (title != null) tv_tab_title.setText(title);</span><br><span class="line">      &#125;</span><br><span class="line">      //绑定点击事件，与ViewPager联动</span><br><span class="line">      tabView.setOnClickListener(new OnClickListener() &#123;</span><br><span class="line">          @Override</span><br><span class="line">          public void onClick(View v) &#123;</span><br><span class="line">              int position = mTabsContainer.indexOfChild(v);</span><br><span class="line">              if (position != -1) &#123;</span><br><span class="line">                  if (mViewPager.getCurrentItem() != position) &#123;</span><br><span class="line">                      if (mSnapOnTabClick) &#123;</span><br><span class="line">                         // transition immediately</span><br><span class="line">                         mViewPager.setCurrentItem(position, false);</span><br><span class="line">                      &#125; else &#123;</span><br><span class="line">                          //smoothly scroll to</span><br><span class="line">                          mViewPager.setCurrentItem(position);</span><br><span class="line">                      &#125;</span><br><span class="line"></span><br><span class="line">                      if (mListener != null) &#123;</span><br><span class="line">                          //自定义tab点击事件处理</span><br><span class="line">                          mListener.onTabSelect(position);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125; else &#123;</span><br><span class="line">                      if (mListener != null) &#123;</span><br><span class="line">                          //自定义Reselect事件处理</span><br><span class="line">                          mListener.onTabReselect(position);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      /** 每一个Tab的布局参数，mTabSpaceEqual 属性控制是否均分 */</span><br><span class="line">      LinearLayout.LayoutParams lp_tab = mTabSpaceEqual ?</span><br><span class="line">              new LinearLayout.LayoutParams(0,  </span><br><span class="line">              LayoutParams.MATCH_PARENT, 1.0f) :</span><br><span class="line">              new </span><br><span class="line">              LinearLayout.LayoutParams(</span><br><span class="line">              LayoutParams.WRAP_CONTENT,    </span><br><span class="line">              LayoutParams.MATCH_PARENT);</span><br><span class="line">      if (mTabWidth &gt; 0) &#123;</span><br><span class="line">          lp_tab = new LinearLayout.LayoutParams((int) mTabWidth, LayoutParams.MATCH_PARENT);</span><br><span class="line">      &#125;</span><br><span class="line">      //添加到Tab容器</span><br><span class="line">      mTabsContainer.addView(tabView, position, lp_tab);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">private void updateTabStyles() &#123;</span><br><span class="line">    //遍历设置标题选中颜色，未选中颜色，字体大小，大小写，粗体字</span><br><span class="line">    for (int i = 0; i &lt; mTabCount; i++) &#123;</span><br><span class="line">        View v = mTabsContainer.getChildAt(i);</span><br><span class="line">        TextView tv_tab_title = (TextView) v.findViewById(R.id.tv_tab_title);</span><br><span class="line">        if (tv_tab_title != null) &#123;</span><br><span class="line">            tv_tab_title.setTextColor(i == mCurrentTab ? mTextSelectColor : mTextUnselectColor);</span><br><span class="line">            tv_tab_title.setTextSize(TypedValue.COMPLEX_UNIT_PX, mTextsize);</span><br><span class="line">            tv_tab_title.setPadding((int) mTabPadding, 0, (int) mTabPadding, 0);</span><br><span class="line">            if (mTextAllCaps) &#123;</span><br><span class="line">                tv_tab_title.setText(tv_tab_title.getText().toString().toUpperCase());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (mTextBold == TEXT_BOLD_BOTH) &#123;</span><br><span class="line">                tv_tab_title.getPaint().setFakeBoldText(true);</span><br><span class="line">            &#125; else if (mTextBold == TEXT_BOLD_NONE) &#123;</span><br><span class="line">                tv_tab_title.getPaint().setFakeBoldText(false);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<pre><code>方法                                                                                                      | 描述                                                                   
------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- 
setViewPager(ViewPager vp, String[] titles, FragmentActivity fa, ArrayList&amp;lt; Fragment &amp;gt; fragments) | 设置ViewPager，标题内容，FragmentActivity和用于显示的Fragment,用来设置ViewPager的Adapter</code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/** 关联ViewPager,用于连适配器都不想自己实例化的情况 */</span><br><span class="line">public void setViewPager(ViewPager vp, String[] titles, FragmentActivity fa, ArrayList&lt;Fragment&gt; fragments) &#123;</span><br><span class="line">    if (vp == null) &#123;</span><br><span class="line">        throw new IllegalStateException(&quot;ViewPager can not be NULL !&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (titles == null || titles.length == 0) &#123;</span><br><span class="line">        throw new IllegalStateException(&quot;Titles can not be EMPTY !&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.mViewPager = vp;</span><br><span class="line">    /*通过传入的参数构建FragmentPagerAdapter，设置到ViewPager*/</span><br><span class="line">    this.mViewPager.setAdapter(new InnerPagerAdapter(fa.getSupportFragmentManager(), fragments, titles));</span><br><span class="line"></span><br><span class="line">    this.mViewPager.removeOnPageChangeListener(this);</span><br><span class="line">    this.mViewPager.addOnPageChangeListener(this);</span><br><span class="line">    notifyDataSetChanged();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 看下这个内部的InnerPagerAdapter,静态Fragment,不销毁重建，只更新数据内容。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class InnerPagerAdapter extends FragmentPagerAdapter &#123;</span><br><span class="line">    private ArrayList&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;();</span><br><span class="line">    private String[] titles;</span><br><span class="line"></span><br><span class="line">    public InnerPagerAdapter(FragmentManager fm, ArrayList&lt;Fragment&gt; fragments, String[] titles) &#123;</span><br><span class="line">        super(fm);</span><br><span class="line">        this.fragments = fragments;</span><br><span class="line">        this.titles = titles;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getCount() &#123;</span><br><span class="line">        return fragments.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public CharSequence getPageTitle(int position) &#123;</span><br><span class="line">        return titles[position];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Fragment getItem(int position) &#123;</span><br><span class="line">        return fragments.get(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroyItem(ViewGroup container, int position, Object object) &#123;</span><br><span class="line">        // 覆写destroyItem并且空实现,这样每个Fragment中的视图就不会被销毁</span><br><span class="line">        // super.destroyItem(container, position, object);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getItemPosition(Object object) &#123;</span><br><span class="line">        return PagerAdapter.POSITION_NONE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<pre><code>方法                                                                           | 描述                                                                                      
---------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- 
onPageScrolled(int position, float positionOffset, int positionOffsetPixels) | 页面滚动，position为当前位置，positionOffset范围[0,1),从当前到下一页，positionOffsetPixels从当前位置滚动的offset,单位px
onPageSelected(int position)                                                 | 选中位置                                                                                    
onPageScrollStateChanged(int state)                                          | 滚动状态改变                                                                                  </code></pre><blockquote>
<p>SCROLL_STATE_IDLE(pager处于空闲状态)<br> SCROLL_STATE_DRAGGING( pager处于正在拖拽中)<br> SCROLL_STATE_SETTLING(pager正在自动沉降，相当于松手后，pager恢复到一个完整pager的过程)</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) &#123;</span><br><span class="line">    /**</span><br><span class="line">     * position:当前View的位置</span><br><span class="line">     * mCurrentPositionOffset:当前View的偏移量比例.[0,1)</span><br><span class="line">     */</span><br><span class="line">    this.mCurrentTab = position;</span><br><span class="line">    this.mCurrentPositionOffset = positionOffset;</span><br><span class="line">    /*标签栏根据ViewPager的滚动状态联动，滚动到对应位置*/</span><br><span class="line">    scrollToCurrentTab();</span><br><span class="line">    /*触发重绘*/</span><br><span class="line">    invalidate();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onPageSelected(int position) &#123;</span><br><span class="line">    /*根据ViewPager选中状态调整标签页的选中状态*/</span><br><span class="line">    updateTabSelection(position);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onPageScrollStateChanged(int state) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/** HorizontalScrollView滚到当前tab,并且居中显示 */</span><br><span class="line">  private void scrollToCurrentTab() &#123;</span><br><span class="line">      if (mTabCount &lt;= 0) &#123;</span><br><span class="line">          return;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      int offset = (int) (mCurrentPositionOffset * mTabsContainer.getChildAt(mCurrentTab).getWidth());</span><br><span class="line">      /**当前Tab的left+当前Tab的Width乘以positionOffset*/</span><br><span class="line">      int newScrollX = mTabsContainer.getChildAt(mCurrentTab).getLeft() + offset;</span><br><span class="line"></span><br><span class="line">      if (mCurrentTab &gt; 0 || offset &gt; 0) &#123;</span><br><span class="line">          /**HorizontalScrollView移动到当前tab,并居中*/</span><br><span class="line">          newScrollX -= getWidth() / 2 - getPaddingLeft();</span><br><span class="line">          calcIndicatorRect();</span><br><span class="line">          newScrollX += ((mTabRect.right - mTabRect.left) / 2);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (newScrollX != mLastScrollX) &#123;</span><br><span class="line">          mLastScrollX = newScrollX;</span><br><span class="line">          /** scrollTo（int x,int y）:x,y代表的不是坐标点,而是偏移量</span><br><span class="line">           *  x:表示离起始位置的x水平方向的偏移量</span><br><span class="line">           *  y:表示离起始位置的y垂直方向的偏移量</span><br><span class="line">           */</span><br><span class="line">          scrollTo(newScrollX, 0);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/*根据是否选中设置字体颜色和粗体*/</span><br><span class="line">private void updateTabSelection(int position) &#123;</span><br><span class="line">    for (int i = 0; i &lt; mTabCount; ++i) &#123;</span><br><span class="line">        View tabView = mTabsContainer.getChildAt(i);</span><br><span class="line">        final boolean isSelect = i == position;</span><br><span class="line">        TextView tab_title = (TextView) tabView.findViewById(R.id.tv_tab_title);</span><br><span class="line"></span><br><span class="line">        if (tab_title != null) &#123;</span><br><span class="line">            tab_title.setTextColor(isSelect ? mTextSelectColor : mTextUnselectColor);</span><br><span class="line">            if (mTextBold == TEXT_BOLD_WHEN_SELECT) &#123;</span><br><span class="line">                tab_title.getPaint().setFakeBoldText(isSelect);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="1-2-3-Tab相关"><a href="#1-2-3-Tab相关" class="headerlink" title="1.2.3 Tab相关"></a><a href></a>1.2.3 Tab相关</h5><p> <img src="https://img-blog.csdn.net/20170419083258479" alt="这里写图片描述"><br> <img src="https://img-blog.csdn.net/20170419083307602" alt="这里写图片描述"><br> <img src="https://img-blog.csdn.net/20170419083321901" alt="这里写图片描述"></p>
<pre><code>方法                      | 描述              
----------------------- | ---------------- 
addNewTab(String title) | 提供给外部使用的新增tab的方法</code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void addNewTab(String title) &#123;</span><br><span class="line">    View tabView = View.inflate(mContext, R.layout.layout_tab, null);</span><br><span class="line">    if (mTitles != null) &#123;</span><br><span class="line">        mTitles.add(title);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CharSequence pageTitle = mTitles == null ? mViewPager.getAdapter().getPageTitle(mTabCount) : mTitles.get(mTabCount);</span><br><span class="line">    addTab(mTabCount, pageTitle.toString(), tabView);</span><br><span class="line">    this.mTabCount = mTitles == null ? mViewPager.getAdapter().getCount() : mTitles.size();</span><br><span class="line"></span><br><span class="line">    updateTabStyles();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<pre><code>方法                                                  | 描述                                
--------------------------------------------------- | ---------------------------------- 
setCurrentTab(int currentTab)                       | 跳转到指定tab,是否平滑的滚动过去由系统控制           
setCurrentTab(int currentTab, boolean smoothScroll) | 跳转到制指定tab, smoothScroll控制是否平滑的滚动过去</code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public void setCurrentTab(int currentTab) &#123;</span><br><span class="line">    this.mCurrentTab = currentTab;</span><br><span class="line">    mViewPager.setCurrentItem(currentTab);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void setCurrentTab(int currentTab, boolean smoothScroll) &#123;</span><br><span class="line">    this.mCurrentTab = currentTab;</span><br><span class="line">    mViewPager.setCurrentItem(currentTab, smoothScroll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="1-2-4-Getter和Setter"><a href="#1-2-4-Getter和Setter" class="headerlink" title="1.2.4 Getter和Setter"></a><a href></a>1.2.4 Getter和Setter</h5><p> 不做赘述</p>
<h5 id="1-2-5-MsgView相关（未读信息）"><a href="#1-2-5-MsgView相关（未读信息）" class="headerlink" title="1.2.5 MsgView相关（未读信息）"></a><a href></a>1.2.5 MsgView相关（未读信息）</h5><p> <img src="https://img-blog.csdn.net/20170419084106280" alt="这里写图片描述"></p>
<pre><code>方法                                                                 | 描述                                           
------------------------------------------------------------------ | --------------------------------------------- 
showMsg(int position, int num)                                     | 显示未读消息，position为tab位置，num小于等于0显示红点,num大于0显示数字
showDot(int position)                                              | 显示未读红点， position为tab位置                       
hideMsg(int position)                                              | 隐藏未读消息， position为tab位置                       
setMsgMargin(int position, float leftPadding, float bottomPadding) | 设置未读消息偏移,原点为文字的右上角.当控件高度固定,消息提示位置易控制,显示效果佳   
getMsgView(int position)                                           | 当前类只提供了少许设置未读消息属性的方法,可以通过该方法获取MsgView对象从而各种设置</code></pre><h3 id="2-CommonTabLayout"><a href="#2-CommonTabLayout" class="headerlink" title="2. CommonTabLayout"></a><a href></a>2. CommonTabLayout</h3><h4 id="2-1-特有属性"><a href="#2-1-特有属性" class="headerlink" title="2.1 特有属性"></a><a href></a>2.1 特有属性</h4><pre><code>特有属性                       | 格式        | 描述                                                                     
-------------------------- | --------- | ----------------------------------------------------------------------- 
tl_indicator_width         | dimension | 设置显示器固定宽度                                                              
tl_indicator_gravity       | enum      | 设置显示器上方(TOP)还是下方(BOTTOM),只对常规显示器有用                                     
tl_indicator_style         | enum      | 设置显示器为常规(NORMAL)或三角形(TRIANGLE)或背景色块(BLOCK)                             
tl_indicator_anim_enable   | boolean   | 设置显示器支持动画(only for CommonTabLayout)                                    
tl_indicator_anim_duration | integer   | 设置显示器动画时间(only for CommonTabLayout)                                    
tl_indicator_bounce_enable | boolean   | 设置显示器支持动画回弹效果(only for CommonTabLayout)                                
tl_underline_color         | color     | 设置下划线颜色                                                                
tl_underline_height        | dimension | 设置下划线高度                                                                
tl_underline_gravity       | enum      | 设置下划线上方(TOP)还是下方(BOTTOM)                                               
tl_iconWidth               | dimension | 设置icon宽度(仅支持CommonTabLayout)                                           
tl_iconHeight              | dimension | 设置icon高度(仅支持CommonTabLayout)                                           
tl_iconVisible             | boolean   | 设置icon是否可见(仅支持CommonTabLayout)                                         
tl_iconGravity             | enum      | 设置icon显示位置,对应Gravity中常量值,左上右下(仅支持CommonTabLayout)，LEFT，RIGHT，TOP，BOTTOM
tl_iconMargin              | dimension | 设置icon与文字间距(仅支持CommonTabLayout)                                        </code></pre><h4 id="2-2-区别于SlidingTabLayout"><a href="#2-2-区别于SlidingTabLayout" class="headerlink" title="2.2 区别于SlidingTabLayout"></a><a href></a>2.2 区别于SlidingTabLayout</h4><ul>
<li>不依赖于ViewPager，可以与其他组件搭配 </li>
<li>支持自定义Tab样式，主要体现在常用的图标+文字的形式。 </li>
<li>SlidingTabLayout继承HorizontalScrollView而CommonTabLayout继承FrameLayout  <h4 id="2-3-类结构"><a href="#2-3-类结构" class="headerlink" title="2.3 类结构"></a><a href></a>2.3 类结构</h4></li>
</ul>
<h5 id="2-3-1-构造方法"><a href="#2-3-1-构造方法" class="headerlink" title="2.3.1 构造方法"></a><a href></a>2.3.1 构造方法</h5><p> <img src="https://img-blog.csdn.net/20170419085601117" alt="这里写图片描述"><br> 与SlidingTabLayout实现类似，获取的属性值不太一样而已。多出一个动画的内容，点击某一个Tab后，indicator的移动动画效果</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mValueAnimator = ValueAnimator.ofObject(new PointEvaluator(), mLastP, mCurrentP);</span><br><span class="line">mValueAnimator.addUpdateListener(this);</span><br></pre></td></tr></table></figure>


<h5 id="2-3-2-动画相关"><a href="#2-3-2-动画相关" class="headerlink" title="2.3.2 动画相关"></a><a href></a>2.3.2 动画相关</h5><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class IndicatorPoint &#123;</span><br><span class="line">    public float left;</span><br><span class="line">    public float right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private IndicatorPoint mCurrentP = new IndicatorPoint();</span><br><span class="line">private IndicatorPoint mLastP = new IndicatorPoint();</span><br><span class="line"></span><br><span class="line">class PointEvaluator implements TypeEvaluator&lt;IndicatorPoint&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public IndicatorPoint evaluate(float fraction, IndicatorPoint startValue, IndicatorPoint endValue) &#123;</span><br><span class="line">        float left = startValue.left + fraction * (endValue.left - startValue.left);</span><br><span class="line">        float right = startValue.right + fraction * (endValue.right - startValue.right);</span><br><span class="line">        IndicatorPoint point = new IndicatorPoint();</span><br><span class="line">        point.left = left;</span><br><span class="line">        point.right = right;</span><br><span class="line">        return point;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onAnimationUpdate(ValueAnimator animation) &#123;</span><br><span class="line">    View currentTabView = mTabsContainer.getChildAt(this.mCurrentTab);</span><br><span class="line">    IndicatorPoint p = (IndicatorPoint) animation.getAnimatedValue();</span><br><span class="line">    mIndicatorRect.left = (int) p.left;</span><br><span class="line">    mIndicatorRect.right = (int) p.right;</span><br><span class="line"></span><br><span class="line">    if (mIndicatorWidth &lt; 0) &#123;   //indicatorWidth小于0时,原jpardogo&apos;s PagerSlidingTabStrip</span><br><span class="line"></span><br><span class="line">    &#125; else &#123;//indicatorWidth大于0时,圆角矩形以及三角形</span><br><span class="line">        float indicatorLeft = p.left + (currentTabView.getWidth() - mIndicatorWidth) / 2;</span><br><span class="line"></span><br><span class="line">        mIndicatorRect.left = (int) indicatorLeft;</span><br><span class="line">        mIndicatorRect.right = (int) (mIndicatorRect.left + mIndicatorWidth);</span><br><span class="line">    &#125;</span><br><span class="line">    invalidate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="2-3-3-Tab相关"><a href="#2-3-3-Tab相关" class="headerlink" title="2.3.3 Tab相关"></a><a href></a>2.3.3 Tab相关</h5><p> <img src="https://img-blog.csdn.net/20170419090336135" alt="这里写图片描述"></p>
<pre><code>方法                                                                                                                                       | 描述                 
---------------------------------------------------------------------------------------------------------------------------------------- | ------------------- 
setTabData(ArrayList&amp;lt; CustomTabEntity&amp;gt; tabEntitys)                                                                                 | 设置tab entity       
setTabData(ArrayList&amp;lt; CustomTabEntity&amp;gt; tabEntitys, FragmentActivity fa, int containerViewId, ArrayList&amp;lt; Fragment&amp;gt; fragments) | 关联数据支持同时切换fragments
notifyDataSetChanged()                                                                                                                   | 更新数据               
setCurrentTab(int currentTab)                                                                                                            | 设置当前tab            </code></pre><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public void setTabData(ArrayList&lt;CustomTabEntity&gt; tabEntitys) &#123;</span><br><span class="line">    if (tabEntitys == null || tabEntitys.size() == 0) &#123;</span><br><span class="line">        throw new IllegalStateException(&quot;TabEntitys can not be NULL or EMPTY !&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.mTabEntitys.clear();</span><br><span class="line">    /*设置tab标签*/</span><br><span class="line">    this.mTabEntitys.addAll(tabEntitys);</span><br><span class="line">    /*更新数据*/</span><br><span class="line">    notifyDataSetChanged();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/** 更新数据 */</span><br><span class="line">public void notifyDataSetChanged() &#123;</span><br><span class="line">    /*清空容器中的tab*/</span><br><span class="line">    mTabsContainer.removeAllViews();</span><br><span class="line">    this.mTabCount = mTabEntitys.size();</span><br><span class="line">    View tabView;</span><br><span class="line">    /*根据图标的gravity构建不同的tab样式，图标支持上下左右*/</span><br><span class="line">    for (int i = 0; i &lt; mTabCount; i++) &#123;</span><br><span class="line">        if (mIconGravity == Gravity.LEFT) &#123;</span><br><span class="line">            tabView = View.inflate(mContext, R.layout.layout_tab_left, null);</span><br><span class="line">        &#125; else if (mIconGravity == Gravity.RIGHT) &#123;</span><br><span class="line">            tabView = View.inflate(mContext, R.layout.layout_tab_right, null);</span><br><span class="line">        &#125; else if (mIconGravity == Gravity.BOTTOM) &#123;</span><br><span class="line">            tabView = View.inflate(mContext, R.layout.layout_tab_bottom, null);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            tabView = View.inflate(mContext, R.layout.layout_tab_top, null);</span><br><span class="line">        &#125;</span><br><span class="line">        /*i添加到tag,但从这个类的方法上看，这一步没有什么必要，因为addTab会传入i,addTab中直接使用i就好，但是如果我们在外部拿到tabView,就可以直接指导它的position,不用循环遍历，还是挺方便的*/</span><br><span class="line">        tabView.setTag(i);</span><br><span class="line">        /*添加tab*/</span><br><span class="line">        addTab(i, tabView);</span><br><span class="line">    &#125;</span><br><span class="line">    /*根据选中未选中状态更新tab显示效果*/</span><br><span class="line">    updateTabStyles();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/** 创建并添加tab */</span><br><span class="line">private void addTab(final int position, View tabView) &#123;</span><br><span class="line">    /*设置文本内容，title*/</span><br><span class="line">    TextView tv_tab_title = (TextView) tabView.findViewById(R.id.tv_tab_title);</span><br><span class="line">    tv_tab_title.setText(mTabEntitys.get(position).getTabTitle());</span><br><span class="line">    /*设置图标内容，添加未选中内容，后面根据选中未选中重新刷一次图片*/</span><br><span class="line">    ImageView iv_tab_icon = (ImageView) tabView.findViewById(R.id.iv_tab_icon);</span><br><span class="line">    iv_tab_icon.setImageResource(mTabEntitys.get(position).getTabUnselectedIcon());</span><br><span class="line"></span><br><span class="line">    /*设置tabView的点击事件*/</span><br><span class="line">    tabView.setOnClickListener(new OnClickListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onClick(View v) &#123;</span><br><span class="line">            /*前面设置的tab,也就是position*/</span><br><span class="line">            int position = (Integer) v.getTag();</span><br><span class="line">            if (mCurrentTab != position) &#123;</span><br><span class="line">                /*设置当前tab*/</span><br><span class="line">                setCurrentTab(position);</span><br><span class="line">                //有OnTabSelectListener则执行对应的处理</span><br><span class="line">                if (mListener != null) &#123;</span><br><span class="line">                    mListener.onTabSelect(position);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                if (mListener != null) &#123;</span><br><span class="line">                    mListener.onTabReselect(position);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    /** 每一个Tab的布局参数 ，根据是否均分设置不同的布局，若宽度不为0，则设置宽度*/</span><br><span class="line">    LinearLayout.LayoutParams lp_tab = mTabSpaceEqual ?</span><br><span class="line">            new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1.0f) :</span><br><span class="line">            new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);</span><br><span class="line">    if (mTabWidth &gt; 0) &#123;</span><br><span class="line">        lp_tab = new LinearLayout.LayoutParams((int) mTabWidth, LayoutParams.MATCH_PARENT);</span><br><span class="line">    &#125;</span><br><span class="line">    mTabsContainer.addView(tabView, position, lp_tab);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">/*和SlidingTabLayout相似，多了一个图标的处理*/</span><br><span class="line">private void updateTabStyles() &#123;</span><br><span class="line">    for (int i = 0; i &lt; mTabCount; i++) &#123;</span><br><span class="line">        View tabView = mTabsContainer.getChildAt(i);</span><br><span class="line">        tabView.setPadding((int) mTabPadding, 0, (int) mTabPadding, 0);</span><br><span class="line">        TextView tv_tab_title = (TextView) tabView.findViewById(R.id.tv_tab_title);</span><br><span class="line">        tv_tab_title.setTextColor(i == mCurrentTab ? mTextSelectColor : mTextUnselectColor);</span><br><span class="line">        tv_tab_title.setTextSize(TypedValue.COMPLEX_UNIT_PX, mTextsize);</span><br><span class="line">//            tv_tab_title.setPadding((int) mTabPadding, 0, (int) mTabPadding, 0);</span><br><span class="line">        if (mTextAllCaps) &#123;</span><br><span class="line">            tv_tab_title.setText(tv_tab_title.getText().toString().toUpperCase());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mTextBold == TEXT_BOLD_BOTH) &#123;</span><br><span class="line">            tv_tab_title.getPaint().setFakeBoldText(true);</span><br><span class="line">        &#125; else if (mTextBold == TEXT_BOLD_NONE) &#123;</span><br><span class="line">            tv_tab_title.getPaint().setFakeBoldText(false);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ImageView iv_tab_icon = (ImageView) tabView.findViewById(R.id.iv_tab_icon);</span><br><span class="line">        if (mIconVisible) &#123;</span><br><span class="line">            iv_tab_icon.setVisibility(View.VISIBLE);</span><br><span class="line">            CustomTabEntity tabEntity = mTabEntitys.get(i);</span><br><span class="line">            iv_tab_icon.setImageResource(i == mCurrentTab ? tabEntity.getTabSelectedIcon() : tabEntity.getTabUnselectedIcon());</span><br><span class="line">            LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(</span><br><span class="line">                    mIconWidth &lt;= 0 ? LinearLayout.LayoutParams.WRAP_CONTENT : (int) mIconWidth,</span><br><span class="line">                    mIconHeight &lt;= 0 ? LinearLayout.LayoutParams.WRAP_CONTENT : (int) mIconHeight);</span><br><span class="line">            if (mIconGravity == Gravity.LEFT) &#123;</span><br><span class="line">                lp.rightMargin = (int) mIconMargin;</span><br><span class="line">            &#125; else if (mIconGravity == Gravity.RIGHT) &#123;</span><br><span class="line">                lp.leftMargin = (int) mIconMargin;</span><br><span class="line">            &#125; else if (mIconGravity == Gravity.BOTTOM) &#123;</span><br><span class="line">                lp.topMargin = (int) mIconMargin;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                lp.bottomMargin = (int) mIconMargin;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            iv_tab_icon.setLayoutParams(lp);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            iv_tab_icon.setVisibility(View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 另外一个setTabData</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/** 关联数据支持同时切换fragments */</span><br><span class="line">public void setTabData(ArrayList&lt;CustomTabEntity&gt; tabEntitys, FragmentActivity fa, int containerViewId, ArrayList&lt;Fragment&gt; fragments) &#123;</span><br><span class="line">    /*拿到一个mFragmentChangeManager ，后面setCurrentTab的时候 ，如果这个值不为空，根据这个来切换fragment,实现一种类似FragmentPagerAdapter的效果*/</span><br><span class="line">    mFragmentChangeManager = new FragmentChangeManager(fa.getSupportFragmentManager(), containerViewId, fragments);</span><br><span class="line">    setTabData(tabEntitys);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public void setCurrentTab(int currentTab) &#123;</span><br><span class="line">    mLastTab = this.mCurrentTab;</span><br><span class="line">    this.mCurrentTab = currentTab;</span><br><span class="line">    /*遍历更新tab选中未选中状态*/</span><br><span class="line">    updateTabSelection(currentTab);</span><br><span class="line">    /*如果mFragmentChangeManager 不为空，就根据当前选中的tab显示对应的Fragment*/</span><br><span class="line">    if (mFragmentChangeManager != null) &#123;</span><br><span class="line">        mFragmentChangeManager.setFragments(currentTab);</span><br><span class="line">    &#125;</span><br><span class="line">    /*indicator动画效果，计算后重绘*/</span><br><span class="line">    if (mIndicatorAnimEnable) &#123;</span><br><span class="line">        calcOffset();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="2-3-4-FragmentChangeManager"><a href="#2-3-4-FragmentChangeManager" class="headerlink" title="2.3.4 FragmentChangeManager"></a><a href></a>2.3.4 FragmentChangeManager</h5><p> <img src="https://img-blog.csdn.net/20170419093139353" alt="这里写图片描述"></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">public class FragmentChangeManager &#123;</span><br><span class="line">    private FragmentManager mFragmentManager;</span><br><span class="line">    private int mContainerViewId;</span><br><span class="line">    /** Fragment切换数组 */</span><br><span class="line">    private ArrayList&lt;Fragment&gt; mFragments;</span><br><span class="line">    /** 当前选中的Tab */</span><br><span class="line">    private int mCurrentTab;</span><br><span class="line"></span><br><span class="line">    /*构造方法，setTabData的时候看到过*/</span><br><span class="line">    public FragmentChangeManager(FragmentManager fm, int containerViewId, ArrayList&lt;Fragment&gt; fragments) &#123;</span><br><span class="line">        this.mFragmentManager = fm;</span><br><span class="line">        this.mContainerViewId = containerViewId;</span><br><span class="line">        this.mFragments = fragments;</span><br><span class="line">        initFragments();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /** 初始化fragments */</span><br><span class="line">    private void initFragments() &#123;</span><br><span class="line">        for (Fragment fragment : mFragments) &#123;</span><br><span class="line">            mFragmentManager.beginTransaction().add(mContainerViewId, fragment).hide(fragment).commit();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        setFragments(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /** 界面切换控制,CommonTabLayout中的setCurrentTab方法可以控制*/</span><br><span class="line">    public void setFragments(int index) &#123;</span><br><span class="line">        for (int i = 0; i &lt; mFragments.size(); i++) &#123;</span><br><span class="line">            FragmentTransaction ft = mFragmentManager.beginTransaction();</span><br><span class="line">            Fragment fragment = mFragments.get(i);</span><br><span class="line">            if (i == index) &#123;</span><br><span class="line">                ft.show(fragment);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                ft.hide(fragment);</span><br><span class="line">            &#125;</span><br><span class="line">            ft.commit();</span><br><span class="line">        &#125;</span><br><span class="line">        mCurrentTab = index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getCurrentTab() &#123;</span><br><span class="line">        return mCurrentTab;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Fragment getCurrentFragment() &#123;</span><br><span class="line">        return mFragments.get(mCurrentTab);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="2-3-5-Getter-Setter以及MsgView先关"><a href="#2-3-5-Getter-Setter以及MsgView先关" class="headerlink" title="2.3.5 Getter,Setter以及MsgView先关"></a><a href></a>2.3.5 Getter,Setter以及MsgView先关</h5><p> Getter和Setter方法是属性值的获取和设置，MsgView相关方法和SlidingTabLayout比较相似。</p>
<hr>
<h3 id="3-SegmentTabLayout"><a href="#3-SegmentTabLayout" class="headerlink" title="3. SegmentTabLayout"></a><a href></a>3. SegmentTabLayout</h3><h4 id="3-1-特有属性"><a href="#3-1-特有属性" class="headerlink" title="3.1 特有属性"></a><a href></a>3.1 特有属性</h4><pre><code>特有属性                       | 格式        | 描述           
-------------------------- | --------- | ------------- 
tl_indicator_anim_enable   | boolean   | 设置显示器支持动画    
tl_indicator_anim_duration | integer   | 设置显示器动画时间    
tl_indicator_bounce_enable | boolean   | 设置显示器支持动画回弹效果
tl_bar_color               | color     | 设置整体颜色       
tl_bar_stroke_color        | color     | 设置边框颜色       
tl_bar_stroke_width        | dimension | 设置边框粗细       </code></pre><h4 id="3-2-区别于CommonTabLayout"><a href="#3-2-区别于CommonTabLayout" class="headerlink" title="3.2 区别于CommonTabLayout"></a><a href></a>3.2 区别于CommonTabLayout</h4><ul>
<li><p>不支持图标，但是可以看做是一个特殊的CommonTabLayout.  </p>
<h4 id="3-3-类结构"><a href="#3-3-类结构" class="headerlink" title="3.3 类结构"></a><a href></a>3.3 类结构</h4><p>整体来说，内容基本上和CommonTabLayout，只是少了Icon的对应处理，多出的是Segment样式的处理。</p>
</li>
</ul>
<hr>
<h3 id="4-MsgView"><a href="#4-MsgView" class="headerlink" title="4. MsgView"></a><a href></a>4. MsgView</h3><h4 id="4-1-自定义属性"><a href="#4-1-自定义属性" class="headerlink" title="4.1 自定义属性"></a><a href></a>4.1 自定义属性</h4><pre><code>属性值                   | 格式        | 描述              
--------------------- | --------- | ---------------- 
mv_backgroundColor    | color     | 圆角矩形背景色         
mv_cornerRadius       | dimension | 圆角弧度,单位dp       
mv_strokeWidth        | dimension | 边框粗细，单位dp       
mv_strokeColor        | color     | 圆角边框颜色          
mv_isRadiusHalfHeight | boolean   | 圆角弧度是高度一半       
mv_isWidthHeightEqual | boolean   | 圆角矩形宽高相等,取较宽高中大值</code></pre><h4 id="4-2-类结构"><a href="#4-2-类结构" class="headerlink" title="4.2 类结构"></a><a href></a>4.2 类结构</h4><p> <img src="https://img-blog.csdn.net/20170419094953865" alt="这里写图片描述"></p>
<hr>
<h2 id="项目使用"><a href="#项目使用" class="headerlink" title="项目使用"></a><a href></a>项目使用</h2><p> 个人项目<a href="https://github.com/onlyloveyd/GankIOClient" target="_blank" rel="noopener">Gank.io Android 客户端</a>中使用效果,底部使用的CommonTabLayout，顶部使用的是SlidingTabLayout。整体而言，日常开发过程中，FlycoTabLayout还是很实用的。</p>
<p> <img src="https://img-blog.csdn.net/20170413220349937" alt="这里写图片描述"></p>
<hr>
<p> <img src="https://img-blog.csdn.net/20170413220424449" alt="这里写图片描述"></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-08T13:25:16.000Z">2017-04-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 558 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/04/08/《Android 开源库》Android OpenCSV/">《Android 开源库》Android OpenCSV</a>
            
        </h1>
        <div class="content">
            <h2 id="OpenCSV"><a href="#OpenCSV" class="headerlink" title="OpenCSV"></a><a href></a>OpenCSV</h2><p> <a href="https://sourceforge.net/projects/opencsv/" target="_blank" rel="noopener">https://sourceforge.net/projects/opencsv/</a></p>
<h2 id="使用参考"><a href="#使用参考" class="headerlink" title="使用参考"></a><a href></a>使用参考</h2><p> <a href="http://stackoverflow.com/questions/16672074/import-csv-file-to-sqlite-in-android" target="_blank" rel="noopener">http://stackoverflow.com/questions/16672074/import-csv-file-to-sqlite-in-android</a></p>
<h3 id="导出"><a href="#导出" class="headerlink" title="导出"></a><a href></a>导出</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public class ExportDatabaseToCSV extends AsyncTask&lt;Void, Boolean, Boolean&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Context context;</span><br><span class="line">    ProgressDialog dialog;</span><br><span class="line"></span><br><span class="line">    public ExportDatabaseToCSV(Context context) &#123;</span><br><span class="line">        this.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onPreExecute() &#123;</span><br><span class="line">        dialog = new ProgressDialog(context);</span><br><span class="line">        dialog.setTitle(&quot;导出CSV文件&quot;);</span><br><span class="line">        dialog.setMessage(&quot;请稍后...&quot;);</span><br><span class="line">        dialog.setCancelable(false);</span><br><span class="line">        dialog.setIcon(android.R.drawable.ic_dialog_info);</span><br><span class="line">        dialog.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Boolean doInBackground(Void... params) &#123;</span><br><span class="line">        File exportDir = new File(Environment.getExternalStorageDirectory(), &quot;&quot;);</span><br><span class="line">        if (!exportDir.exists()) &#123;</span><br><span class="line">            exportDir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Date date = new Date(System.currentTimeMillis());</span><br><span class="line">        String filename = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;).format(date);</span><br><span class="line">        File file = new File(exportDir, filename + &quot;.csv&quot;);</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            file.createNewFile();</span><br><span class="line">            CSVWriter csvWrite = new CSVWriter(new FileWriter(file));</span><br><span class="line">            StringBuffer check = new StringBuffer();</span><br><span class="line">            check.append(&quot;SELECT * FROM NOTE&quot;);</span><br><span class="line">            DataBaseHelper db = DataBaseHelper.getInstance(GlobalField.getApplicationContext());</span><br><span class="line">            db.openDataBase();</span><br><span class="line">            Cursor curCSV = db.queryData(check.toString());</span><br><span class="line">			//key -&gt; get the cursor and then using opencsv</span><br><span class="line">            csvWrite.writeNext(curCSV.getColumnNames());</span><br><span class="line">            while (curCSV.moveToNext()) &#123;</span><br><span class="line">                //Which column you want to export you can add over here...</span><br><span class="line">                List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">                for (int i = 0, length = curCSV.getColumnCount(); i &lt; length; i++) &#123;</span><br><span class="line">                    list.add(curCSV.getString(i));</span><br><span class="line">                &#125;</span><br><span class="line">                String[] arrStr = list.toArray(new String[list.size()]);</span><br><span class="line">                csvWrite.writeNext(arrStr);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            csvWrite.close();</span><br><span class="line">            curCSV.close();</span><br><span class="line">            return true;</span><br><span class="line">        &#125; catch (Exception sqlEx) &#123;</span><br><span class="line">            System.err.println(sqlEx.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onPostExecute(Boolean result) &#123;</span><br><span class="line">        if (dialog.isShowing()) &#123;</span><br><span class="line">            dialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (result) &#123;</span><br><span class="line">            Toast.makeText(context, &quot;SqLite Data has been Exported!&quot;, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Toast.makeText(context, &quot;SqLite Data has not Exported&quot;, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a><a href></a>导入</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">public class ImportCVSToSQLiteDataBase extends AsyncTask&lt;String, String, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Activity activity;</span><br><span class="line">    Context context;</span><br><span class="line">    File file=null;</span><br><span class="line">    private ProgressDialog dialog;</span><br><span class="line"></span><br><span class="line">    public ImportCVSToSQLiteDataBase(Context context, Activity activity,File file) &#123;</span><br><span class="line">        this.context=context;</span><br><span class="line">        this.activity=activity;</span><br><span class="line">        this.file=file;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onPreExecute()</span><br><span class="line">    &#123;</span><br><span class="line">        dialog=new ProgressDialog(context);</span><br><span class="line">        dialog.setTitle(&quot;Importing Data into SecureIt DataBase&quot;);</span><br><span class="line">        dialog.setMessage(&quot;Please wait...&quot;);</span><br><span class="line">        dialog.setCancelable(false);</span><br><span class="line">        dialog.setIcon(android.R.drawable.ic_dialog_info);</span><br><span class="line">        dialog.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected String doInBackground(String... params) &#123;</span><br><span class="line"></span><br><span class="line">            String data=&quot;&quot;;</span><br><span class="line">            Log.d(getClass().getName(), file.toString());</span><br><span class="line"></span><br><span class="line">           try&#123;</span><br><span class="line">                 CSVReader reader = new CSVReader(new FileReader(file));</span><br><span class="line">                   String [] nextLine;</span><br><span class="line"></span><br><span class="line">                  //here I am just displaying the CSV file contents, and you can store your file content into db from while loop...</span><br><span class="line"></span><br><span class="line">                    while ((nextLine = reader.readNext()) != null) &#123;</span><br><span class="line"></span><br><span class="line">                        // nextLine[] is an array of values from the line</span><br><span class="line"></span><br><span class="line">                        String accId=nextLine[0];</span><br><span class="line">                        String acc_name=nextLine[1];</span><br><span class="line"></span><br><span class="line">                        data=data+&quot;AccId:&quot;+accId  +&quot;  Account_name:&quot;+acc_name+&quot;\n&quot;;//change to save to datebase instead of showing</span><br><span class="line"></span><br><span class="line">                      &#125;</span><br><span class="line">                   return data;</span><br><span class="line"></span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                Log.e(&quot;Error&quot;, &quot;Error for importing file&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        return data=&quot;&quot;;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">protected void onPostExecute(String data)</span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">    if (dialog.isShowing())</span><br><span class="line">    &#123;</span><br><span class="line">        dialog.dismiss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (data.length()!=0)</span><br><span class="line">    &#123;</span><br><span class="line">        Toast.makeText(context, &quot;File is built Successfully!&quot;+&quot;\n&quot;+data, Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">            Toast.makeText(context, &quot;File fail to build&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">         &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a><a href></a>问题</h2><p> 导出的CSV文件如果使用Excel直接打开，可能出现中文乱码</p>
<p> 解决办法：<br> 使用记事本打开CSV文件，“文件”-&gt;“另存为”，编码方式选择ANSI，保存完毕后，用EXCEL打开这个文件就不会出现乱码的情况。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-25T10:57:36.000Z">2017-03-25</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 分钟 读完 (大约 2485 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/25/《Android开源库》 Realm For Android~ Adapter &Supporting other library（译文）/">《Android开源库》 Realm For Android~ Adapter &amp;Supporting other library（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="Adapter-适配器"><a href="#Adapter-适配器" class="headerlink" title="Adapter(适配器)"></a><a href></a>Adapter(适配器)</h2><p> Realm提供了一些抽象的工具类来方便地将 OrderedRealmCollection （RealmResults 和 RealmList 都实现了这个借口）展示到UI控件上。</p>
<ul>
<li><p>RealmBaseAdapter 可以与 ListView 配合使用。参见<a href="https://github.com/realm/realm-android-adapters/blob/master/example/src/main/java/io/realm/examples/adapters/ui/listview/MyListAdapter.java" target="_blank" rel="noopener">示例</a>. </p>
</li>
<li><p>RealmRecyclerViewAdapter 可以与 RecyclerView 配合使用。参见<a href="https://github.com/realm/realm-android-adapters/blob/master/example/src/main/java/io/realm/examples/adapters/ui/recyclerview/MyRecyclerViewAdapter.java" target="_blank" rel="noopener">示例</a>.  
 你需要在 app 的 build.gradle 中添加额外的依赖以使用这些适配器。  </p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">	compile &apos;io.realm:android-adapters:1.4.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>####Intent<br>因为你不可以直接通过 intent 传递 RealmObject，我们建议你只传递 RealmObject 的标识符。举个常用例子，假如你的对象拥有一个<a href="https://realm.io/cn/docs/java/latest/#primary-keys" target="_blank" rel="noopener">主键</a>，请通过 intent 的 bundle 来传递这个主键的值。</p>
</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Assuming we had a person class with a @PrimaryKey on the &apos;id&apos; field ...</span><br><span class="line">Intent intent = new Intent(getActivity(), ReceivingService.class);</span><br><span class="line">intent.putExtra(&quot;person_id&quot;, person.getId());</span><br><span class="line">getActivity().startService(intent);</span><br></pre></td></tr></table></figure>

<p> 在接受方（Activty、Service、IntentService、BroadcastReceiver 及其它）从 bundle 中解析出这个主键然后打开 Realm 查询得到这个 RealmObject。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// in onCreate(), onHandleIntent(), etc.</span><br><span class="line">String personId = intent.getStringExtra(&quot;person_id&quot;);</span><br><span class="line">Realm realm = Realm.getDefaultInstance();</span><br><span class="line">Person person = realm.where(Person.class).equalTo(&quot;id&quot;, personId).findFirst();</span><br><span class="line">// do something with the person ...</span><br><span class="line">realm.close();</span><br></pre></td></tr></table></figure>

<p> 可以参考 <a href="https://github.com/realm/realm-java/tree/master/examples/threadExample" target="_blank" rel="noopener">threading example</a> 中的 Object Passing 部分。该示例展示了在安卓开发中常用的如何传递 id 并且得到对应的 RealmObject。</p>
<hr>
<h4 id="Android-Framework-多线程-API-相关"><a href="#Android-Framework-多线程-API-相关" class="headerlink" title="Android Framework 多线程 API 相关"></a><a href></a>Android Framework 多线程 API 相关</h4><p> 当你使用下列 API 时请小心：</p>
<ul>
<li><p>AsyncTask </p>
</li>
<li><p>IntentService  AsyncTask 的 doInBackground() 方法会运行在一个后台线程。IntentService 的 onHandleIntent(Intent intent) 方法会运行在一个后台工作线程。</p>
<p>如果你需要在这些方法中使用 Realm，请在对 Realm 的调用结束后关闭 Realm 实例。见如下例子。</p>
</li>
</ul>
<h5 id="AsyncTask"><a href="#AsyncTask" class="headerlink" title="AsyncTask"></a><a href></a>AsyncTask</h5><p> 在 doInBackground 方法中打开并关闭 Realm，如下所示：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">private class DownloadOrders extends AsyncTask&lt;Void, Void, Long&gt; &#123;</span><br><span class="line">    protected Long doInBackground(Void... voids) &#123;</span><br><span class="line">        // Now in a background thread.</span><br><span class="line"></span><br><span class="line">        // Open the Realm</span><br><span class="line">        Realm realm = Realm.getDefaultInstance();</span><br><span class="line">        try &#123;</span><br><span class="line">            // Work with Realm</span><br><span class="line">            realm.createAllFromJson(Order.class, api.getNewOrders());</span><br><span class="line">            Order firstOrder = realm.where(Order.class).findFirst();</span><br><span class="line">            long orderId = firstOrder.getId(); // Id of order</span><br><span class="line">            return orderId;</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            realm.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void onPostExecute(Long orderId) &#123;</span><br><span class="line">        // Back on the Android mainThread</span><br><span class="line">        // do something with orderId such as query Realm</span><br><span class="line">        // for the order and perform some operation with it.</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="IntentService"><a href="#IntentService" class="headerlink" title="IntentService"></a><a href></a>IntentService</h5><blockquote>
<p>ChangeListener 在 IntentService 中不会工作。尽管 IntentService 本身是一个 Looper 线程，但每次 onHandleIntent 的调用是独立的事件。你可以注册监听器的调用不会返回失败，但他们永远不会被触发。</p>
<p> 在 onHandleIntent() 方法中打开并关闭 Realm，如下所示：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class OrdersIntentService extends IntentService &#123;</span><br><span class="line">    public OrdersIntentService(String name) &#123;</span><br><span class="line">        super(&quot;OrdersIntentService&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onHandleIntent(Intent intent) &#123;</span><br><span class="line">        // Now in a background thread.</span><br><span class="line"></span><br><span class="line">        // Open the Realm</span><br><span class="line">        Realm realm = Realm.getDefaultInstance();</span><br><span class="line">        // Work with Realm</span><br><span class="line">        realm.createAllFromJson(Order.class, api.getNewOrders());</span><br><span class="line">        Order firstOrder = realm.where(Order.class).findFirst();</span><br><span class="line">        long orderId = firstOrder.getId(); // Id of order</span><br><span class="line">        realm.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="对其它库的支持"><a href="#对其它库的支持" class="headerlink" title="对其它库的支持"></a><a href></a>对其它库的支持</h2><p> 这个章节描述了怎样与其它 Android 流行库搭配使用 Realm。</p>
<h4 id="GSON"><a href="#GSON" class="headerlink" title="GSON"></a><a href></a>GSON</h4><p> <a href="https://code.google.com/p/google-gson/" target="_blank" rel="noopener">GSON</a> 是 Google 开发的 JSON 处理库。GSON 与 Realm 可以无缝配合使用。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Using the User class</span><br><span class="line">public class User extends RealmObject &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private String email;</span><br><span class="line">    // getters and setters left out ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gson gson = new GsonBuilder().create();</span><br><span class="line">String json = &quot;&#123; name : &apos;John&apos;, email : &apos;john@corporation.com&apos; &#125;&quot;;</span><br><span class="line">User user = gson.fromJson(json, User.class);</span><br></pre></td></tr></table></figure>

<p> <a href="https://github.com/realm/realm-java/blob/master/examples/gridViewExample/src/main/java/io/realm/examples/realmgridview/GridViewExampleActivity.java" target="_blank" rel="noopener">GridViewExample</a> 展示了如何配合 GSON 使用 Realm。</p>
<h5 id="序列化（Serialization）"><a href="#序列化（Serialization）" class="headerlink" title="序列化（Serialization）"></a><a href></a>序列化（Serialization）</h5><p> 你有时需要序列化与反序列化一个 Realm 对象以便与其它库（比如 <a href="http://square.github.io/retrofit/" target="_blank" rel="noopener">Retrofit</a>）相配合。因为 GSON<a href="https://groups.google.com/forum/#!topic/google-gson/4G6Lv9PghUY" target="_blank" rel="noopener">使用成员变量值而非 getter 和 setter</a> ，所以你无法通过 GSON 的一般方法来序列化 Realm 对象。</p>
<p> 你需要为 Realm 模型对象自定义一个 <a href="https://google.github.io/gson/apidocs/com/google/gson/JsonSerializer.html" target="_blank" rel="noopener">JsonSerializer</a> 并且将其注册为一个 <a href="https://google.github.io/gson/apidocs/com/google/gson/TypeAdapter.html" target="_blank" rel="noopener">TypeAdapter</a>。</p>
<p> 请参考这个 <a href="https://gist.github.com/cmelchior/ddac8efd018123a1e53a" target="_blank" rel="noopener">Gist</a>。</p>
<h5 id="数组（Primitive-lists）"><a href="#数组（Primitive-lists）" class="headerlink" title="数组（Primitive lists）"></a><a href></a>数组（Primitive lists）</h5><p> 某些 JSON API 会以数组的形式返回原始数据类型（例如 String 和 integer），<a href="https://github.com/realm/realm-java/issues/575" target="_blank" rel="noopener">Realm 暂时不支持对这种数组的处理</a>。但你可以通过自定义 <a href="https://google.github.io/gson/apidocs/com/google/gson/TypeAdapter.html" target="_blank" rel="noopener">TypeAdapter</a>来处理这种情况。</p>
<p> 这个 Gist 展示了如何将 JSON 中的整型数组存入 Realm。类似地，你可以用这个方法来处理其它原始数据类型数组。</p>
<h5 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a><a href></a>Troubleshooting</h5><p> Realm 对象属性可能会包含循环引用。在这种情况下，GSON 会抛出 StackOverflowError。例如如下 Realm 对象拥有一个 Drawable 属性：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Person extends RealmObject &#123;</span><br><span class="line">    @Ignore</span><br><span class="line">    Drawable avatar;</span><br><span class="line">    // other fields, etc</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> Person 类含有一个 Android Drawable 并且被 @Ignore 修饰。当 GSON 序列化时，Drawable 被读取并且造成了堆栈溢出。(<a href="https://github.com/realm/realm-java/issues/1798" target="_blank" rel="noopener">GitHub Issue</a>)。添加如下代码以避免类似问题：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public boolean shouldSkipField(FieldAttributes f) &#123;</span><br><span class="line">  return f.getDeclaringClass().equals(RealmObject.class) || f.getDeclaringClass().equals(Drawable.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 请注意对 Drawable.class 的判定语句，它告诉 GSON 跳过这个属性的序列化以避免堆栈溢出错误。</p>
<h5 id="Jackson-databind"><a href="#Jackson-databind" class="headerlink" title="Jackson-databind"></a><a href></a>Jackson-databind</h5><p> <a href="https://github.com/FasterXML/jackson-databind" target="_blank" rel="noopener">Jackson-databind</a> 用来绑定 JSON 数据和其对应的 Java 类。</p>
<p> Jackson 需要使用反射进行工作。这与 Realm 的 RxJava 支持有冲突，因为作为可选功能，RxJava 有可能不再工程依赖库中。这会导致类似如下的异常抛出：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">java.lang.NoClassDefFoundError: rx.Observable</span><br><span class="line">at libcore.reflect.InternalNames.getClass(InternalNames.java:55)</span><br></pre></td></tr></table></figure>

<p> 为了修正这个问题你可以添加 RxJava 依赖到工程中或者创建一个假类文件如下所示：</p>
<p> package rx;</p>
<p> public class Observable {<br> // Dummy class required for Jackson-Databind support if<br> // RxJava is not a project dependency.<br> }<br> 这个问题也同时报告给了 Jackson 项目。</p>
<h4 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a><a href></a>Kotlin</h4><p> Realm 完全兼容 <a href="https://kotlinlang.org/" target="_blank" rel="noopener">Kotlin</a> 语言，但有些地方需要注意：</p>
<ul>
<li><p>你的模型类需要是<a href="https://kotlinlang.org/docs/reference/classes.html#overriding-members" target="_blank" rel="noopener">开放的（open）</a>。 </p>
</li>
<li><p>你可能需要在某些情况下添加注解 @RealmCLass 以保证编译通过。这是由于<a href="http://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/" target="_blank" rel="noopener">当前 Kotlin 注解处理器的一个限制</a>。 </p>
</li>
<li><p>很多 Realm API 引用了 Java 类。你必须在编译依赖中添加 org.jetbrains.kotlin:kotlin-reflect:${kotlin_version}。<br> <a href="https://github.com/realm/realm-java/tree/master/examples/kotlinExample" target="_blank" rel="noopener">参见示例</a>。  </p>
<h4 id="Parceler"><a href="#Parceler" class="headerlink" title="Parceler"></a><a href></a>Parceler</h4><p><a href="https://github.com/johncarl81/parceler" target="_blank" rel="noopener">Parceler</a> 可以帮助对象自动生成支持 <a href="http://developer.android.com/reference/android/os/Parcelable.html" target="_blank" rel="noopener">Parcelable</a> 接口的样板代码。因为 Realm 的代理类，你需要以下设置以便应用 Parceler 到 Realm 对象。</p>
</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// All classes that extend RealmObject will have a matching RealmProxy class created</span><br><span class="line">// by the annotation processor. Parceler must be made aware of this class. Note that</span><br><span class="line">// the class is not available until the project has been compiled at least once.</span><br><span class="line">@Parcel(implementations = &#123; PersonRealmProxy.class &#125;,</span><br><span class="line">        value = Parcel.Serialization.BEAN,</span><br><span class="line">        analyze = &#123; Person.class &#125;)</span><br><span class="line">public class Person extends RealmObject &#123;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 如果你使用 Gradle 来获取 Parceler，请确保存在以下配置代码：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">compile &quot;org.parceler:parceler-api:1.0.3&quot;</span><br><span class="line">apt &quot;org.parceler:parceler:1.0.3&quot;</span><br></pre></td></tr></table></figure>

<p> 请注意目前在使用 Parceler 的时候有如下的限制：</p>
<ul>
<li><p>如果你的模型包含 RealmList，那么你需要<a href="https://gist.github.com/cmelchior/72c35fcb55cec33a71e1" target="_blank" rel="noopener">注册一个特殊 adapter</a> </p>
</li>
<li><p>一旦对象被打包（parcelled），它将变为一个有当前数据快照，不再被 Realm 管理的一个 unmanaged 对象。之后该对象的数据变化不会被 Realm 写入。  </p>
<h4 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a><a href></a>Retrofit</h4><p><a href="http://square.github.io/retrofit/" target="_blank" rel="noopener">Retrofit </a>是一个由 <a href="https://github.com/square" target="_blank" rel="noopener">Square</a> 开发，保证类型安全（typesafe）的 REST API 处理工具。</p>
<p>Realm 可以与 Retrofit 1.x 和 2.x 无缝配合工作。但请注意 Retrofit 不会自动将对象存入 Realm。你需要通过调用 Realm.copyToRealm() 或 Realm.copyToRealmOrUpdate() 来将它们存入 Realm。</p>
</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GitHubService service = restAdapter.create(GitHubService.class);</span><br><span class="line">List&lt;Repo&gt; repos = service.listRepos(&quot;octocat&quot;);</span><br><span class="line"></span><br><span class="line">// Copy elements from Retrofit to Realm to persist them.</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">List&lt;Repo&gt; realmRepos = realm.copyToRealmOrUpdate(repos);</span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>


<h4 id="Robolectric"><a href="#Robolectric" class="headerlink" title="Robolectric"></a><a href></a>Robolectric</h4><p> 通过 <a href="http://robolectric.org/" target="_blank" rel="noopener">Robolectric </a>库可以让你在不使用真实设备或者模拟器的情况下直接在 Java 虚拟机上进行 JUnit 测试。但目前 Roboletrics 不支持带有原生库的测试。而 Realm 包含使用 C++ 的原生库，所以你目前不可以通过 Roboletrics 测试使用 Realm 的项目。</p>
<p> 你可以关注这个 <a href="https://github.com/robolectric/robolectric/issues/1389" target="_blank" rel="noopener">Robolectric 的新功能请求</a>。</p>
<h4 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a><a href></a>RxJava</h4><p> <a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener">RxJava</a> 是 Netflix 发布的一个 [<a href="http://reactivex.io/" target="_blank" rel="noopener">Reactive 的扩展 库</a>以支持<a href="https://en.wikipedia.org/wiki/Observer_pattern" target="_blank" rel="noopener"> 观察者模式</a>。</p>
<p> Realm 包含了对 RxJava 的原生支持。如下类可以被暴露为一个 Observable：Realm, RealmResults, RealmObject, DynamicRealm and DynamicRealmObject。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Combining Realm, Retrofit and RxJava (Using Retrolambda syntax for brevity)</span><br><span class="line">// Load all persons and merge them with their latest stats from GitHub (if they have any)</span><br><span class="line">Realm realm = Realm.getDefaultInstance();</span><br><span class="line">GitHubService api = retrofit.create(GitHubService.class);</span><br><span class="line">realm.where(Person.class).isNotNull(&quot;username&quot;).findAllAsync().asObservable()</span><br><span class="line">    .filter(persons.isLoaded)</span><br><span class="line">    .flatMap(persons -&gt; Observable.from(persons))</span><br><span class="line">    .flatMap(person -&gt; api.user(person.getGithubUserName())</span><br><span class="line">    .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">    .subscribe(user -&gt; showUser(user));</span><br></pre></td></tr></table></figure>

<p> 请注意<a href="https://realm.io/cn/docs/java/latest/#asynchronous-queries" target="_blank" rel="noopener">异步查询</a>不会阻塞当前线程，如上代码会立即返回一个 RealmResults 实例。如果你想确定该 RealmResults 已经加载完成请使用<a href="http://reactivex.io/documentation/operators/filter.html" target="_blank" rel="noopener"> filter operator</a> 和 RealmResults.isLoaded() 方法。通过判断 RealmResults 是否已经加载可以得知查询是否已经完成。</p>
<p> 参考 <a href="https://github.com/realm/realm-java/tree/master/examples/rxJavaExample" target="_blank" rel="noopener">RxJava sample project</a>。</p>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a><a href></a>配置</h4><p> RxJava 是可选依赖，这意味着 Realm 不会自动包含它。这样做的好处是你可以选择需要的 RxJava 版本以及防止过多的无用方法被打包。如果你要使用相关功能，请手动添加 RxJava 到 build.gradle 文件。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  compile &apos;io.reactivex:rxjava:1.1.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 你也可以通过继承 RxObservableFactory 来决定 Observable 的生成方式，然后通过 RealmConfiguration 进行配置。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .rxFactory(new MyRxFactory())</span><br><span class="line">  .build()</span><br></pre></td></tr></table></figure>

<p> 如果没有 RxObservableFactory 被定义，RealmObservableFactory 会被默认使用，它支持 RxJava &lt;= 1.1.*。</p>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/cn/docs/java/latest/" target="_blank" rel="noopener">https://realm.io/cn/docs/java/latest/</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-16T12:55:55.000Z">2017-03-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 821 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/16/《Android开源库》 Realm For Android~ Migrations & Encryption & Working With Android（译文）/">《Android开源库》 Realm For Android~ Migrations &amp; Encryption &amp; Working With Android（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="迁移（Migrations）"><a href="#迁移（Migrations）" class="headerlink" title="迁移（Migrations）"></a><a href></a>迁移（Migrations）</h2><p> 所有数据库都要处理模型改变的情况。Realm 的数据模型用标准 Java 对象来定义，改变Scheme和改变数据RealmObject子类对应的机构一样容易。</p>
<p> 如果没有旧 Realm 数据文件存在，那么代码的改变即会反应到相应的 Realm 数据文件改变。但如果已经有旧版本的 Realm 数据文件存在，Realm 会抛出异常提示数据库文件需要迁移。请在相应的 RealmConfiguration 设置 schema 版本和 migration 代码来正确处理并避免该异常抛出。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">    .schemaVersion(2) // Must be bumped when the schema changes</span><br><span class="line">    .migration(new MyMigration()) // Migration to run instead of throwing an exception</span><br><span class="line">    .build()</span><br></pre></td></tr></table></figure>

<p> 如上示例使得相应的 migration 代码在迁移需要的时候被自动执行。我们提供了相关 API 用来升级已保存的 schema 以及对应之前 schema 的数据。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">// Example migration adding a new class</span><br><span class="line">RealmMigration migration = new RealmMigration() &#123;</span><br><span class="line">  @Override</span><br><span class="line">  public void migrate(DynamicRealm realm, long oldVersion, long newVersion) &#123;</span><br><span class="line"></span><br><span class="line">     // DynamicRealm exposes an editable schema</span><br><span class="line">     RealmSchema schema = realm.getSchema();</span><br><span class="line"></span><br><span class="line">     // Migrate to version 1: Add a new class.</span><br><span class="line">     // Example:</span><br><span class="line">     // public Person extends RealmObject &#123;</span><br><span class="line">     //     private String name;</span><br><span class="line">     //     private int age;</span><br><span class="line">     //     // getters and setters left out for brevity</span><br><span class="line">     // &#125;</span><br><span class="line">     if (oldVersion == 0) &#123;</span><br><span class="line">        schema.create(&quot;Person&quot;)</span><br><span class="line">            .addField(&quot;name&quot;, String.class)</span><br><span class="line">            .addField(&quot;age&quot;, int.class);</span><br><span class="line">        oldVersion++;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     // Migrate to version 2: Add a primary key + object references</span><br><span class="line">     // Example:</span><br><span class="line">     // public Person extends RealmObject &#123;</span><br><span class="line">     //     private String name;</span><br><span class="line">     //     @PrimaryKey</span><br><span class="line">     //     private int age;</span><br><span class="line">     //     private Dog favoriteDog;</span><br><span class="line">     //     private RealmList&lt;Dog&gt; dogs;</span><br><span class="line">     //     // getters and setters left out for brevity</span><br><span class="line">     // &#125;</span><br><span class="line">     if (oldVersion == 1) &#123;</span><br><span class="line">        schema.get(&quot;Person&quot;)</span><br><span class="line">            .addField(&quot;id&quot;, long.class, FieldAttribute.PRIMARY_KEY)</span><br><span class="line">            .addRealmObjectField(&quot;favoriteDog&quot;, schema.get(&quot;Dog&quot;))</span><br><span class="line">            .addRealmListField(&quot;dogs&quot;, schema.get(&quot;Dog&quot;));</span><br><span class="line">        oldVersion++;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 请查阅这个<a href="https://github.com/realm/realm-java/tree/master/examples/migrationExample" target="_blank" rel="noopener">数据迁移例子</a>来获取这方面的细节。</p>
<p> 如果没有旧 Realm 数据文件存在，那么迁移并不需要，在这种情况下，Realm 会创建一个新的以 .realm 为后缀，基于新的对象模型的数据文件。在开发和调试过程中，假如你需要频繁改变数据模型，并且不介意损失旧数据，你可以直接删除 .realm 文件（这里包含所有的数据！）而不用关心迁移的问题。这在你应用的开发早期阶段非常有用。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">    .deleteRealmIfMigrationNeeded()</span><br><span class="line">    .build()</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="加密"><a href="#加密" class="headerlink" title="加密"></a><a href></a>加密</h2><blockquote>
<p>请注意我们的许可证的出口合规性部分，因为如果你位于从美国出口限制或禁运的国家，则会限制使用Realm。</p>
<p> Realm 文件可以通过传递一个512位（64字节）的密钥参数给 Realm.getInstance().encryptionKey() 来加密存储在磁盘上。</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">byte[] key = new byte[64];</span><br><span class="line">new SecureRandom().nextBytes(key);</span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .encryptionKey(key)</span><br><span class="line">  .build();</span><br><span class="line">Realm realm = Realm.getInstance(config);</span><br></pre></td></tr></table></figure>

<p> 这保证了所有永久性存储在磁盘上的数据都是通过标准 AES-256 加密的。每次创建新的 Realm 实例的时候，都需要提供相同的密钥。</p>
<p> 参考 <a href="https://github.com/realm/realm-java/tree/master/examples/encryptionExample" target="_blank" rel="noopener">examples/encryptionExample</a>。这个例子演示了如何通过 Android KeyStore 来安全地存储密钥。</p>
<hr>
<h2 id="与-Android-相关"><a href="#与-Android-相关" class="headerlink" title="与 Android 相关"></a><a href></a>与 Android 相关</h2><p> Realm 可以无缝地引入安卓开发。你需要谨记 RealmObject 的<a href="https://realm.io/cn/docs/java/latest/#threading" target="_blank" rel="noopener">线程限制</a>。当你需要跨 activity、service或者 broadcast receiver 传递 Realm 对象的时候，请牢记这一点.</p>
<hr>
<h2 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a><a href></a>原文地址</h2><p> <a href="https://realm.io/docs/java/latest/#migrations" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#migrations</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-15T13:22:04.000Z">2017-03-15</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    12 分钟 读完 (大约 1859 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/15/《Android开源库》 Realm For Android~ Scheme & JSON & Notification（译文）/">《Android开源库》 Realm For Android~ Scheme &amp; JSON &amp; Notification（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a><a href></a>Scheme</h2><p> Realm 使用所有项目中的 Realm 模型类来创建 schema。但这个行为是可以改变的，例如，你可以通过使用 <a href="https://realm.io/docs/java/latest/api/io/realm/annotations/RealmModule.html" target="_blank" rel="noopener">RealmModule</a> 让 Realm 只包含所有模型类的一个子集。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Create the module</span><br><span class="line">@RealmModule(classes = &#123; Person.class, Dog.class &#125;)</span><br><span class="line">public class MyModule &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Set the module in the RealmConfiguration to allow only classes defined by the module.</span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .modules(new MyModule())</span><br><span class="line">  .build();</span><br><span class="line"></span><br><span class="line">// It is possible to combine multiple modules to one schema.</span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .modules(new MyModule(), new MyOtherModule())</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>


<h4 id="共享schemas"><a href="#共享schemas" class="headerlink" title="共享schemas"></a><a href></a>共享schemas</h4><blockquote>
<p>库（library）开发者请注意： 在库中使用到的 Realm 必须通过 RealmModule 来暴露和使用其 schema。</p>
<p> 这样可以防止库项目自动生成默认 RealmModule 从而避免和 app 生成的默认 RealmModule 冲突。库项目也是通过 RealmModule 来向 app 项目暴露自己的 Realm 模型类。</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// Library must create a module and set library = true. This will prevent the default</span><br><span class="line">// module from being created.</span><br><span class="line">// allClasses = true can be used instead of listing all classes in the library.</span><br><span class="line">@RealmModule(library = true, allClasses = true)</span><br><span class="line">public class MyLibraryModule &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Library projects are therefore required to explicitly set their own module.</span><br><span class="line">RealmConfiguration libraryConfig = new RealmConfiguration.Builder()</span><br><span class="line">  .name(&quot;library.realm&quot;)</span><br><span class="line">  .modules(new MyLibraryModule())</span><br><span class="line">  .build();</span><br><span class="line"></span><br><span class="line">// Apps can add the library RealmModule to their own schema.</span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .name(&quot;app.realm&quot;)</span><br><span class="line">  .modules(Realm.getDefaultModule(), new MyLibraryModule())</span><br><span class="line">  .build();</span><br></pre></td></tr></table></figure>

<p> 目前你不可以在一个 Realm 文件里声明多个 RealmModule。如果你有多个 RealmModule，你需要将它们声明在多个 Realm 文件中以确保每个文件只有一个 RealmModule 声明。</p>
<p> 这里有一个<a href="https://github.com/realm/realm-java/tree/master/examples/realmModuleExample" target="_blank" rel="noopener">如何使用在库和 app 项目间使用 RealmModule 的完整例子</a>。</p>
<hr>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a><a href></a>JSON</h2><p> 你可以直接将 JSON 对象添加到 Realm 中，这些 JSON 对象可以是一个 String、一个 <a href="http://developer.android.com/reference/org/json/JSONObject.html" target="_blank" rel="noopener">JSONObject</a> 或者是一个 <a href="http://developer.android.com/reference/java/io/InputStream.html" target="_blank" rel="noopener">InputStream</a>。Realm 会忽略 JSON 中存在但未定义在 Realm 模型类里的字段。单独对象可以通过 <a href="https://realm.io/cn/docs/java/latest/api/io/realm/Realm.html#createObjectFromJson-java.lang.Class-java.lang.String-" target="_blank" rel="noopener">Realm.createObjectFromJson()</a> 添加。对象列表可以通过 <a href="https://realm.io/cn/docs/java/latest/api/io/realm/Realm.html#createAllFromJson-java.lang.Class-java.lang.String-" target="_blank" rel="noopener">Realm.createAllFromJson()</a> 添加。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// A RealmObject that represents a city</span><br><span class="line">public class City extends RealmObject &#123;</span><br><span class="line">    private String city;</span><br><span class="line">    private int id;</span><br><span class="line">    // getters and setters left out ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Insert from a string</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        realm.createObjectFromJson(City.class, &quot;&#123; city: \&quot;Copenhagen\&quot;, id: 1 &#125;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Insert multiple items using an InputStream</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            InputStream is = new FileInputStream(new File(&quot;path_to_file&quot;));</span><br><span class="line">            realm.createAllFromJson(City.class, is);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            throw new RuntimeException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> Realm 解析 JSON 时遵循如下规则：</p>
<ol start="2">
<li>使用包含空值（null）的 JSON 创建对象： 1) 对于非必须（可为空值的属性），设置其值为 null； 2) 对于必须（不可为空值的属性），抛出异常； </li>
<li>使用包含空值（null）的 JSON 更新对象： 1)对于非必须（可为空值的属性），设置其值为 null； 2) 对于必须（不可为空值的属性），抛出异常； </li>
<li>使用不包含对应属性的 JSON： 1)该属性保持不变  </li>
</ol>
<hr>
<h2 id="通知（Notifications）"><a href="#通知（Notifications）" class="headerlink" title="通知（Notifications）"></a><a href></a>通知（Notifications）</h2><blockquote>
<p>Listener 只工作于 Looper 线程。对于非 Looper 线程请使用 Realm.waitForChange()。</p>
</blockquote>
<h4 id="Realm-Notification"><a href="#Realm-Notification" class="headerlink" title="Realm Notification"></a><a href></a>Realm Notification</h4><p> 当后台线程向 Realm 添加数据，你的 UI 线程或者其它线程可以添加一个监听器来获取数据改变的通知。监听器在 Realm 数据改变的时候会被触发。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class MyActivity extends Activity &#123;</span><br><span class="line">    private Realm realm;</span><br><span class="line">    private RealmChangeListener realmListener;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">      super.onCreate(savedInstanceState);</span><br><span class="line">      realm = Realm.getDefaultInstance();</span><br><span class="line">      realmListener = new RealmChangeListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onChange(Realm realm) &#123;</span><br><span class="line">            // ... do something with the updates (UI, etc.) ...</span><br><span class="line">        &#125;&#125;;</span><br><span class="line">      realm.addChangeListener(realmListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDestroy() &#123;</span><br><span class="line">        super.onDestroy();</span><br><span class="line">        // Remove the listener.</span><br><span class="line">        realm.removeChangeListener(realmListener);</span><br><span class="line">        // Close the Realm instance.</span><br><span class="line">        realm.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 除了在 Realm 实例上添加监听器以外，你还可以在 RealmObject 和 RealmResults 实例上添加监听器。你可以通过这样的方式来监视对象和查询结果的改变。另外，当监听回调函数被调用时，相应的数据已经被更新，你不需要去做刷新操作。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public class MyActivity extends Activity &#123;</span><br><span class="line">    private Realm realm;</span><br><span class="line">    private RealmChangeListener puppiesListener;</span><br><span class="line">    private RealmChangeListener dogListener;</span><br><span class="line"></span><br><span class="line">    private RealmResults&lt;Dog&gt; puppies;</span><br><span class="line">    private Dog dog;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">      super.onCreate(savedInstanceState);</span><br><span class="line">      realm = Realm.getDefaultInstance();</span><br><span class="line">      puppiesListener = new RealmChangeListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onChange(RealmResults&lt;Dog&gt; puppies) &#123;</span><br><span class="line">            // ... do something with the updated puppies instance</span><br><span class="line">        &#125;&#125;;</span><br><span class="line"></span><br><span class="line">      // Find all the puppies</span><br><span class="line">      puppies = realm.where(Dog.class).lessThanOrEqualTo(&quot;age&quot;, 2).findAll();</span><br><span class="line">      puppies.addChangeListener(puppiesListener);</span><br><span class="line"></span><br><span class="line">      dogListener = new RealmChangeListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onChange(Dog dog) &#123;</span><br><span class="line">            // ... do something with the updated Dog instance</span><br><span class="line">        &#125;&#125;;</span><br><span class="line"></span><br><span class="line">      dog = realm.where(Dog.class).equalTo(&quot;name&quot;, &quot;Fido&quot;).findFirst();</span><br><span class="line">      dog.addChangeListener(dogListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDestroy() &#123;</span><br><span class="line">        super.onDestroy();</span><br><span class="line">        // Remove the listeners</span><br><span class="line">        puppies.removeChangeListener(puppiesListener);</span><br><span class="line">        dog.removeChangeListener(dogListener);</span><br><span class="line">        // Close the Realm instance.</span><br><span class="line">        realm.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 你可以轻松移除所有监听器。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">realm.removeAllChangeListeners();</span><br></pre></td></tr></table></figure>

<p> 最后，这些监听器同样会在监听对象的引用对象改变时被触发，请见示例</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Person person = realm.where(Person.class).findFirst();</span><br><span class="line">person.getDogs(); // =&gt; 2 - Assume there are 2 dogs in the list</span><br><span class="line">person.addChangeListener(new RealmChangeListener() &#123;</span><br><span class="line">                             @Override</span><br><span class="line">                             public void onChange(Person person) &#123;</span><br><span class="line">                                 // React to the change in the Person instance.</span><br><span class="line">                                 // This will also get called when any referenced dogs are updated.</span><br><span class="line">                             &#125;</span><br><span class="line">                         &#125;);</span><br><span class="line">Dog dog = person.getDogs().get(0);</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">dog.setAge(5);</span><br><span class="line">realm.commitTransaction();</span><br><span class="line">// Person change listener is called on the next iteration of the run loop because</span><br><span class="line">// a referenced dog object changed.</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="Collection-Notifications"><a href="#Collection-Notifications" class="headerlink" title="Collection Notifications"></a><a href></a>Collection Notifications</h4><p> 集合通知与Realm通知不同，因为它们包含描述在细粒度级别发生的更改的信息。 这包括自上次通知以来已插入，删除或修改的对象的索引。<br> 集合通知是异步传递的，首先是初始结果，然后是在修改集合中的任何一个或者多个对象的写入事务之后，这个结果都会被重新初始化。<br> 这些更改可以通过传递给更改侦听器的OrderedCollectionChangeSet参数访问。 此对象保存有关由删除，插入和更改影响的索引的信息。<br> 删除和插入，当对象开始和停止是集合的一部分时记录索引。 这会考虑到何时将对象添加到领域或从领域中删除它们。 对于RealmResults，当你筛选特定值并且对象已更改，以使其现在匹配查询或不再匹配时，这也适用。<br> 当对象的字段发生更改时，系统会通知你有关更改的信息，该字段以前是集合的一部分，但仍属于集合的一部分。 当一对一和多对多关系改变时，这种情况也会发生。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Dog extends RealmObject &#123;</span><br><span class="line">  public String name;</span><br><span class="line">  public int age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Person exteds RealmObject &#123;</span><br><span class="line">  public String name;</span><br><span class="line">  public RealmList&lt;Dog&gt; dogs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 让我们假设你遵守上面的模型代码给出的狗主人列表。 你将收到关于匹配的Person对象的修改的通知，例如：</p>
<ul>
<li>修改Person的名字 </li>
<li>从一个Person拥有的狗的列表中增加或者删除一个 </li>
<li>修改属于这个人的一条狗的年龄  这使得可以离散地控制对UI中的内容进行的动画和视觉更新，而不是在每次发生通知时任意重新加载所有内容。</li>
</ul>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">private final OrderedRealmCollectionChangeListener&lt;RealmResults&lt;Person&gt;&gt; changeListener = new OrderedRealmCollectionChangeListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onChange(RealmResults&lt;Person&gt; collection, OrderedCollectionChangeSet changeSet) &#123;</span><br><span class="line">        // `null`  means the async query returns the first time.</span><br><span class="line">        if (changeSet == null) &#123;</span><br><span class="line">            notifyDataSetChanged();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // For deletions, the adapter has to be notified in reverse order.</span><br><span class="line">        OrderedCollectionChangeSet.Range[] deletions = changeSet.getDeletionRanges();</span><br><span class="line">        for (int i = deletions.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">            OrderedCollectionChangeSet.Range range = deletions[i];</span><br><span class="line">            notifyItemRangeRemoved(range.startIndex, range.length);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        OrderedCollectionChangeSet.Range[] insertions = changeSet.getInsertionRanges();</span><br><span class="line">        for (OrderedCollectionChangeSet.Range range : insertions) &#123;</span><br><span class="line">            notifyItemRangeInserted(range.startIndex, range.length);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        OrderedCollectionChangeSet.Range[] modifications = changeSet.getChangeRanges();</span><br><span class="line">        for (OrderedCollectionChangeSet.Range range : modifications) &#123;</span><br><span class="line">            notifyItemRangeChanged(range.startIndex, range.length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p> <a href="https://realm.io/docs/java/latest/#adapters" target="_blank" rel="noopener">RealmRecyclerViewAdapter</a> 也可以达到同样的效果.</p>
<hr>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#schemas" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#schemas</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-10T13:11:19.000Z">2017-03-10</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 977 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/10/《Android开源库》 Realm For Android~ Threading（译文）/">《Android开源库》 Realm For Android~ Threading（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a><a href></a>线程</h2><p> 其实对于跨线程使用 Realm，你需要知道的事情并不多。关键点是得益于<a href="https://realm.io/docs/java/latest/#auto-updating-objects0" target="_blank" rel="noopener">对象</a>和<a href="https://realm.io/docs/java/latest/#auto-updating-results" target="_blank" rel="noopener">查询</a>的即时更新特性，你不需要担心数据在多线程时的一致性和效率问题。</p>
<p> 你可以实时在不同线程中读取和写入 Realm 对象，不用担心其它线程会对同一对象进行操作。你需要在改变对象时使用事务，在另一线程中指向同一对象的数据会被即时更新（更新会在下一次事件循环时进行）。</p>
<p> 唯一局限是你不能随意跨线程传递 Realm 对象。如果你在另一线程使用同一对象，请在哪个线程使用查询重新获得该对象。请谨记所有的 Realm 对象都会在不同线程中保持更新——Realm 会在数据改变时<a href="https://realm.io/docs/java/latest/#notifications" target="_blank" rel="noopener">通知</a>你。</p>
<p> 参考如下实例。</p>
<h4 id="Realm-线程实例"><a href="#Realm-线程实例" class="headerlink" title="Realm 线程实例"></a><a href></a>Realm 线程实例</h4><p> 假设我们的应用要展示一个用户列表。我们在一个后台线程中（一个安卓 IntentService）从远端获取新用户并将它们存储到 Realm 中。但后台线程存储新用户时，UI 线程中的数据会被自动更新。UI 线程会通过 RealmChangeListener 得到通知，这时 UI 线程应刷新相应的控件。因为 Realm 的<a href="https://realm.io/docs/java/latest/#auto-updating-results" target="_blank" rel="noopener">自动更新</a>特性，无需重新查询数据。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">// in a Fragment or Activity, etc</span><br><span class="line">@Override</span><br><span class="line">public void onActivityCreated(Bundle savedInstanceState) &#123;</span><br><span class="line">    // ... boilerplate omitted for brevity</span><br><span class="line">    realm = Realm.getDefaultInstance();</span><br><span class="line">    // get all the customers</span><br><span class="line">    RealmResults&lt;Customer&gt; customers = realm.where(Customer.class).findAllAsync();</span><br><span class="line">    // ... build a list adapter and set it to the ListView/RecyclerView/etc</span><br><span class="line"></span><br><span class="line">    // set up a Realm change listener</span><br><span class="line">    changeListener = new RealmChangeListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onChange(RealmResults&lt;Customer&gt; results) &#123;</span><br><span class="line">            // This is called anytime the Realm database changes on any thread.</span><br><span class="line">            // Please note, change listeners only work on Looper threads.</span><br><span class="line">            // For non-looper threads, you manually have to use Realm.waitForChange() instead.</span><br><span class="line">            listAdapter.notifyDataSetChanged(); // Update the UI</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    // Tell Realm to notify our listener when the customers results</span><br><span class="line">    // have changed (items added, removed, updated, anything of the sort).</span><br><span class="line">    customers.addChangeListener(changeListener);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// In a background service, in another thread</span><br><span class="line">public class PollingService extends IntentService &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onHandleIntent(Intent intent) &#123;</span><br><span class="line">        Realm realm = Realm.getDefaultInstance();</span><br><span class="line">        try &#123;</span><br><span class="line">            // go do some network calls/etc and get some data and stuff it into a &apos;json&apos; var</span><br><span class="line">            String json = customerApi.getCustomers();</span><br><span class="line">            realm.beginTransaction();</span><br><span class="line">            realm.createObjectFromJson(Customer.class, json); // Save a bunch of new Customer objects</span><br><span class="line">            realm.commitTransaction();</span><br><span class="line">            // At this point, the data in the UI thread is already up to date.</span><br><span class="line">            // ...</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            realm.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 一旦后台服务添加了新用户，customer 列表会被<a href="https://realm.io/docs/java/latest/#auto-updating-results" target="_blank" rel="noopener">自动更新</a>，不需要你的任何动作。对于<a href="https://realm.io/docs/java/latest/#auto-updating-objects" target="_blank" rel="noopener">单个的 RealmObject</a> 也是同样。假设你需要管理一个 Realm 对象，只需要在一个线程中更新它的数据，UI 线程会自动得到更新后的数据。如果你需要对数据更新作出回应，只需要<a href="https://realm.io/docs/java/latest/#notifications" target="_blank" rel="noopener">添加一个 listener</a>，就像我们在以上代码中所作的一样。</p>
<p> 这就是所有啦。</p>
<hr>
<h4 id="跨线程使用-Realm"><a href="#跨线程使用-Realm" class="headerlink" title="跨线程使用 Realm"></a><a href></a>跨线程使用 Realm</h4><p> 请谨记：Realm、RealmObject 和RealmResults 实例都不可以跨线程使用。但是你可以使用异步查询和异步事务来将部分操作放入后台线程进行，待完成时调用线程被通知以获取结果。</p>
<p> 当你需要跨线程访问同一部分数据时，只需简单地在该线程重新获取一个 Realm 实例（例如：Realm.getInstance(RealmConfiguration config) 或是其他类似方法），然后通过这个 Realm 实例来查询获得你需要的数据。查询获得的对象会映射到 Realm 中的相同数据，由此方法获得对象在其线程中任何地方都可读写</p>
<hr>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#threading" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#threading</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-07T13:04:09.000Z">2017-03-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1662 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/07/《Android开源库》 Realm For Android~ Realm（译文）/">《Android开源库》 Realm For Android~ Realm（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a><a href></a>Realm</h2><p> Realm(s) 是我们对数据库的称谓：它包含多个不同的对象，并对应磁盘中的一个文件。在使用之前，需要对 Realm 库进行初始化操作：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Realm.init(context);</span><br></pre></td></tr></table></figure>

<p> 你需要提供一个安卓的 Context 对象来对 Realm 进行初始化。初始化操作只要进行一次。继承 Application 并在重载的 onCreate() 方法中进行初始化是个不错的主意。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class MyApplication extends Application &#123;</span><br><span class="line">  @Override</span><br><span class="line">  public void onCreate() &#123;</span><br><span class="line">    super.onCreate();</span><br><span class="line">    Realm.init(this);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 请别忘了修改 AndroidManifest.xml:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">  android:name=&quot;.MyApplication&quot;</span><br><span class="line">  ...</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>


<h4 id="配置Realm"><a href="#配置Realm" class="headerlink" title="配置Realm"></a><a href></a>配置Realm</h4><p> RealmConfiguration 用来配置要被创建的 Realm 的各种特性。最简配置如下所示：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration config = new RealmConfiguration.Builder().build();</span><br></pre></td></tr></table></figure>

<p> 如上配置的 Realm 会被存储在 Context.getFilesDir() 并且命名为 default.realm。</p>
<p> 一个典型的配置如下所示：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// The RealmConfiguration is created using the builder pattern.</span><br><span class="line">// The Realm file will be located in Context.getFilesDir() with name &quot;myrealm.realm&quot;</span><br><span class="line">RealmConfiguration config = new RealmConfiguration.Builder()</span><br><span class="line">  .name(&quot;myrealm.realm&quot;)</span><br><span class="line">  .encryptionKey(getKey())</span><br><span class="line">  .schemaVersion(42)</span><br><span class="line">  .modules(new MySchemaModule())</span><br><span class="line">  .migration(new MyMigration())</span><br><span class="line">  .build();</span><br><span class="line">// Use the config</span><br><span class="line">Realm realm = Realm.getInstance(config);</span><br></pre></td></tr></table></figure>

<p> 你还可以有多个RealmConfiguration。如此，你便可以控制Realm的版本、结构（schema）和路径。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration myConfig = new RealmConfiguration.Builder()</span><br><span class="line">  .name(&quot;myrealm.realm&quot;)</span><br><span class="line">  .schemaVersion(2)</span><br><span class="line">  .modules(new MyCustomSchema())</span><br><span class="line">  .build();</span><br><span class="line"></span><br><span class="line">RealmConfiguration otherConfig = new RealmConfiguration.Builder()</span><br><span class="line">  .name(&quot;otherrealm.realm&quot;)</span><br><span class="line">  .schemaVersion(5)</span><br><span class="line">  .modules(new MyOtherSchema())</span><br><span class="line">  .build();</span><br><span class="line"></span><br><span class="line">Realm myRealm = Realm.getInstance(myConfig);</span><br><span class="line">Realm otherRealm = Realm.getInstance(otherConfig);</span><br></pre></td></tr></table></figure>

<p> 你可以使用 Realm.getPath() 来获取 Realm 文件的绝对路径。</p>
<p> 很重要的一点是 Realm 实例是线程单例化的，也就是说多次在同一线程调用静态构建器会返回同一 Realm 实例。</p>
<hr>
<h4 id="默认-RealmConfiguration"><a href="#默认-RealmConfiguration" class="headerlink" title="默认 RealmConfiguration"></a><a href></a>默认 RealmConfiguration</h4><p> RealmConfiguration可以保存为默认配置。通过在自定义的Application设置默认的Realm配置，可以使你在代码中的其他地方更加方便地创建针对该默认配置的Realm。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class MyApplication extends Application &#123;</span><br><span class="line">  @Override</span><br><span class="line">  public void onCreate() &#123;</span><br><span class="line">    super.onCreate();</span><br><span class="line">    // The Realm file will be located in Context.getFilesDir() with name &quot;default.realm&quot;</span><br><span class="line">    Realm.init(this);</span><br><span class="line">    RealmConfiguration config = new RealmConfiguration.Builder().build();</span><br><span class="line">    Realm.setDefaultConfiguration(config);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class MyActivity extends Activity &#123;</span><br><span class="line">  @Override</span><br><span class="line">  protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    Realm realm = Realm.getDefaultInstance();</span><br><span class="line">    try &#123;</span><br><span class="line">      // ... Do something ...</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      realm.close();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="In-Memory-Realm"><a href="#In-Memory-Realm" class="headerlink" title="In-Memory Realm"></a><a href></a>In-Memory Realm</h4><p> 定义一个非持久化的、存在于内存中的 Realm 实例：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration myConfig = new RealmConfiguration.Builder()</span><br><span class="line">    .name(&quot;myrealm.realm&quot;)</span><br><span class="line">    .inMemory()</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>

<p> 这样就可以创建一个存在于“内存中的” Realm。“内存中的”Realm 在内存紧张的情况下仍有可能使用到磁盘存储，但是这些磁盘空间都会在Realm实例完全关闭的时候被释放。</p>
<p> 请注意使用同样的名称同时创建“内存中的”Realm 和常规的（持久化）Realm 是不允许的。</p>
<p> 当某个“内存中的”Realm 的所有实例引用都被释放，该 Realm 下的数据也同时会被清除。建议在你的应用生命周期中保持对“内存中的” Realm 实例的引用以避免非期望的数据丢失。</p>
<hr>
<h4 id="Dynamic-Realm"><a href="#Dynamic-Realm" class="headerlink" title="Dynamic Realm"></a><a href></a>Dynamic Realm</h4><p> 对于普通的 Realm 来说，数据模型被定义成了 RealmObject 的子类。这样做保证了类型安全，但有时候某些数据模型在编译期是无法获得的。例如在处理数据迁移（migration）或CSV文件的时候。</p>
<p> DynamicRealm 是普通 Realm 的一个变种。它可以在没有 RealmObject 子类的情况下操作 Realm 数据。其对数据的访问是基于字符串而非 RealmObject 的定义。</p>
<p> 创建 Dynamic Realm 使用与创建普通 Realm 相同的RealmConfiguration，但是它的创建过程会忽略对 schema、migration以及 schema 版本的检查。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">RealmConfiguration realmConfig = new RealmConfiguration.Builder().build();</span><br><span class="line">DynamicRealm realm = DynamicRealm.getInstance(realmConfig);</span><br><span class="line"></span><br><span class="line">// In a DynamicRealm all objects are DynamicRealmObjects</span><br><span class="line">DynamicRealmObject person = realm.createObject(&quot;Person&quot;);</span><br><span class="line"></span><br><span class="line">// All fields are accessed using strings</span><br><span class="line">String name = person.getString(&quot;name&quot;);</span><br><span class="line">int age = person.getInt(&quot;age&quot;);</span><br><span class="line"></span><br><span class="line">// An underlying schema still exists, so accessing a field that does not exist</span><br><span class="line">// will throw an exception</span><br><span class="line">person.getString(&quot;I don&apos;t exist&quot;);</span><br><span class="line"></span><br><span class="line">// Queries still work normally</span><br><span class="line">RealmResults&lt;DynamicRealmObject&gt; persons = realm.where(&quot;Person&quot;)</span><br><span class="line">    .equalTo(&quot;name&quot;, &quot;John&quot;)</span><br><span class="line">    .findAll();</span><br></pre></td></tr></table></figure>

<p> DynamicRealm 以类型安全和性能为代价，换来了更多的灵活性。请在你确实需要这些灵活性的情况下使用。</p>
<hr>
<h4 id="关闭Realm实例"><a href="#关闭Realm实例" class="headerlink" title="关闭Realm实例"></a><a href></a>关闭Realm实例</h4><p> Realm 实现了 Closeable 接口以便与释放 native 内存和文件描述符，请务必在使用完毕后关闭 Realm 实例。</p>
<p> Realm 实例是基于引用计数的, 也就是说假设你在同一个线程中调用了 getInstance() 两次，你需要同样调用 close() 两次以关闭该实例。举例来说，如果你需要实现 Runnable，简单地在函数开始的时候调用 getInstance()，在函数结束的时候调用 close() 即可！</p>
<p> 对于UI线程，你可以选择在 onDestroy() 方法内调用 realm.close()。</p>
<p> 如果你想使用除 UI 线程外的 Looper 线程，可以参考以下代码：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class MyThread extends Thread &#123;</span><br><span class="line"></span><br><span class="line">    private Realm realm;</span><br><span class="line"></span><br><span class="line">    public void run() &#123;</span><br><span class="line">        Looper.prepare();</span><br><span class="line">        try &#123;</span><br><span class="line">            realm = Realm.getDefaultInstance();</span><br><span class="line">            //... Setup the handlers using the Realm instance ...</span><br><span class="line">            Lopper.loop();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (realm != null) &#123;</span><br><span class="line">                realm.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 对于 AsyncTask，这里有个不错的例子可以参考：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">protected Void doInBackground(Void... params) &#123;</span><br><span class="line">    Realm realm = Realm.getDefaultInstance();</span><br><span class="line">    try &#123;</span><br><span class="line">        // ... Use the Realm instance ...</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        realm.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 如果你想使用 Thread 和 Runnable 进行一些短期任务，参考如下代码：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/ Run a non-Looper thread with a Realm instance.</span><br><span class="line">Thread thread = new Thread(new Runnable() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        Realm realm = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            realm = Realm.getDefaultInstance();</span><br><span class="line">            // ... Use the Realm instance ...</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (realm != null) &#123;</span><br><span class="line">                realm.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure>

<p> 如果你很幸运地工作在 minSdkVersion &gt;= 19 且 Java &gt;= 7 之下，可以使用try-with-resources：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try (Realm realm = Realm.getDefaultInstance()) &#123;</span><br><span class="line">    // No need to close the Realm instance manually</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="自动刷新"><a href="#自动刷新" class="headerlink" title="自动刷新"></a><a href></a>自动刷新</h4><p> 如果 Realm 实例存在于一个带有 Looper 的线程，那么这个 Realm 实例即具有自动更新的功能。这意味这如果发生了 Realm 数据库的变化，那么该 Realm 实例会在下一个事件循环（event loop）中自动更新。这个便捷的功能使你不必花费太多的精力就能保证的UI与数据的实时同步。</p>
<p> 如果 Realm 的实例所在线程没有绑定 Looper，那么该实例不会被更新直到你手动调用 waitForChange() 方法。请注意，不更新 Realm 以保持对旧数据的引用会造成而外的磁盘和内存开销。这也是为什么要在线程结束时调用 close() 关闭 Realm 实例的一个重要原因。</p>
<p> 如果你想确定当前 Realm 实例是否有自动更新功能，可以通过调用 isAutoRefresh() 方法查询。</p>
<hr>
<h4 id="查找-Realm-数据库文件"><a href="#查找-Realm-数据库文件" class="headerlink" title="查找 Realm 数据库文件"></a><a href></a>查找 Realm 数据库文件</h4><p> 如果你想知道你应用的 Realm 文件的具体路径，请参见这个 StackOverflow上的答案。</p>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#realms" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#realms</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-06T02:32:43.000Z">2017-03-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    20 分钟 读完 (大约 3072 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/06/《Android开源库》 Realm For Android~ Queries（译文）/">《Android开源库》 Realm For Android~ Queries（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a><a href></a>查询</h2><blockquote>
<p>Realm 中的所有读取（包括查询）操作都是延迟执行的，且数据绝不会被拷贝。</p>
<p> Realm 的查询引擎使用 Fluent interface 来构造多条件查询。<br> 使用 User 类 -</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class User extends RealmObject &#123;</span><br><span class="line"></span><br><span class="line">    @PrimaryKey</span><br><span class="line">    private String          name;</span><br><span class="line">    private int             age;</span><br><span class="line"></span><br><span class="line">    @Ignore</span><br><span class="line">    private int             sessionId;</span><br><span class="line"></span><br><span class="line">    // Standard getters &amp; setters generated by your IDE…</span><br><span class="line">    public String getName() &#123; return name; &#125;</span><br><span class="line">    public void   setName(String name) &#123; this.name = name; &#125;</span><br><span class="line">    public int    getAge() &#123; return age; &#125;</span><br><span class="line">    public void   setAge(int age) &#123; this.age = age; &#125;</span><br><span class="line">    public int    getSessionId() &#123; return sessionId; &#125;</span><br><span class="line">    public void   setSessionId(int sessionId) &#123; this.sessionId = sessionId; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 比如查找所有叫做 John 或 Peter 的用户，你可以这么写：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// Build the query looking at all users:</span><br><span class="line">RealmQuery&lt;User&gt; query = realm.where(User.class);</span><br><span class="line"></span><br><span class="line">// Add query conditions:</span><br><span class="line">query.equalTo(&quot;name&quot;, &quot;John&quot;);</span><br><span class="line">query.or().equalTo(&quot;name&quot;, &quot;Peter&quot;);</span><br><span class="line"></span><br><span class="line">// Execute the query:</span><br><span class="line">RealmResults&lt;User&gt; result1 = query.findAll();</span><br><span class="line"></span><br><span class="line">// Or alternatively do the same all at once (the &quot;Fluent interface&quot;):</span><br><span class="line">RealmResults&lt;User&gt; result2 = realm.where(User.class)</span><br><span class="line">                                  .equalTo(&quot;name&quot;, &quot;John&quot;)</span><br><span class="line">                                  .or()</span><br><span class="line">                                  .equalTo(&quot;name&quot;, &quot;Peter&quot;)</span><br><span class="line">                                  .findAll();</span><br></pre></td></tr></table></figure>

<p> 这个查询将返回一个包含名为John或者Peter的人的RealmResults实例。在findAll()方法被调用的时候，查询操作就执行了。findAll()是findAll家族的一员，例如findAllSorted()将返回一个排序后的结果集；findAllAsync()将在后台线程中执行异步查询。具体详情请阅<a href="https://realm.io/docs/java/latest/api/io/realm/RealmQuery.html" target="_blank" rel="noopener">API指南</a>。</p>
<p> 这些对象并非拷贝，也就是说你得到的是一个匹配对象引用的列表，你对匹配对象所有的操作都是直接施加于它的原始对象。RealmResults 继承自 Java 的 AbstractList，行为类似。例如你可以通过 index 来访问其中的某个对象。<br> 当查询没有任何匹配时，返回的 RealmResults 对象将不会为 null，取而代之的是它的 size() 方法将返回 0。</p>
<p> 修改或删除 RealmResults 中任何一个对象都必须在写入事务中完成。</p>
<p> 你也可以查询<a href="https://realm.io/docs/java/latest/#link-queries" target="_blank" rel="noopener">关系</a>.</p>
<hr>
<h4 id="查询条件"><a href="#查询条件" class="headerlink" title="查询条件"></a><a href></a>查询条件</h4><p> 使用where()方法构建一个由RealmQuery 对象代表的查询。一旦构建了RealmQuery ，你可以使用各种各样的谓词来过滤查询得到的数据。大多数谓词意义从字面上都能看出来。</p>
<p> 谓词的第一个参数是字段名。 如果字段的类型不支持谓词，则抛出异常。 有关详细信息，请参阅RealmQuery的API参考。</p>
<p> 对于所有数据类型，你有以下谓词：</p>
<ul>
<li><p>equalTo() </p>
</li>
<li><p>notEqualTo()  要将字段与值列表匹配，请使用in（）。 例如，要查找名称“Jill”，“William”或“Trillian”，您可以在（“name”，new String [] {“Jill”，“William”，“Trillian”}中使用。 in（）谓词适用于字符串，二进制数据和数字字段。</p>
<p>数字数据类型（包括日期）允许这些附加谓词：</p>
</li>
</ul>
<ul>
<li>between() (两个端点会被包含在内, 即，有界间隔) </li>
<li>greaterThan() </li>
<li>lessThan() </li>
<li>greaterThanOrEqualTo() </li>
<li>lessThanOrEqualTo()  字符串字段允许如下附加谓词：</li>
</ul>
<ul>
<li><p>contains() </p>
</li>
<li><p>beginsWith() </p>
</li>
<li><p>endsWith() </p>
</li>
<li><p>like()  所有四个字符串谓词都有可选的第三个参数，用于控制大小写区分。 将其设置为Case.INSENSITIVE以在匹配时忽略大小写，或者将Case.SENSITIVE设置为执行区分大小写匹配。 默认值为Case.SENSITIVE。</p>
<p>谓词like（）执行glob样式通配符匹配。 匹配模式由字符和一个或多个通配符组成：</p>
</li>
</ul>
<ul>
<li><ul>
<li>匹配0个或多个Unicode字符 </li>
</ul>
</li>
<li><p>？匹配1个Unicode字符  例如，考虑一个有四个对象的Realm，名为name的字段，其值有William，Bill，Jill和Trillian。 类似于（“name”，“？ill <em>”）的谓词将匹配前三个对象，类似（“name”，“</em> ia？”）将匹配第一个和最后一个对象。</p>
<p>二进制数据，字符串和RealmObject（RealmList）的列表可以是空的，即具有零的长度。 如下是检查是否为空的谓词：</p>
</li>
</ul>
<ul>
<li>isEmpty() </li>
<li>isNotEmpty()  如果不是必填字段，则值可以为null（记住，RealmObjects字段不是必填，值可以为null）。 用于匹配空值的两个有用谓词是：</li>
</ul>
<ul>
<li>isNull() </li>
<li>isNotNull()  </li>
</ul>
<hr>
<h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a><a href></a>逻辑运算符</h4><p> 每个查询条件都会被被隐式地被逻辑和（&amp;）组合在一起，而逻辑或（or）需要显式地去执行 or()。</p>
<p> 使用 User 类 -</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class User extends RealmObject &#123;</span><br><span class="line"></span><br><span class="line">    @PrimaryKey</span><br><span class="line">    private String          name;</span><br><span class="line">    private int             age;</span><br><span class="line"></span><br><span class="line">    @Ignore</span><br><span class="line">    private int             sessionId;</span><br><span class="line"></span><br><span class="line">    // Standard getters &amp; setters generated by your IDE…</span><br><span class="line">    public String getName() &#123; return name; &#125;</span><br><span class="line">    public void   setName(String name) &#123; this.name = name; &#125;</span><br><span class="line">    public int    getAge() &#123; return age; &#125;</span><br><span class="line">    public void   setAge(int age) &#123; this.age = age; &#125;</span><br><span class="line">    public int    getSessionId() &#123; return sessionId; &#125;</span><br><span class="line">    public void   setSessionId(int sessionId) &#123; this.sessionId = sessionId; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 你也可以将查询条件组合在一起，使用 beginGroup()（相当于左括号）和 endGroup()（相当于右括号）：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; r = realm.where(User.class)</span><br><span class="line">                            .greaterThan(&quot;age&quot;, 10)  // implicit AND</span><br><span class="line">                            .beginGroup()</span><br><span class="line">                                .equalTo(&quot;name&quot;, &quot;Peter&quot;)</span><br><span class="line">                                .or()</span><br><span class="line">                                .contains(&quot;name&quot;, &quot;Jo&quot;)</span><br><span class="line">                            .endGroup()</span><br><span class="line">                            .findAll();</span><br></pre></td></tr></table></figure>

<p> 此外，也可以用 not() 否定一个条件。该 not() 运算符可以与 beginGroup()/endGroup() 一起使用来否定子条件。假如说你想查询名字不是“Peter”或者“Jo.”的User。查询方式如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RealmResult&lt;User&gt; r = realm.where(User.class)</span><br><span class="line">                           .not()</span><br><span class="line">                           .beginGroup()</span><br><span class="line">                                .equalTo(&quot;name&quot;, &quot;Peter&quot;)</span><br><span class="line">                                .or()</span><br><span class="line">                                .contains(&quot;name&quot;, &quot;Jo&quot;)</span><br><span class="line">                            .endGroup()</span><br><span class="line">                            .findAll();</span><br></pre></td></tr></table></figure>

<p> 当然，对于这种特定的查询，使用in()更为简洁：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RealmResult&lt;User&gt; r = realm.where(User.class)</span><br><span class="line">                   .not()</span><br><span class="line">                   .in(&quot;name&quot;, new String[]&#123;&quot;Peter&quot;, &quot;Jo&quot;&#125;)</span><br><span class="line">                    finalAll();</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a><a href></a>排序</h4><p> 当你执行完查询获得结果后，可以对它进行排序：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; result = realm.where(User.class).findAll();</span><br><span class="line">result = result.sort(&quot;age&quot;); // Sort ascending</span><br><span class="line">result = result.sort(&quot;age&quot;, Sort.DESCENDING);</span><br></pre></td></tr></table></figure>

<p> 排序默认为升序; 使用Sort.DESCENDING作为第二个可选参数可以修改为降序。 可以同时使用多个字段进行排序。</p>
<hr>
<h4 id="唯一值"><a href="#唯一值" class="headerlink" title="唯一值"></a><a href></a>唯一值</h4><p> 使用distinct（）谓词仅返回唯一值。 例如，要了解你的Realm中有多少不同的名字：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;Person&gt; unique = realm.where(Person.class).distinct(&quot;name&quot;);</span><br></pre></td></tr></table></figure>

<p> 只支持整数和字符串字段; 如果你尝试使用distinct（）不支持的字段类型，将抛出异常。 与排序一样，你可以指定多个字段。</p>
<hr>
<h4 id="链式查询"><a href="#链式查询" class="headerlink" title="链式查询"></a><a href></a>链式查询</h4><p> 因为查询结果并不会被复制，且在查询提交时并不会被执行，你可以链式串起查询并逐步进行分类筛选：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;Person&gt; teenagers = realm.where(Person.class).between(&quot;age&quot;, 13, 20).findAll();</span><br><span class="line">Person firstJohn = teenagers.where().equalTo(&quot;name&quot;, &quot;John&quot;).findFirst();</span><br></pre></td></tr></table></figure>

<p> 你也可以在子对象上使用链式查询。假设以上 Person 对象包含一个 Dog 对象列表：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Dog extends RealmObject &#123;</span><br><span class="line">    private int age;</span><br><span class="line">    // getters &amp; setters ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Person extends RealmObject &#123;</span><br><span class="line">    private int age;</span><br><span class="line">    private RealmList&lt;Dog&gt; dogs;</span><br><span class="line">    // getters &amp; setters ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 你可以查询找出所有年龄在 13 和 20 之间的 Person 并且他至少拥有一个 1 岁的 Dog：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;Person&gt; teensWithPups = realm.where(Person.class).between(&quot;age&quot;, 13, 20).equalTo(&quot;dogs.age&quot;, 1).findAll();</span><br></pre></td></tr></table></figure>

<p> 请注意，查询链最终是建立在 RealmResults 上而非 RealmQuery。如果你在某存在的 RealmQuery 上添加更多的查询条件，那么你在修改查询本身，而非查询链。请参考<a href="https://realm.io/docs/java/latest/#link-queries" target="_blank" rel="noopener">关联查询</a>。</p>
<hr>
<h4 id="查询结果的自动更新（Auto-Updating-Results）"><a href="#查询结果的自动更新（Auto-Updating-Results）" class="headerlink" title="查询结果的自动更新（Auto-Updating Results）"></a><a href></a>查询结果的自动更新（Auto-Updating Results）</h4><p> RealmResults 是对其所包含数据的实时、自动更新视图，这意味着它永远不需要被重新查询获取。数据对象的改变会在下一次 Looper 事件中被反映到相应的查询结果。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">final RealmResults&lt;Dog&gt; puppies = realm.where(Dog.class).lessThan(&quot;age&quot;, 2).findAll();</span><br><span class="line">puppies.size(); // =&gt; 0</span><br><span class="line"></span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    void public execute(Realm realm) &#123;</span><br><span class="line">        Dog dog = realm.createObject(Dog.class);</span><br><span class="line">        dog.setName(&quot;Fido&quot;);</span><br><span class="line">        dog.setAge(1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">puppies.addChangeListener(new RealmChangeListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onChange(RealmResults&lt;Dog&gt; results) &#123;</span><br><span class="line">      // results and puppies point are both up to date</span><br><span class="line">      results.size(); // =&gt; 1</span><br><span class="line">      puppies.size(); // =&gt; 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> 这对所有的 RealmResults 有效 —— 无论是否有过滤条件、是否是链式查询。</p>
<p> RealmResults 的这个特性不仅使得 Realm 快速高效，而且让你的代码更简洁。举例来说，假设你的 Activity 或者 Fragment 依赖于某个查询结果，你可以将相应的 Realm 对象或者 RealmResults 保存为一个属性，你不需要在每次访问时确定其是否被更新 —— Realm 会保证这些。</p>
<p> 你可以通过订阅 <a href="https://realm.io/cn/docs/java/latest/#notifications" target="_blank" rel="noopener">Realm notifications</a> 来得知 Realm 数据更新了，进而刷新 UI 而不必重新查询获得 RealmResults。</p>
<p> 因为查询结果的自动更新特性，请不要依赖于固定的索引（indices）、不变的条目数。</p>
<hr>
<h4 id="按类型检索对象"><a href="#按类型检索对象" class="headerlink" title="按类型检索对象"></a><a href></a>按类型检索对象</h4><p> 从 Realm 中检索对象的最基本方法是 realm.where(Foo.class).findAll()，它返回了包含被查询模型类的所有对象的 RealmResults。</p>
<p> 另外还有提供排序功能的 findAll()。参见 realm.where(Foo.class).findAllSorted() 了解详情。</p>
<hr>
<h4 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a><a href></a>聚合</h4><p> RealmResult 自带一些聚合方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; results = realm.where(User.class).findAll();</span><br><span class="line">long   sum     = results.sum(&quot;age&quot;).longValue();</span><br><span class="line">long   min     = results.min(&quot;age&quot;).longValue();</span><br><span class="line">long   max     = results.max(&quot;age&quot;).longValue();</span><br><span class="line">double average = results.average(&quot;age&quot;);</span><br><span class="line"></span><br><span class="line">long   matches = results.size();</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a><a href></a>迭代</h4><p> 可以这样遍历 RealmResults：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; results = realm.where(User.class).findAll();</span><br><span class="line">for (User u : results) &#123;</span><br><span class="line">    // ... do something with the object ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 或者使用 for 循环：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; results = realm.where(User.class).findAll();</span><br><span class="line">for (int i = 0; i &lt; results.size(); i++) &#123;</span><br><span class="line">    User u = results.get(i);</span><br><span class="line">    // ... do something with the object ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> RealmResults 的自动更新会通过 looper 事件触发，但在事件到来之前，某些元素有可能不再满足查询条件或者其已被删除。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">final RealmResults&lt;User&gt; users = getUsers();</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        users.get(0).deleteFromRealm(); // indirectly delete object</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">for (User user : users) &#123;</span><br><span class="line">    showUser(user); // Will crash for the deleted user</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 为避免该问题，可以使用 RealmResults 的 deleteFromRealm() 方法：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">final RealmResults&lt;User&gt; users = getUsers();</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        users.deleteFromRealm(0); // Delete and remove object directly</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">for (User user : users) &#123;</span><br><span class="line">    showUser(user); // Deleted user will not be shown</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a><a href></a>删除</h4><p> 你可以从查询结果中删除数据：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// obtain the results of a query</span><br><span class="line">final RealmResults&lt;Dog&gt; results = realm.where(Dog.class).findAll();</span><br><span class="line"></span><br><span class="line">// All changes to data must happen in a transaction</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        // remove single match</span><br><span class="line">        results.deleteFirstFromRealm();</span><br><span class="line">        results.deleteLastFromRealm();</span><br><span class="line"></span><br><span class="line">        // remove a single object</span><br><span class="line">        Dog dog = results.get(5);</span><br><span class="line">        dog.deleteFromRealm();</span><br><span class="line"></span><br><span class="line">        // Delete all matches</span><br><span class="line">        results.deleteAllFromRealm();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="异步查询（Asynchronous-Queries）"><a href="#异步查询（Asynchronous-Queries）" class="headerlink" title="异步查询（Asynchronous Queries）"></a><a href></a>异步查询（Asynchronous Queries）</h4><p> 可以使用后台线程进行查询。</p>
<p> Realm 的大部分查询都非常快——快到可以使用在UI线程中而感觉不到延迟。但如果需要进行非常复杂的查询或者在大量数据中进行查询，那么使用后台线程进行查询将会是一个不错的主意。</p>
<p> 示例：查找名字为 “John” 或者 “Peter” 的用户。</p>
<p> <a href></a>创建异步查询 </p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; result = realm.where(User.class)</span><br><span class="line">                              .equalTo(&quot;name&quot;, &quot;John&quot;)</span><br><span class="line">                              .or()</span><br><span class="line">                              .equalTo(&quot;name&quot;, &quot;Peter&quot;)</span><br><span class="line">                              .findAllAsync();</span><br></pre></td></tr></table></figure>

<p> 请注意，这里的调用并不会阻塞，而是立即返回一个 RealmResults。这很类似于标准 Java 中 <a href="https://developer.android.com/reference/java/util/concurrent/Future.html" target="_blank" rel="noopener">Future</a> 的概念。查询将会在后台线程中被执行，当其完成时，之前返回的 RealmResults 实例会被更新。</p>
<p> 如果你希望当查询完成、RealmResults 被更新时获得通知，你可以注册一个 RealmChangeListener。这个监听器会在 RealmResults 被更新时被调用（通常是在事务被提交后）。</p>
<h5 id="注册回调"><a href="#注册回调" class="headerlink" title="注册回调"></a><a href></a>注册回调</h5><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private RealmChangeListener callback = new RealmChangeListener&lt;RealmResults&lt;User&gt;&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onChange(RealmResults&lt;User&gt; results) &#123;</span><br><span class="line">        // called once the query complete and on every update</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">public void onStart() &#123;</span><br><span class="line">    RealmResults&lt;User&gt; result = realm.where(User.class).findAllAsync();</span><br><span class="line">    result.addChangeListener(callback);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 请在退出 Activity 或者 Fragment 时移除监听器的注册以避免内存泄漏。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public void onStop () &#123;</span><br><span class="line">    result.removeChangeListener(callback); // remove a particular listener</span><br><span class="line">    // or</span><br><span class="line">    result.removeChangeListeners(); // remove all registered listeners</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h5 id="检查查询是否完成"><a href="#检查查询是否完成" class="headerlink" title="检查查询是否完成"></a><a href></a>检查查询是否完成</h5><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; result = realm.where(User.class).findAllAsync();</span><br><span class="line">if (result.isLoaded()) &#123;</span><br><span class="line">  // Results are now available</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 同步查询返回的 RealmResults 实例的 isLoaded 方法会永远返回 true。</p>
<h5 id="强制装载异步查询"><a href="#强制装载异步查询" class="headerlink" title="强制装载异步查询"></a><a href></a>强制装载异步查询</h5><p> 你可以选择性地等待异步查询完成，而这将会阻塞当前线程，使查询变成同步（与 <a href="https://developer.android.com/reference/java/util/concurrent/Future.html#get()" target="_blank" rel="noopener">Future.get()</a> 类似的概念）。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;User&gt; result = realm.where(User.class).findAllAsync();</span><br><span class="line">result.load() // be careful, this will block the current thread until it returns</span><br></pre></td></tr></table></figure>


<h5 id="非-Looper-线程"><a href="#非-Looper-线程" class="headerlink" title="非 Looper 线程"></a><a href></a>非 Looper 线程</h5><p> 你可以在 Looper 线程中使用异步查询。异步查询需要使用 <a href="https://developer.android.com/reference/android/os/Handler.html" target="_blank" rel="noopener">Handler</a> 来传递查询结果。在没有 <a href="https://developer.android.com/reference/android/os/Looper.html" target="_blank" rel="noopener">Looper</a> 的线程中使用异步查询会导致 IllegalStateException 异常被抛出。</p>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#queries" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#queries</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-05T13:04:49.000Z">2017-03-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    21 分钟 读完 (大约 3115 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/05/《Android开源库》 Realm For Android~ RelationShips and Writes（译文）/">《Android开源库》 Realm For Android~ RelationShips and Writes（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="关系"><a href="#关系" class="headerlink" title="关系"></a><a href></a>关系</h2><p> 任何两个RealmObject都可以链接在一起。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Email extends RealmObject &#123;</span><br><span class="line">    private String address;</span><br><span class="line">    private boolean active;</span><br><span class="line">    // ... setters and getters left out</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Contact extends RealmObject &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private Email email;</span><br><span class="line">    // ... setters and getters left out</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 关系在Realm中开销不大。这意味着保持连接并不会影响速度，并且关系的内部实现在使用内存上也是相当高效的。</p>
<h4 id="多对一"><a href="#多对一" class="headerlink" title="多对一"></a><a href></a>多对一</h4><p> 在类中简单的定义一个继承自RealmObject的子类作为成员即可：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class Contact extends RealmObject &#123;</span><br><span class="line">    private Email email;</span><br><span class="line">    // Other fields…</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 每个联系人（Contact的实例）都有0或1个电子邮件（Email实例）。在Realm中，没有什么可以阻止你在多个联系人中使用相同的电子邮件对象，上述模型可以是多对一关系，但通常用于建模一对一关系。</p>
<p> 设置RealmObject字段null将清除引用，但对象不会从Realm中删除</p>
<hr>
<h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a><a href></a>多对多</h4><p> 你可以通过RealmList字段声明从单个对象与任意数量的对象建立关系。例如，假设有多个电子邮件地址的联系人</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Contact extends RealmObject &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public RealmList&lt;Email&gt; emails;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Email extends RealmObject &#123;</span><br><span class="line">    public String address;</span><br><span class="line">    public boolean active;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> RealmLists基本上是RealmObjects的容器，并且RealmList和一个普通的Java List用法基本相同。Realm在不同的RealmLists中可以使用相同的对象两次（或更多），没有限制，因此你可以使用它来建模一对多和多对多关系。</p>
<p> 你可以创建对象，并使用RealmList.add()将Email对象添加到Contact对象：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        Contact contact = realm.createObject(Contact.class);</span><br><span class="line">        contact.name = &quot;John Doe&quot;;</span><br><span class="line"></span><br><span class="line">        Email email1 = realm.createObject(Email.class);</span><br><span class="line">        email1.address = &quot;john@example.com&quot;;</span><br><span class="line">        email1.active = true;</span><br><span class="line">        contact.emails.add(email1);</span><br><span class="line"></span><br><span class="line">        Email email2 = realm.createObject(Email.class);</span><br><span class="line">        email2.address = &quot;jd@example.com&quot;;</span><br><span class="line">        email2.active = false;</span><br><span class="line">        contact.emails.add(email2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> 可以声明递归关系，当建模某些类型的数据时，这些关系可能很有用</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Person extends RealmObject &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public RealmList&lt;Person&gt; friends;</span><br><span class="line">    // Other fields…</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 将RealmList字段的值设置null将清除列表。也就是说，列表将为空（长度为零），但没有对象会被删除。通过getter方法获取RealmList将永远不会返回null。返回的对象总是一个列表，但长度可能为零。</p>
<hr>
<h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a><a href></a>连接查询</h4><p> 查询连接和关系时可以的。考虑如下模型：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Person extends RealmObject &#123;</span><br><span class="line">  private String id;</span><br><span class="line">  private String name;</span><br><span class="line">  private RealmList&lt;Dog&gt; dogs;</span><br><span class="line">  // getters and setters</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Dog extends RealmObject &#123;</span><br><span class="line">  private String id;</span><br><span class="line">  private String name;</span><br><span class="line">  private String color;</span><br><span class="line">  // getters and setters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 每个Person可以和狗建立一对多的关系，正如下表所示：</p>
<p> <img src="https://img-blog.csdn.net/20170305192726691" alt="这里写图片描述"></p>
<p> 使用连接查询来找一些人</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// persons =&gt; [U1,U2]</span><br><span class="line">RealmResults&lt;Person&gt; persons = realm.where(Person.class)</span><br><span class="line">                                .equalTo(&quot;dogs.color&quot;, &quot;Brown&quot;)</span><br><span class="line">                                .findAll();</span><br></pre></td></tr></table></figure>

<p> 首先，请注意，条件中的字段名称”equalTo”包含通过关系的路径（以句点分隔.）。</p>
<p> 上述查询应读取，查找到拥有名为”布朗”的狗的所有人。重要的是要理解，结果将包含不满足条件的Dog对象，因为它们是Person对象的一部分。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">persons.get(0).getDogs(); // =&gt; [A,B]</span><br><span class="line">persons.get(1).getDogs(); // =&gt; [B,C,D]</span><br></pre></td></tr></table></figure>

<p> 这可以通过以下两个查询进一步检查。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// r1 =&gt; [U1,U2]</span><br><span class="line">RealmResults&lt;Person&gt; r1 = realm.where(Person.class)</span><br><span class="line">                             .equalTo(&quot;dogs.name&quot;, &quot;Fluffy&quot;)</span><br><span class="line">                             .findAll();</span><br><span class="line"></span><br><span class="line">// r2 =&gt; [U1,U2]</span><br><span class="line">RealmResults&lt;Person&gt; r2 = r1.where()</span><br><span class="line">                          .equalTo(&quot;dogs.color&quot;, &quot;Brown&quot;)</span><br><span class="line">                          .findAll();</span><br></pre></td></tr></table></figure>

<p> 注意第一个查询如何返回这两个Person对象，因为条件与两个人都匹配。每个Person查询结果都包含一个Dog对象列表- 它们的所有Dog对象（即使是那些不满足原始查询条件的对象）。记住，我们正在寻找有特定种类的Dog（姓名和颜色）的人，而不是实际的狗本身。因此，第二个查询将针对第一个Person查询result（r1）和每个Persons狗进行评估。第二个查询也匹配两个人，但这次是因为狗的颜色。</p>
<p> 让我们深入一点，以帮助巩固这个概念。请查看以下示例：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/ r1 =&gt; [U1,U2]</span><br><span class="line">RealmResults&lt;Person&gt; r1 = realm.where(Person.class)</span><br><span class="line">                             .equalTo(&quot;dogs.name&quot;, &quot;Fluffy&quot;)</span><br><span class="line">                             .equalTo(&quot;dogs.color&quot;, &quot;Brown&quot;)</span><br><span class="line">                             .findAll();</span><br><span class="line"></span><br><span class="line">// r2 =&gt; [U2]</span><br><span class="line">RealmResults&lt;Person&gt; r2 = realm.where(Person.class)</span><br><span class="line">                             .equalTo(&quot;dogs.name&quot;, &quot;Fluffy&quot;)</span><br><span class="line">                             .findAll()</span><br><span class="line">                             .where()</span><br><span class="line">                             .equalTo(&quot;dogs.color&quot;, &quot;Brown&quot;)</span><br><span class="line">                             .findAll();</span><br><span class="line">                             .where()</span><br><span class="line">                             .equalTo(&quot;dogs.color&quot;, &quot;Yellow&quot;)</span><br><span class="line">                             .findAll();</span><br></pre></td></tr></table></figure>

<p> 第一个查询应该读取，查找到所有有名为”Fluffy”狗的 Person，也找到那些有名为”Brown”狗的Person，然后给我两个的​​交集。第二个查询先读取并查找到所有名为“Fluffy”的狗的Person。然后，给定结果集，找到所有有颜色为“棕色”的狗的Person，并且给定结果集，找到具有颜色为“黄色”的狗的所有人。</p>
<p> 让我们来看看背后的查询，r1以便充分了解发生了什么。两个条件是equalTo(“<a href="http://dogs.name" target="_blank" rel="noopener">dogs.name</a>”, “Fluffy”)和equalTo(“dogs.color”, “Brown”)。第一个条件满足U1和U2- 这是C1集合。第二个条件也满足U1和U2- 这是C2集合。查询中的逻辑和，和C1和C2的交集是一样的。C1和C2的交集为U1 and U2。因此，r1是U1 and U2。</p>
<p> 后面的查询r2就不同了。让我们开始分解这次查询以探究竟。查询的第一部分如下所示：RealmResults r2a = realm.where(Person.class).equalTo(“<a href="http://dogs.name" target="_blank" rel="noopener">dogs.name</a>”, “Fluffy”).findAll();。它匹配U1和U2。然后，r2b = r2a.where().equalTo(“dogs.color”, “Brown”).findAll();还是匹配U1和U2（两个人都有棕色的狗）。最后的查询，r2 = r2b.where().equalTo(“dogs.color”, “Yellow”).findAll();只匹配U2，因为只有一个人在棕色狗结果集中有一个黄色的狗，也就是U2</p>
<hr>
<h2 id="写"><a href="#写" class="headerlink" title="写"></a><a href></a>写</h2><p> 读操作是隐式的，这意味着可以随时访问和查询对象。所有写操作（添加，修改和删除对象）必须包含在写事务中。写事务可以提交或取消。在提交期间，所有更改都将写入磁盘，并且提交只有在所有更改都可以保留时才会成功。通过取消写入事务，所有更改都将被丢弃。使用写事务，你的数据将始终处于一致状态。</p>
<p> 写事务也用于确保线程安全</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Obtain a Realm instance</span><br><span class="line">Realm realm = Realm.getDefaultInstance();</span><br><span class="line"></span><br><span class="line">realm.beginTransaction();</span><br><span class="line"></span><br><span class="line">//... add or update objects here ...</span><br><span class="line"></span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>

<p> 在写事务中使用到你的RealmObjects时，你可能最后想放弃修改。与其提交之后再回退，你可以简单地取消写事务。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">realm.beginTransaction();</span><br><span class="line">User user = realm.createObject(User.class);</span><br><span class="line"></span><br><span class="line">//  ...</span><br><span class="line"></span><br><span class="line">realm.cancelTransaction();</span><br></pre></td></tr></table></figure>

<p> 请注意，写事务可能会相互阻塞。如果你在UI线程和后台线程上同时创建写入事务，这可能会导致ANR错误。为了避免这种情况，在UI线程上创建写事务时使用异步事务。</p>
<p> Realm是崩溃安全的，所以在一次事务中发生了Exception，Realm本身不会崩溃。只是当前事务中的数据会丢失。如果异常被捕获但应用程序仍在继续，这个时候取消正在执行的事务就显得尤为重要。如果使用executeTransaction()，这些将会自动的执行。</p>
<p> 感谢Realm的MVCC架构，在写事务打开的时候读取不会被阻塞！这意味着，除非你需要从多个线程同时进行事务，你可以使用一个更大的事务，这些事务如果使用小事务来做的话将会耗费更多的工作量。当你将写事务提交到Realm时，该Realm的所有其他实例将被通知并<a href="https://realm.io/docs/java/latest/#auto-updating" target="_blank" rel="noopener">自动更新</a>。</p>
<p> Realm中的读写访问是<a href="https://en.wikipedia.org/wiki/ACID" target="_blank" rel="noopener">ACID</a></p>
<h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a><a href></a>创建对象</h4><p> 因为RealmObjects都得绑定到一个领域，他们应该通过Realm直接实例化</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">realm.beginTransaction();</span><br><span class="line">User user = realm.createObject(User.class); // Create a new object</span><br><span class="line">user.setName(&quot;John&quot;);</span><br><span class="line">user.setEmail(&quot;john@corporation.com&quot;);</span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>

<p> 或者，你可以首先创建一个对象的实例，然后使用<a href="https://realm.io/docs/java/latest/api/io/realm/Realm.html#copyToRealm(E)" target="_blank" rel="noopener">realm.copyToRealm（）</a>添加它。Realm支持尽可能多的自定义构造函数，只要其中一个是<a href="http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html" target="_blank" rel="noopener">公共的无参数构造函数</a>。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">User user = new User(&quot;John&quot;);</span><br><span class="line">user.setEmail(&quot;john@corporation.com&quot;);</span><br><span class="line"></span><br><span class="line">// Copy the object to Realm. Any further changes must happen on realmUser</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">User realmUser = realm.copyToRealm(user);</span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>

<p> 当使用时，realm.copyToRealm()重要的是要记住只有返回的对象由Realm管理，所以对原始对象的任何进一步的更改都不会被持久化</p>
<hr>
<h4 id="事务块"><a href="#事务块" class="headerlink" title="事务块"></a><a href></a>事务块</h4><p> 不用手动保持跟踪realm.beginTransaction()，realm.commitTransaction()以及realm.cancelTransaction()可以使用<a href="https://realm.io/docs/java/latest/api/io/realm/Realm.html#executeTransaction(io.realm.Realm.Transaction)" target="_blank" rel="noopener">realm.executeTransaction（）</a>方法，它会自动处理开始/提交，发生错误的时候将自动取消</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">	@Override</span><br><span class="line">	public void execute(Realm realm) &#123;</span><br><span class="line">		User user = realm.createObject(User.class);</span><br><span class="line">		user.setName(&quot;John&quot;);</span><br><span class="line">		user.setEmail(&quot;john@corporation.com&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="异步事务"><a href="#异步事务" class="headerlink" title="异步事务"></a><a href></a>异步事务</h4><p> 因为事务被其他事务阻塞，所以在后台线程上执行所有写操作以避免阻塞UI线程是一个很好的主意。通过使用异步事务，Realm将在后台线程上运行该事务并在事务完成时报告。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">realm.executeTransactionAsync(new Realm.Transaction() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void execute(Realm bgRealm) &#123;</span><br><span class="line">                User user = bgRealm.createObject(User.class);</span><br><span class="line">                user.setName(&quot;John&quot;);</span><br><span class="line">                user.setEmail(&quot;john@corporation.com&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, new Realm.Transaction.OnSuccess() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onSuccess() &#123;</span><br><span class="line">                // Transaction was a success.</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, new Realm.Transaction.OnError() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onError(Throwable error) &#123;</span><br><span class="line">                // Transaction failed and was automatically canceled.</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p> OnSuccess和OnError回调都是可选的，但是如果提供，它们将在事务成功完成或失败时分别被调用。回调由Looper控制，因此它们只允许在Looper线程上回调。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ealmAsyncTask transaction = realm.executeTransactionAsync(new Realm.Transaction() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void execute(Realm bgRealm) &#123;</span><br><span class="line">                User user = bgRealm.createObject(User.class);</span><br><span class="line">                user.setName(&quot;John&quot;);</span><br><span class="line">                user.setEmail(&quot;john@corporation.com&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, null);</span><br></pre></td></tr></table></figure>

<p> 异步事务由RealmAsyncTask对象表示。如果在事务完成之前退出Activity / Fragment，此对象可用于取消任何挂起的事务。如果回调更新UI，忘记取消事务可能会导致应用程序崩溃。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ublic void onStop () &#123;</span><br><span class="line">    if (transaction != null &amp;&amp; !transaction.isCancelled()) &#123;</span><br><span class="line">        transaction.cancel();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="更新字符串和字节数"><a href="#更新字符串和字节数" class="headerlink" title="更新字符串和字节数"></a><a href></a>更新字符串和字节数</h4><p> Realm是以完整的字段作为操作对象的，不可能更新字符串或字节数组的单个元素。假如你需要更新字符串的第5个元素，你将需要做类似的事情：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        bytes[] bytes = realmObject.binary;</span><br><span class="line">        bytes[4] = &apos;a&apos;;</span><br><span class="line">        realmObject.binary = bytes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> 是由于Realm的MVCC架构，它避免了对现有数据的改变，以确保读取数据的其他线程或进程下表现一致。</p>
<hr>
<h4 id="快照"><a href="#快照" class="headerlink" title="快照"></a><a href></a>快照</h4><p> 所有Realm集合都是<a href="https://realm.io/docs/java/latest/#auto-updating-results" target="_blank" rel="noopener">实时的</a>。这意味着它们总是反映最新的状态。在大多数情况下，这是可取的，但如果你循环一个集合，目的是修改元素呢？例如：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;Person&gt; guests = realm.where(Person.class).equalTo(&quot;invited&quot;, false).findAll();</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">for (int i = 0; guests.size(); i++) &#123;</span><br><span class="line">    guests.get(i).setInvited(true);</span><br><span class="line">&#125;</span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>

<p> 通常你会期望这个简单的循环邀请所有客人。因为RealmResults是立即更新，虽然，只有一半的客人最终被邀请！受邀的邀请对象将从该集合中立即删除，这会移动所有元素。当i参数增加时，它将错过一个元素。</p>
<p> 为了防止这种情况，你可以拍摄集合数据的快照。快照保证元素的顺序不会改变，即使元素被删除或修改。</p>
<p> Iterator从Realm集合创建的文件将自动使用快照。RealmResults和RealmList可以使用createSnapshot()手动创建快照。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">RealmResults&lt;Person&gt; guests = realm.where(Person.class).equalTo(&quot;invited&quot;, false).findAll();</span><br><span class="line"></span><br><span class="line">// Use an iterator to invite all guests</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">for (Person guest : guests) &#123;</span><br><span class="line">    guest.setInvited(true);</span><br><span class="line">&#125;</span><br><span class="line">realm.commitTransaction();</span><br><span class="line"></span><br><span class="line">// Use a snapshot to invite all guests</span><br><span class="line">realm.beginTransaction();</span><br><span class="line">OrderedRealmCollectionSnapshot&lt;Person&gt; guestsSnapshot = guests.createSnapshot();</span><br><span class="line">for (int i = 0; guestsSnapshot.size(); i++) &#123;</span><br><span class="line">    guestsSnapshot.get(i).setInvited(true);</span><br><span class="line">&#125;</span><br><span class="line">realm.commitTransaction();</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#relationships" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#relationships</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-04T10:36:33.000Z">2017-03-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Android开源库/">Android开源库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 分钟 读完 (大约 2020 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/04/《Android开源库》Realm For Android~ Getting Help and Models（译文）/">《Android开源库》Realm For Android~ Getting Help and Models（译文）</a>
            
        </h1>
        <div class="content">
            <h2 id="获得帮助"><a href="#获得帮助" class="headerlink" title="获得帮助"></a><a href></a>获得帮助</h2><p> 你编程时需要帮助？：在 <a href="http://stackoverflow.com/questions/ask?tags=realm" target="_blank" rel="noopener">StackOverflow 上提问</a>。我们在实时监控并且回答 SO 上的相关问题！<br> 要报告一个 bug？：<a href="https://github.com/realm/realm-java/issues/new" target="_blank" rel="noopener">在我们的 GitHub 仓库里新建一个问题</a>，并且尽可能地按问题模板将 bug 描述清楚。<br> 需要一个新功能？：<a href="https://github.com/realm/realm-java/issues/new" target="_blank" rel="noopener">在我们的 GitHub 仓库里新建一个问题</a>，并且尽可能地按问题模板将该功能描述清楚。<br> 想知道接下来将会发生什么？：<a href="https://github.com/realm/realm-java/blob/master/CHANGELOG.md" target="_blank" rel="noopener">看看我们的 changelog</a>。这里有我们即将发布的改动以及修改历史。</p>
<hr>
<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a><a href></a>模型</h2><p> Realm 数据模型定义需要继承自 RealmObject 类。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class User extends RealmObject &#123;</span><br><span class="line"></span><br><span class="line">    private String          name;</span><br><span class="line">    private int             age;</span><br><span class="line"></span><br><span class="line">    @Ignore</span><br><span class="line">    private int             sessionId;</span><br><span class="line"></span><br><span class="line">    // Standard getters &amp; setters generated by your IDE…</span><br><span class="line">    public String getName() &#123; return name; &#125;</span><br><span class="line">    public void   setName(String name) &#123; this.name = name; &#125;</span><br><span class="line">    public int    getAge() &#123; return age; &#125;</span><br><span class="line">    public void   setAge(int age) &#123; this.age = age; &#125;</span><br><span class="line">    public int    getSessionId() &#123; return sessionId; &#125;</span><br><span class="line">    public void   setSessionId(int sessionId) &#123; this.sessionId = sessionId; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> Realm 数据模型不仅仅支持 private 成员变量，你还可以使用 public、protected 以及自定义的成员方法。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class User extends RealmObject &#123;</span><br><span class="line"></span><br><span class="line">    public String name;</span><br><span class="line"></span><br><span class="line">    public boolean hasLongName() &#123;</span><br><span class="line">      return name.length() &gt; 7;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) &#123;</span><br><span class="line">      // Custom equals comparison</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a><a href></a>字段类型</h4><p> Realm 支持以下字段类型：boolean、byte、short、int、long、float、double、String、Date和byte []。整数类型 short、int 和 long 都被映射到 Realm 内的相同类型（实际上为 long ）。再者，还可以使用 RealmObject 的子类和 RealmList&lt;? extends RealmObject&gt; 来表示模型关系。</p>
<p> Realm 对象中还可以声明包装类型（boxed type）属性，包括：Boolean、Byte、Short、Integer、Long、Float和Double。通过使用包装类型，可以使这些属性存取空值（null)。</p>
<hr>
<h4 id="Required修饰类型和空值（null）"><a href="#Required修饰类型和空值（null）" class="headerlink" title="@Required修饰类型和空值（null）"></a><a href></a>@Required修饰类型和空值（null）</h4><p> 某些时候，空值（null）对于属性并不合适。这时可以使用注解 @Required 告诉 Realm 强制禁止空值（null）被存储。只有 Boolean、 Byte、 Short、 Integer、 Long、 Float、 Double、 String、 byte[] 以及 Date 可以被 @Required 修饰。在其它类型属性上使用 @Required 修饰会导致编译失败。基本数据类型（primitive types）不需要使用注解 @Required，因为他们本身就不可为空。RealmObject 属性永远可以为空。</p>
<hr>
<h4 id="忽略的属性"><a href="#忽略的属性" class="headerlink" title="忽略的属性"></a><a href></a>忽略的属性</h4><p> 注解 @Ignore 意味着一个字段不应该被保存到 Realm。某些时候输入的信息包含比模型更多的字段，而你不希望处理这些未使用的数据字段，你可以用 @Ignore 来标识这些你希望被 Realm 忽略的字段</p>
<hr>
<h4 id="Auto-Updating-Objects"><a href="#Auto-Updating-Objects" class="headerlink" title="Auto-Updating Objects"></a><a href></a>Auto-Updating Objects</h4><p> RealmObject 是实时的、自动更新的底层数据的映射视图。你不需要去重新获得对象已取得其最新版本。对于数据的改动会即时反应到相关的对象或者查询结果。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">final Dog myDog;</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        myDog = realm.createObject(Dog.class);</span><br><span class="line">        myDog.setName(&quot;Fido&quot;);</span><br><span class="line">        myDog.setAge(1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        Dog myPuppy = realm.where(Dog.class).equalTo(&quot;age&quot;, 1).findFirst();</span><br><span class="line">        myPuppy.setAge(2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myDog.getAge(); // =&gt; 2</span><br></pre></td></tr></table></figure>

<p> RealmObject 和 RealmResults 的设计不仅仅是为了更快和更有效率，它们同时也让代码更加简洁以及反应性更强。举例来说，假设你的 Activity 或者 Fragment 依赖于某个 RealmObject 或者 RealmResults，你无需担心何时去刷新或者重新获取它们以更新 UI——它们会自动更新。</p>
<p> 你可以通过订阅 Realm notifications 来得知 Realm 的数据在何时被更新从而刷新你的 UI。</p>
<hr>
<h4 id="索引（Index）属性"><a href="#索引（Index）属性" class="headerlink" title="索引（Index）属性"></a><a href></a>索引（Index）属性</h4><p> 注解 @Index 会为字段增加搜索索引。这会导致插入速度变慢，同时数据文件体积有所增加，但能加速查询。因此建议仅在需要加速查询时才添加索引。目前仅支持索引的属性类型包括：String、byte、short、int、long、boolean和Date。</p>
<hr>
<h4 id="主键-primary-keys"><a href="#主键-primary-keys" class="headerlink" title="主键 (primary keys)"></a><a href></a>主键 (primary keys)</h4><p> @PrimaryKey 可以用来定义字段为主键，该字段类型必须为字符串（String）或整数（short、int 或 long）以及它们的包装类型（Short、Int 或 Long）。不可以存在多个主键。使用支持索引的属性类型作为主键同时意味着为该字段建立索引。</p>
<p> 当创建 Realm 对象时，所有字段会被设置为默认值。为了避免与具有相同主键的另一个对象冲突，建议创建一个 unmanaged 对象，为字段的赋值，然后用 copyToRealm() 方法将该对象复制到 Realm。</p>
<p> 主键的存在意味着可以使用 copyToRealmOrUpdate() 方法，它会用此主键尝试寻找一个已存在的对象，如果对象存在，就更新该对象；反之，它会创建一个新的对象。当 copyToRealmOrUpdate() 的调用对象没有主键时，会抛出异常。</p>
<p> 使用主键会对性能产生影响。创建和更新对象将会慢一点，而查询则会变快。很难量化这些性能的差异，因为性能的改变跟你数据库的大小息息相关。</p>
<p> Realm.createObject()会返回一个所有字段被设置为默认值的新对象。如果该模型类存在主键，那么有可能返回对象的主键的默认值与其它已存在的对象冲突。建议创建一个非托管（unmanaged）Realm 对象，并给其主键赋值，然后调用 copyToRealm() 来避免冲突。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">final MyObject obj = new MyObject();</span><br><span class="line">obj.setId(42);</span><br><span class="line">obj.setName(&quot;Fish&quot;);</span><br><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        // This will create a new object in Realm or throw an exception if the</span><br><span class="line">        // object already exists (same primary key)</span><br><span class="line">        // realm.copyToRealm(obj);</span><br><span class="line"></span><br><span class="line">        // This will update an existing object with the same primary key</span><br><span class="line">        // or create a new object if an object with no primary key = 42</span><br><span class="line">        realm.copyToRealmOrUpdate(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> 字符串（String）和包装类型（Short、Int 或 Long）的主键可以被赋予空值（null）；除非它们同时被 @Required 修饰。</p>
<hr>
<h4 id="定制对象（Customizing-Objects）"><a href="#定制对象（Customizing-Objects）" class="headerlink" title="定制对象（Customizing Objects）"></a><a href></a>定制对象（Customizing Objects）</h4><p> 你几乎可以把 RealmObject 当作 POJO 使用。只需扩展 RealmObject，将相应属性声明为 public。不需要 setter 和 getter， 而是直接访问属性。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class Dog extends RealmObject &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 你可以像使用其他类一样直接使用 Dog 类。createObject() 和 copyToRealm() 可以帮助你创建一个托管给 Realm 的 Dog 对象。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">realm.executeTransaction(new Realm.Transaction() &#123;</span><br><span class="line">    @Overrride</span><br><span class="line">    public void execute(Realm realm) &#123;</span><br><span class="line">        Dog dog = realm.createObject(Dog.class);</span><br><span class="line">        dog.name = &quot;Fido&quot;;</span><br><span class="line">        dog.age  = 5;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p> 如果需要的话，你可以在 setter 和 getter 中添加你自己的逻辑。例如你可能需要在保存之前验证值的合法性。另外，你还可以为你的 RealmObject 添加自定义方法。</p>
<hr>
<h4 id="限制"><a href="#限制" class="headerlink" title="限制"></a><a href></a>限制</h4><p> 目前不支持 final、transient 和 volatile 修饰的成员变量，这主要是为了 Realm 对象在非托管（unmanaged RealmObject）时候的行为差异化。</p>
<p> Realm 数据模型不可以继承自除了 RealmObject 以外的其它对象。你可以选择不声明默认无参数构造器，但是如果你声明了，那么该构造器必须为空构造器。这是目前 Realm 的一个限制。但你可以自由添加任意其它的构造器。</p>
<hr>
<h4 id="RealmModel-接口"><a href="#RealmModel-接口" class="headerlink" title="RealmModel 接口"></a><a href></a>RealmModel 接口</h4><p> 除直接继承于 RealmObject 来声明 Realm 数据模型之外，还可以通过实现 RealmModel 接口并添加 @RealmClass 修饰符来声明。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@RealmClass</span><br><span class="line">public class User implements RealmModel &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> RealmObject 的所有方法都有其相对应的静态方法。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// With RealmObject</span><br><span class="line">user.isValid();</span><br><span class="line">user.addChangeListener(listener);</span><br><span class="line"></span><br><span class="line">// With RealmModel</span><br><span class="line">RealmObject.isValid(user);</span><br><span class="line">RealmObject.addChangeListener(user, listener);</span><br></pre></td></tr></table></figure>


<hr>
<h2 id="原文链接"><a href="#原文链接" class="headerlink" title="原文链接"></a><a href></a>原文链接</h2><p> <a href="https://realm.io/docs/java/latest/#getting-help" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#getting-help</a><br> <a href="https://realm.io/docs/java/latest/#models" target="_blank" rel="noopener">https://realm.io/docs/java/latest/#models</a></p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/tags/开源库/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/tags/开源库/page/3/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/tags/开源库/">1</a></li>
            
            <li><a class="pagination-link is-current" href="/tags/开源库/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/tags/开源库/page/3/">3</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.png" alt="Your name">
                    
                    
                    <p class="is-size-4 is-block">
                        Your name
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Your title
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Your location</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        162
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        14
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        81
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/ppoffice" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/ppoffice">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Android基础/">
            <span class="level-start">
                <span class="level-item">Android基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">51</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Android基础/Android-Studio/">
            <span class="level-start">
                <span class="level-item">Android Studio</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Android安全/">
            <span class="level-start">
                <span class="level-item">Android安全</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android应用/">
            <span class="level-start">
                <span class="level-item">Android应用</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">25</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android开源库/">
            <span class="level-start">
                <span class="level-item">Android开源库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">24</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android源码/">
            <span class="level-start">
                <span class="level-item">Android源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android系统/">
            <span class="level-start">
                <span class="level-item">Android系统</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Android进阶/">
            <span class="level-start">
                <span class="level-item">Android进阶</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Angular/">
            <span class="level-start">
                <span class="level-item">Angular</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Flutter/">
            <span class="level-start">
                <span class="level-item">Flutter</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Kotlin/">
            <span class="level-start">
                <span class="level-item">Kotlin</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/LeetCode/">
            <span class="level-start">
                <span class="level-item">LeetCode</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/微信小程序/">
            <span class="level-start">
                <span class="level-item">微信小程序</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/运维/">
            <span class="level-start">
                <span class="level-item">运维</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">13</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Aandroid实战/" style="font-size: 10px;">Aandroid实战</a> <a href="/tags/Android-Studio/" style="font-size: 13.08px;">Android Studio</a> <a href="/tags/Android基础/" style="font-size: 10px;">Android基础</a> <a href="/tags/Android实战/" style="font-size: 19.23px;">Android实战</a> <a href="/tags/Android开源库/" style="font-size: 10.77px;">Android开源库</a> <a href="/tags/Android源码/" style="font-size: 10px;">Android源码</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/BroadcastReceiver/" style="font-size: 10px;">BroadcastReceiver</a> <a href="/tags/CSDN迁移/" style="font-size: 13.08px;">CSDN迁移</a> <a href="/tags/CentOS/" style="font-size: 11.54px;">CentOS</a> <a href="/tags/CodeStyle/" style="font-size: 10px;">CodeStyle</a> <a href="/tags/Docker/" style="font-size: 12.31px;">Docker</a> <a href="/tags/Drawable/" style="font-size: 10.77px;">Drawable</a> <a href="/tags/EditText/" style="font-size: 10px;">EditText</a> <a href="/tags/FileProvider/" style="font-size: 10px;">FileProvider</a> <a href="/tags/Flex/" style="font-size: 10px;">Flex</a> <a href="/tags/Flutter/" style="font-size: 10px;">Flutter</a> <a href="/tags/Fragment/" style="font-size: 12.31px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 15.38px;">Framework</a> <a href="/tags/Gank-io/" style="font-size: 12.31px;">Gank.io</a> <a href="/tags/Gitlab/" style="font-size: 10px;">Gitlab</a> <a href="/tags/HAL/" style="font-size: 10px;">HAL</a> <a href="/tags/IDEA插件/" style="font-size: 10px;">IDEA插件</a> <a href="/tags/JetPack/" style="font-size: 10px;">JetPack</a> <a href="/tags/Kotlin/" style="font-size: 13.85px;">Kotlin</a> <a href="/tags/LeetCode/" style="font-size: 12.31px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 13.85px;">Linux</a> <a href="/tags/MPAndroidChart/" style="font-size: 14.62px;">MPAndroidChart</a> <a href="/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MultiDex/" style="font-size: 10px;">MultiDex</a> <a href="/tags/Mysql/" style="font-size: 10.77px;">Mysql</a> <a href="/tags/PMDReader/" style="font-size: 10px;">PMDReader</a> <a href="/tags/Picasso/" style="font-size: 10px;">Picasso</a> <a href="/tags/PowerDesign/" style="font-size: 10px;">PowerDesign</a> <a href="/tags/Realm/" style="font-size: 16.15px;">Realm</a> <a href="/tags/RecyclerView/" style="font-size: 11.54px;">RecyclerView</a> <a href="/tags/Retrofit/" style="font-size: 10px;">Retrofit</a> <a href="/tags/RxJava/" style="font-size: 10.77px;">RxJava</a> <a href="/tags/Service/" style="font-size: 10px;">Service</a> <a href="/tags/Smali/" style="font-size: 10.77px;">Smali</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/View/" style="font-size: 10px;">View</a> <a href="/tags/WanANdroid/" style="font-size: 10px;">WanANdroid</a> <a href="/tags/WebService/" style="font-size: 10px;">WebService</a> <a href="/tags/Xen/" style="font-size: 11.54px;">Xen</a> <a href="/tags/allowBackup/" style="font-size: 10px;">allowBackup</a> <a href="/tags/事件分发/" style="font-size: 10px;">事件分发</a> <a href="/tags/动画/" style="font-size: 10.77px;">动画</a> <a href="/tags/四大组件/" style="font-size: 10px;">四大组件</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/局域网/" style="font-size: 10px;">局域网</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/布局控件/" style="font-size: 20px;">布局控件</a> <a href="/tags/应用/" style="font-size: 17.69px;">应用</a> <a href="/tags/开发问题/" style="font-size: 10px;">开发问题</a> <a href="/tags/开机动画/" style="font-size: 10.77px;">开机动画</a> <a href="/tags/开源/" style="font-size: 11.54px;">开源</a> <a href="/tags/开源库/" style="font-size: 18.46px;">开源库</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/快捷键/" style="font-size: 10px;">快捷键</a> <a href="/tags/手电筒/" style="font-size: 10px;">手电筒</a> <a href="/tags/技术选型/" style="font-size: 10px;">技术选型</a> <a href="/tags/文本/" style="font-size: 10px;">文本</a> <a href="/tags/框架/" style="font-size: 10px;">框架</a> <a href="/tags/源码分析/" style="font-size: 11.54px;">源码分析</a> <a href="/tags/百度地图/" style="font-size: 12.31px;">百度地图</a> <a href="/tags/系统源码/" style="font-size: 10px;">系统源码</a> <a href="/tags/终端/" style="font-size: 10px;">终端</a> <a href="/tags/聚合数据/" style="font-size: 10px;">聚合数据</a> <a href="/tags/自定义View/" style="font-size: 15.38px;">自定义View</a> <a href="/tags/虚拟化/" style="font-size: 11.54px;">虚拟化</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/译文/" style="font-size: 16.92px;">译文</a> <a href="/tags/贪吃蛇/" style="font-size: 10px;">贪吃蛇</a> <a href="/tags/资源/" style="font-size: 10px;">资源</a> <a href="/tags/资源配置/" style="font-size: 10px;">资源配置</a> <a href="/tags/辅助工具/" style="font-size: 10px;">辅助工具</a> <a href="/tags/配置/" style="font-size: 11.54px;">配置</a> <a href="/tags/问题/" style="font-size: 10px;">问题</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（五）》MVVM/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.040Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（五）》MVVM/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十五）》Frame Animation/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.039Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十五）》Frame Animation/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十）》 CoordinatorLayout Behavior/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.039Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十）》 CoordinatorLayout Behavior/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十一）》Android 屏幕适配/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.037Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十一）》Android 屏幕适配/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十七）》 Android Studio常用技巧（免费代理下载Google内容）/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.037Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十七）》 Android Studio常用技巧（免费代理下载Google内容）/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/04/">
                <span class="level-start">
                    <span class="level-item">四月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Aandroid实战/">
                        <span class="tag">Aandroid实战</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Studio/">
                        <span class="tag">Android Studio</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android基础/">
                        <span class="tag">Android基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android实战/">
                        <span class="tag">Android实战</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android开源库/">
                        <span class="tag">Android开源库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android源码/">
                        <span class="tag">Android源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BroadcastReceiver/">
                        <span class="tag">BroadcastReceiver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSDN迁移/">
                        <span class="tag">CSDN迁移</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CentOS/">
                        <span class="tag">CentOS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CodeStyle/">
                        <span class="tag">CodeStyle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Drawable/">
                        <span class="tag">Drawable</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/EditText/">
                        <span class="tag">EditText</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/FileProvider/">
                        <span class="tag">FileProvider</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flex/">
                        <span class="tag">Flex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flutter/">
                        <span class="tag">Flutter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Fragment/">
                        <span class="tag">Fragment</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Framework/">
                        <span class="tag">Framework</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gank-io/">
                        <span class="tag">Gank.io</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gitlab/">
                        <span class="tag">Gitlab</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HAL/">
                        <span class="tag">HAL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/IDEA插件/">
                        <span class="tag">IDEA插件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JetPack/">
                        <span class="tag">JetPack</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MPAndroidChart/">
                        <span class="tag">MPAndroidChart</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MacOS/">
                        <span class="tag">MacOS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MultiDex/">
                        <span class="tag">MultiDex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mysql/">
                        <span class="tag">Mysql</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PMDReader/">
                        <span class="tag">PMDReader</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Picasso/">
                        <span class="tag">Picasso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PowerDesign/">
                        <span class="tag">PowerDesign</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Realm/">
                        <span class="tag">Realm</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RecyclerView/">
                        <span class="tag">RecyclerView</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Retrofit/">
                        <span class="tag">Retrofit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RxJava/">
                        <span class="tag">RxJava</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Service/">
                        <span class="tag">Service</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Smali/">
                        <span class="tag">Smali</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/TabLayout/">
                        <span class="tag">TabLayout</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/View/">
                        <span class="tag">View</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WanANdroid/">
                        <span class="tag">WanANdroid</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WebService/">
                        <span class="tag">WebService</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Xen/">
                        <span class="tag">Xen</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/allowBackup/">
                        <span class="tag">allowBackup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/事件分发/">
                        <span class="tag">事件分发</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动画/">
                        <span class="tag">动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/四大组件/">
                        <span class="tag">四大组件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/局域网/">
                        <span class="tag">局域网</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/布局控件/">
                        <span class="tag">布局控件</span>
                        <span class="tag is-grey">28</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/应用/">
                        <span class="tag">应用</span>
                        <span class="tag is-grey">23</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发问题/">
                        <span class="tag">开发问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开机动画/">
                        <span class="tag">开机动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源库/">
                        <span class="tag">开源库</span>
                        <span class="tag is-grey">24</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/微信公众号/">
                        <span class="tag">微信公众号</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/快捷键/">
                        <span class="tag">快捷键</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手电筒/">
                        <span class="tag">手电筒</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/技术选型/">
                        <span class="tag">技术选型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/文本/">
                        <span class="tag">文本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/框架/">
                        <span class="tag">框架</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码分析/">
                        <span class="tag">源码分析</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/百度地图/">
                        <span class="tag">百度地图</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统源码/">
                        <span class="tag">系统源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/终端/">
                        <span class="tag">终端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/聚合数据/">
                        <span class="tag">聚合数据</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自定义View/">
                        <span class="tag">自定义View</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟化/">
                        <span class="tag">虚拟化</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/译文/">
                        <span class="tag">译文</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪吃蛇/">
                        <span class="tag">贪吃蛇</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源/">
                        <span class="tag">资源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源配置/">
                        <span class="tag">资源配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/辅助工具/">
                        <span class="tag">辅助工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置/">
                        <span class="tag">配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/问题/">
                        <span class="tag">问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（五）》MVVM/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.040Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（五）》MVVM/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十五）》Frame Animation/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.039Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十五）》Frame Animation/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十）》 CoordinatorLayout Behavior/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.039Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十）》 CoordinatorLayout Behavior/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十一）》Android 屏幕适配/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.037Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十一）》Android 屏幕适配/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/14/《Android 基础（二十七）》 Android Studio常用技巧（免费代理下载Google内容）/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-14T11:22:12.037Z">2019-06-14</time></div>
                    <a href="/2019/06/14/《Android 基础（二十七）》 Android Studio常用技巧（免费代理下载Google内容）/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">四月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">八月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">七月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">六月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">五月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">四月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">10</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">8</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/04/">
                <span class="level-start">
                    <span class="level-item">四月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Aandroid实战/">
                        <span class="tag">Aandroid实战</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android-Studio/">
                        <span class="tag">Android Studio</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android基础/">
                        <span class="tag">Android基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android实战/">
                        <span class="tag">Android实战</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android开源库/">
                        <span class="tag">Android开源库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android源码/">
                        <span class="tag">Android源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Angular/">
                        <span class="tag">Angular</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/BroadcastReceiver/">
                        <span class="tag">BroadcastReceiver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CSDN迁移/">
                        <span class="tag">CSDN迁移</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CentOS/">
                        <span class="tag">CentOS</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CodeStyle/">
                        <span class="tag">CodeStyle</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Docker/">
                        <span class="tag">Docker</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Drawable/">
                        <span class="tag">Drawable</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/EditText/">
                        <span class="tag">EditText</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/FileProvider/">
                        <span class="tag">FileProvider</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flex/">
                        <span class="tag">Flex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Flutter/">
                        <span class="tag">Flutter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Fragment/">
                        <span class="tag">Fragment</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Framework/">
                        <span class="tag">Framework</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gank-io/">
                        <span class="tag">Gank.io</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Gitlab/">
                        <span class="tag">Gitlab</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/HAL/">
                        <span class="tag">HAL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/IDEA插件/">
                        <span class="tag">IDEA插件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JetPack/">
                        <span class="tag">JetPack</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Kotlin/">
                        <span class="tag">Kotlin</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LeetCode/">
                        <span class="tag">LeetCode</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MPAndroidChart/">
                        <span class="tag">MPAndroidChart</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MacOS/">
                        <span class="tag">MacOS</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Markdown/">
                        <span class="tag">Markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MultiDex/">
                        <span class="tag">MultiDex</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mysql/">
                        <span class="tag">Mysql</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PMDReader/">
                        <span class="tag">PMDReader</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Picasso/">
                        <span class="tag">Picasso</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PowerDesign/">
                        <span class="tag">PowerDesign</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Realm/">
                        <span class="tag">Realm</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RecyclerView/">
                        <span class="tag">RecyclerView</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Retrofit/">
                        <span class="tag">Retrofit</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/RxJava/">
                        <span class="tag">RxJava</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Service/">
                        <span class="tag">Service</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Smali/">
                        <span class="tag">Smali</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/TabLayout/">
                        <span class="tag">TabLayout</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/View/">
                        <span class="tag">View</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WanANdroid/">
                        <span class="tag">WanANdroid</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/WebService/">
                        <span class="tag">WebService</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Xen/">
                        <span class="tag">Xen</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/allowBackup/">
                        <span class="tag">allowBackup</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/事件分发/">
                        <span class="tag">事件分发</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动画/">
                        <span class="tag">动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/四大组件/">
                        <span class="tag">四大组件</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/局域网/">
                        <span class="tag">局域网</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/布局控件/">
                        <span class="tag">布局控件</span>
                        <span class="tag is-grey">28</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/应用/">
                        <span class="tag">应用</span>
                        <span class="tag is-grey">23</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开发问题/">
                        <span class="tag">开发问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开机动画/">
                        <span class="tag">开机动画</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源/">
                        <span class="tag">开源</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源库/">
                        <span class="tag">开源库</span>
                        <span class="tag is-grey">24</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/微信公众号/">
                        <span class="tag">微信公众号</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/快捷键/">
                        <span class="tag">快捷键</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手电筒/">
                        <span class="tag">手电筒</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/技术选型/">
                        <span class="tag">技术选型</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/文本/">
                        <span class="tag">文本</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/框架/">
                        <span class="tag">框架</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码分析/">
                        <span class="tag">源码分析</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/百度地图/">
                        <span class="tag">百度地图</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统源码/">
                        <span class="tag">系统源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/终端/">
                        <span class="tag">终端</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/聚合数据/">
                        <span class="tag">聚合数据</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/自定义View/">
                        <span class="tag">自定义View</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟化/">
                        <span class="tag">虚拟化</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/译文/">
                        <span class="tag">译文</span>
                        <span class="tag is-grey">15</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪吃蛇/">
                        <span class="tag">贪吃蛇</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源/">
                        <span class="tag">资源</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/资源配置/">
                        <span class="tag">资源配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/辅助工具/">
                        <span class="tag">辅助工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/配置/">
                        <span class="tag">配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/问题/">
                        <span class="tag">问题</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="onlyloveyd" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 yidong&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>